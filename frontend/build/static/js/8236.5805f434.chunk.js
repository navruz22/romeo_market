"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1181,8236],{6521:(e,t,i)=>{i.d(t,{P:()=>d});i(5043);var l=i(3979),a=i(9456),r=i(2096),n=i(579);const o=e=>{var t;let{product:i,currency:o,marketName:s,isShowPrice:c}=e;const{inputRef:d}=(0,l.E)({value:null===i||void 0===i||null===(t=i.productdata)||void 0===t?void 0:t.barcode,options:{background:"#fff",width:"2cm",height:"40cm"}});console.log(i);const{currency:u}=(0,a.d4)((e=>e.currency));return(0,n.jsx)("div",{className:"w-[40mm] break-after-page font-sans h-[65mm] times ",children:(0,n.jsxs)("div",{className:"w-[65mm] rotate-90 mt-20 -ml-0 text-xl",children:[(0,n.jsx)("div",{className:"text-center font-bold text-2xl p-[1px]",children:(0,n.jsxs)("span",{children:['"',s,'"']})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-center text-lg p-1",children:[(0,r.t)("Nomi"),":",(0,n.jsx)("br",{})," ",(0,n.jsx)("span",{className:"font-bold",children:i.productdata&&i.productdata.name})]}),c&&(0,n.jsxs)("div",{className:"text-2xl font-bold text-center p-1",children:[(0,n.jsx)("span",{children:i.price?"\u0426\u0435\u043d\u0430:":""})," ",(0,n.jsx)("span",{children:i.price&&("UZS"===o?i.price.sellingpriceuzs.toLocaleString("ru-RU"):i.price.sellingprice.toLocaleString("ru-RU"))+" "+o||""})]}),(0,n.jsx)("div",{children:(0,n.jsx)("canvas",{ref:d})}),(0,n.jsx)("div",{className:"flex justify-center p-1"}),(0,n.jsxs)("div",{className:"flex justify-between text-xl p-1",children:[(0,n.jsxs)("div",{children:[(0,r.t)("Kodi"),": ",i.category&&i.category.code," ",i.productdata&&i.productdata.code]}),(0,n.jsx)("div",{children:(new Date).toLocaleDateString()})]})]})]})})};var s=i(3536);const c=(e,t)=>{let i=[];for(let l=0;l<e;l++)i.push(t);return i},d=e=>{let{countOfCheques:t,productForCheques:i,printedData:l,componentRef:a,currency:r,marketName:d,isShowPrice:u}=e;return(0,n.jsxs)("div",{ref:a,children:[i&&t&&(0,s.map)(i,(e=>(0,s.range)(0,t).map((()=>(0,n.jsx)(o,{currency:r,product:e,marketName:d,isShowPrice:u},(0,s.uniqueId)("barCode")))))),(0,s.map)(l,(e=>(0,n.jsx)("div",{children:(0,s.map)(c(e.numberOfChecks,e.product),(e=>(0,n.jsx)(o,{currency:r,product:e,marketName:d,isShowPrice:u},(0,s.uniqueId)("barCode"))))},(0,s.uniqueId)("barCodeContainer"))))]})}},6166:(e,t,i)=>{i.d(t,{A:()=>r});i(5043);var l=i(221),a=i(579);const r=function(e){let{type:t,onClick:i,active:r}=e;const n={product:{icon:(0,a.jsx)(l.Ua$,{className:"shopIcons"}),bgColor:"bg-[#12B76A]"},selling:{icon:(0,a.jsx)(l.zIN,{className:"shopIcons"}),bgColor:"bg-[#F79009]"},payments:{icon:(0,a.jsx)(l.IY5,{className:"shopIcons"}),bgColor:"bg-[#00B4CC]"},income:{icon:(0,a.jsx)(l.HdM,{className:"shopIcons"}),bgColor:"bg-[#00B4CC]"}};return(0,a.jsx)("button",{onClick:i,className:`${r?"filial-active":n[t].bgColor} shopButton`,children:n[t].icon})}},5784:(e,t,i)=>{i.r(t),i.d(t,{default:()=>j});var l=i(5043),a=i(3237),r=i(4964),n=i(2039),o=i(1605),s=i(7424),c=i(9456),d=i(4235),u=i(8054),m=i(3978),p=i(3141),g=i(6521),h=i(200),f=i(9092),v=i(3536),x=i(3734),y=(i(7990),i(579));const j=e=>{let{id:t}=e;const{t:i}=(0,f.B)(["common"]),j=[{title:i("\u2116")},{title:i("Kategoriyasi"),filter:"category.code"},{title:i("Maxsulot kodi"),filter:"productdata.code"},{title:i("Maxsulot nomi"),filter:"productdata.name"},{title:i("Soni(dona)"),filter:"product.total"},{title:i("Olish"),filter:"price.incomingprice"},{title:i("Olish jami")},{title:i("Sotish"),filter:"price.sellingprice"},{title:i("Sotish jami")},{title:i("Cheklar soni")},{title:""}],S=(0,c.wA)(),{products:C,total:P,loading:k,searchedProducts:N,totalSearched:b,loadingExcel:A}=(0,c.d4)((e=>e.products)),{currencyType:E}=(0,c.d4)((e=>e.currency)),{market:{name:w}}=(0,c.d4)((e=>e.login)),[B,_]=(0,l.useState)(C),[D,U]=(0,l.useState)(N),[M,z]=(0,l.useState)(P),[I,O]=(0,l.useState)("10"),[R,L]=(0,l.useState)(0),[$,Y]=(0,l.useState)(""),[Z,q]=(0,l.useState)(""),[T,K]=(0,l.useState)(""),[F,J]=(0,l.useState)(null),[W,H]=(0,l.useState)(""),[V,G]=(0,l.useState)({filter:"",sort:"",count:0}),[Q,X]=(0,l.useState)(!1),[ee,te]=(0,l.useState)([]),[ie,le]=(0,l.useState)(!0),ae=(0,l.useRef)(),re=(0,l.useRef)(),ne=(0,p.useReactToPrint)({content:()=>ae.current,onBeforeGetContent:()=>(X(!0),new Promise((e=>{re.current=e,setTimeout((()=>{X(!1),e()}),2e3)})))}),oe=async(e,t)=>{t&&te([...(0,v.filter)(ee,(t=>t.product._id===e._id))]),await ne()};console.log(ie);return(0,l.useEffect)((()=>{const e={filialId:t,currentPage:R,countPage:I,search:{name:Z.replace(/\s+/g," ").trim(),code:$.replace(/\s+/g," ").trim(),category:T.replace(/\s+/g,"")}};S((0,m.d$)(e))}),[R,I,S]),(0,l.useEffect)((()=>{_(C)}),[C]),(0,l.useEffect)((()=>{z(P)}),[P]),(0,l.useEffect)((()=>{U(N)}),[N]),(0,l.useEffect)((()=>{Q&&"function"===typeof re.current&&re.current()}),[re.current,Q]),(0,l.useEffect)((()=>{Q||(te([]),H(""),J(null))}),[Q]),(0,y.jsxs)(o.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[A||Q&&(0,y.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,y.jsx)(d.A,{})}),(0,y.jsx)("div",{className:"mt-10 lg:mt-0 pagination mainPadding",children:(0,y.jsx)(a.A,{onClick:()=>{const e=["\u2116","Mahsulot kodi","Mahsulot nomi","Soni","Olish narxi USD","Olish narxi UZS","Olish narxi jami USD","Olish narxi jami UZS","Sotish narxi USD","Sotish narxi UZS","Sotish narxi jami UZS","Sotish narxi jami USD"];S((0,m.cA)()).then((t=>{let{error:i,payload:l}=t;if(!i)if((null===l||void 0===l?void 0:l.length)>0){const t=(0,v.map)(l,((e,t)=>{var i,l,a,r,n,o,s,c,d,u,m;return{nth:t+1,code:(null===e||void 0===e||null===(i=e.productdata)||void 0===i?void 0:i.code)||"",name:(null===e||void 0===e||null===(l=e.productdata)||void 0===l?void 0:l.name)||"",total:e.total+(null===e||void 0===e||null===(a=e.unit)||void 0===a?void 0:a.name)||"",incomingprice:(null===e||void 0===e||null===(r=e.price)||void 0===r?void 0:r.incomingprice)||"",incomingpriceuzs:(null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.incomingpriceuzs)||"",incomingpricealluzs:(null===e||void 0===e||null===(o=e.price)||void 0===o?void 0:o.incomingpriceuzs)*e.total,incomingpriceallusd:(null===e||void 0===e||null===(s=e.price)||void 0===s?void 0:s.incomingprice)*e.total,sellingprice:(null===e||void 0===e||null===(c=e.price)||void 0===c?void 0:c.sellingprice)||"",sellingpriceuzs:(null===e||void 0===e||null===(d=e.price)||void 0===d?void 0:d.sellingpriceuzs)||"",sellingalluzs:(null===e||void 0===e||null===(u=e.price)||void 0===u?void 0:u.sellingpriceuzs)*e.total,sellingallusd:(null===e||void 0===e||null===(m=e.price)||void 0===m?void 0:m.sellingprice)*e.total}}));(0,h.m1)(t,"Etiketka",e)}else(0,x.lY)("Jadvalda ma'lumot mavjud emas !","warning")}))}})}),(0,y.jsx)(s.A,{filterBy:["total","category","code","name","checks","checkbox","printBtn"],filterByCode:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if(Y(t),(D.length>0||b>0)&&S((0,m.$g)()),""===i)_(C),z(P);else{const e=(0,v.filter)(C,(e=>e.productdata.code.includes(i)));_(e),z(e.length)}},filterByName:e=>{let t=e.target.value,i=t.toLowerCase().replace(/\s+/g," ").trim();if(q(t),(D.length>0||b>0)&&S((0,m.$g)()),""===i)_(C),z(P);else{const e=(0,v.filter)(C,(e=>e.productdata.name.toLowerCase().includes(i)));_(e),z(e.length)}},searchByCode:$,searchByName:Z,searchByCategory:T,filterByCategory:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if(K(t),(D.length>0||b>0)&&S((0,m.$g)()),""===i)_(C),z(P);else{const e=(0,v.filter)(C,(e=>e.category.code.includes(i)));_(e),z(e.length)}},numberOfChecks:W,filterByTotal:e=>{let{value:t}=e;O(t),L(0)},filterByCodeAndNameAndCategoryWhenPressEnter:e=>{if("Enter"===e.key){L(0);const e={filialId:t,currentPage:0,countPage:I,search:{name:Z.replace(/\s+/g," ").trim(),code:$.replace(/\s+/g," ").trim(),category:T.replace(/\s+/g,"")}};S((0,m.Yp)(e))}},clickPrintBtn:oe,setNumberOfChecks:e=>{H(e.target.value),J(D.length>0?D:B)},check:!ie,handleChangeCheck:()=>le(!ie),checkboxLabel:"Narxi"}),(0,y.jsx)("div",{className:"tableContainerPadding",children:k?(0,y.jsx)(d.A,{}):0===B.length&&0===D.length?(0,y.jsx)(u.A,{text:i("Maxsulotlar mavjud emas")}):(0,y.jsx)(n.A,{page:"productreport",data:D.length>0?D:B,currentPage:R,countPage:I,currency:E,headers:j,Sort:e=>{if(e===V.filter)switch(V.count){case 1:G({filter:e,sort:"1",count:2}),(0,h.Yc)(D.length>0?D:B,D.length>0?U:_,e,1,D.length>0?N:C);break;case 2:G({filter:e,sort:"",count:0}),(0,h.Yc)(D.length>0?D:B,D.length>0?U:_,e,"",D.length>0?N:C);break;default:G({filter:e,sort:"-1",count:1}),(0,h.Yc)(D.length>0?D:B,D.length>0?U:_,e,-1,D.length>0?N:C)}else G({filter:e,sort:"-1",count:1}),(0,h.Yc)(D.length>0?D:B,D.length>0?U:_,e,-1,D?N:C,D.length>0)},sortItem:V,placeholder:`${i("misol")} : 10`,changeHandler:(e,t)=>{const i=ee.findIndex((e=>e.product._id===t._id));-1!==i?(""!==e.target.value.trim()?ee[i].numberOfChecks=Number(e.target.value):ee.splice(i,1),te([...ee])):te([...ee,{product:t,numberOfChecks:Number(e.target.value)}])},Print:oe,printedData:ee})}),(0,y.jsx)("div",{className:"hidden",children:(0,y.jsx)(g.P,{currency:E,componentRef:ae,countOfCheques:W,productForCheques:F,printedData:ee,marketName:w,isShowPrice:ie})}),(0,y.jsx)("div",{className:"m-3 flex justify-center",children:(0!==M||0!==b)&&(0,y.jsx)(r.A,{countPage:Number(I),totalDatas:b||M,currentPage:R,setCurrentPage:L})})]},"content")}},5366:(e,t,i)=>{i.r(t),i.d(t,{default:()=>K});var l=i(5043),a=i(6166),r=i(2154),n=i(3216),o=i(5475),s=i(5784),c=i(6326),d=i(4768);var u=i(3532),m=i(1306),p=0;function g(){var e=p;return p++,e}var h=function(e){var t=e.children,i=e.initial,a=e.isPresent,r=e.onExitComplete,n=e.custom,o=e.presenceAffectsLayout,s=(0,m.M)(f),c=(0,m.M)(g),d=(0,l.useMemo)((function(){return{id:c,initial:i,isPresent:a,custom:n,onExitComplete:function(e){s.set(e,!0);var t=!0;s.forEach((function(e){e||(t=!1)})),t&&(null===r||void 0===r||r())},register:function(e){return s.set(e,!1),function(){return s.delete(e)}}}}),o?void 0:[a]);return(0,l.useMemo)((function(){s.forEach((function(e,t){return s.set(t,!1)}))}),[a]),l.useEffect((function(){!a&&!s.size&&(null===r||void 0===r||r())}),[a]),l.createElement(u.t.Provider,{value:d},t)};function f(){return new Map}var v=i(4827);function x(e){return e.key||""}var y=function(e){var t=e.children,i=e.custom,a=e.initial,r=void 0===a||a,n=e.onExitComplete,o=e.exitBeforeEnter,s=e.presenceAffectsLayout,u=void 0===s||s,m=function(){var e=(0,l.useRef)(!1),t=(0,c.zs)((0,l.useState)(0),2),i=t[0],a=t[1];return(0,d.l)((function(){return e.current=!0})),(0,l.useCallback)((function(){!e.current&&a(i+1)}),[i])}(),p=(0,l.useContext)(v.R2);(0,v.mt)(p)&&(m=p.forceUpdate);var g=(0,l.useRef)(!0),f=function(e){var t=[];return l.Children.forEach(e,(function(e){(0,l.isValidElement)(e)&&t.push(e)})),t}(t),y=(0,l.useRef)(f),j=(0,l.useRef)(new Map).current,S=(0,l.useRef)(new Set).current;if(function(e,t){e.forEach((function(e){var i=x(e);t.set(i,e)}))}(f,j),g.current)return g.current=!1,l.createElement(l.Fragment,null,f.map((function(e){return l.createElement(h,{key:x(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:u},e)})));for(var C=(0,c.fX)([],(0,c.zs)(f)),P=y.current.map(x),k=f.map(x),N=P.length,b=0;b<N;b++){var A=P[b];-1===k.indexOf(A)?S.add(A):S.delete(A)}return o&&S.size&&(C=[]),S.forEach((function(e){if(-1===k.indexOf(e)){var t=j.get(e);if(t){var a=P.indexOf(e);C.splice(a,0,l.createElement(h,{key:x(t),isPresent:!1,onExitComplete:function(){j.delete(e),S.delete(e);var t=y.current.findIndex((function(t){return t.key===e}));y.current.splice(t,1),S.size||(y.current=f,m(),n&&n())},custom:i,presenceAffectsLayout:u},t))}}})),C=C.map((function(e){var t=e.key;return S.has(t)?e:l.createElement(h,{key:x(e),isPresent:!0,presenceAffectsLayout:u},e)})),y.current=C,l.createElement(l.Fragment,null,S.size?C:C.map((function(e){return(0,l.cloneElement)(e)})))},j=i(2941),S=i(9092),C=i(9456),P=i(2039),k=i(188),N=i(1605),b=i(7424),A=i(3237),E=i(4964),w=i(3536),B=i(8054),_=i(4235),D=i(200),U=i(3734),M=i(2096),z=i(579);const I=function(e){let{id:t,currency:i}=e;const a=(0,C.wA)(),{shops:r,loading:n,total:o,totalSearched:s,searchedExchanges:c,startDate:d,endDate:u}=(0,C.d4)((e=>e.filialData)),[m,p]=(0,l.useState)(0),[g,h]=(0,l.useState)("10"),[f,v]=(0,l.useState)([]),[x,y]=(0,l.useState)(o),[j,S]=(0,l.useState)(""),[I,O]=(0,l.useState)(c);return(0,l.useEffect)((()=>{const e={currentPage:m,countPage:g,startDate:new Date(new Date(d).getFullYear(),new Date(d).getMonth(),new Date(d).getDate()).toISOString(),endDate:u,filial:t};a((0,k.aE)(e))}),[a,t,d,u,m,g]),(0,l.useEffect)((()=>{v(r)}),[a,r,d,u]),(0,l.useEffect)((()=>{O(c)}),[c]),(0,l.useEffect)((()=>{y(o)}),[o]),(0,z.jsxs)(N.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,z.jsxs)("div",{className:"pagination-supplier mainPadding",children:[(0,z.jsx)(A.A,{onClick:()=>{let e=`${(0,M.t)("Almashinilgan tovarlar")}`;const t=["\u2116",(0,M.t)("Sana"),(0,M.t)("Id"),(0,M.t)("Maxsulot turi"),(0,M.t)("Maxsulot Soni"),(0,M.t)("Jami olish summasi"),(0,M.t)("Jami sotish summasi")];if((null===f||void 0===f?void 0:f.length)>0){const l=(0,w.map)(f,((e,t)=>({nth:t+1,date:new Date(null===e||void 0===e?void 0:e.createdAt).toLocaleDateString()||"",product_id:(null===e||void 0===e?void 0:e._id)||"",product_type:(null===e||void 0===e?void 0:e.products.length)||"",product_number:(null===e||void 0===e?void 0:e.pieces)||"",all_get_product:"UZS"===i?(Math.round(1*e.totalincomingpriceuzs)/1).toLocaleString("ru-RU"):(Math.round(1e3*e.totalincomingprice)/1e3).toLocaleString("ru-RU"),all_sell_product:"UZS"===i?(Math.round(1*(null===e||void 0===e?void 0:e.totalsellingpriceuzs))/1).toLocaleString("ru-RU"):(Math.round(1e3*(null===e||void 0===e?void 0:e.totalsellingprice))/1e3).toLocaleString("ru-RU")})));(0,D.m1)(l,e,t)}else(0,U.lY)("Jadvalda ma'lumot mavjud emas !","warning")}}),(0,z.jsxs)("p",{className:"supplier-title",children:["`$",(0,M.t)("Almashinilgan tovarlar"),"`"]}),(0,z.jsx)("div",{children:(0!==x||0!==s)&&(0,z.jsx)(E.A,{countPage:Number(g),totalDatas:s||x,setCurrentPage:p,currentPage:m})})]}),(0,z.jsx)(b.A,{filterBy:["total","id","startDate","endDate"],filterByTotal:e=>{let{value:t}=e;h(t),p(0)},searchById:j,filterById:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if(S(t),(I.length>0||s>0)&&a((0,k.vg)()),""===i)v(r),y(o);else{const e=(0,w.filter)(r,(e=>e._id.includes(i)));v(e),y(e.length)}},filterByIdWhenPressEnter:e=>{if("Enter"===e.key){const e={currentPage:m,countPage:g,search:{name:j.replace(/\s+/g," ").trim()}};a((0,k.OE)(e))}},startDate:new Date(d),endDate:new Date(u),setStartDate:e=>{a((0,k.vU)({start:e.toISOString()}))},setEndDate:e=>{a((0,k.Cj)({end:e.toISOString()}))}}),(0,z.jsx)("div",{className:"pl-[2.5rem] pr-[1.25rem] pb-[1.25rem]",children:n?(0,z.jsx)(_.A,{}):0===f.length?(0,z.jsx)(B.A,{text:`${(0,M.t)("Tovarlar mavjud emas")}`}):(0,z.jsx)(P.A,{data:f,page:"filialShop",currentPage:m,countPage:g,headers:[{styles:"w-[10%] text-start",title:"\u2116"},{styles:"w-[10%] text-start",filter:"createdAt",title:"Sana"},{styles:"w-[10%] text-start",filter:"id",title:"ID"},{styles:"text-start",title:"Maxsulot turi"},{styles:"text-start",title:"Maxsulot soni"},{styles:"text-start",title:"Qabul qilish"},{styles:"text-start",title:"Sotish"},{styles:"w-[10%]",title:" "}],currency:i})})]},"content")};var O=i(6242),R=i(3978),L=i(3141),$=i(6521);const Y=e=>{let{id:t}=e;const{t:i}=(0,S.B)(["common"]),a=[{title:i("\u2116")},{title:i("Kategoriyasi"),filter:"category.code"},{title:i("Maxsulot kodi"),filter:"productdata.code"},{title:i("Maxsulot nomi"),filter:"productdata.name"},{title:i("Soni(dona)"),filter:"product.total"},{title:i("Olish"),filter:"price.incomingprice"},{title:i("Olish jami")},{title:i("Sotish"),filter:"price.sellingprice"},{title:i("Sotish jami")},{title:i("Cheklar soni")},{title:""}],r=(0,C.wA)(),{products:n,total:o,loading:s,searchedProducts:c,totalSearched:d,loadingExcel:u}=(0,C.d4)((e=>e.products)),{currencyType:m}=(0,C.d4)((e=>e.currency)),{market:{name:p}}=(0,C.d4)((e=>e.login)),[g,h]=(0,l.useState)(n),[f,v]=(0,l.useState)(c),[x,y]=(0,l.useState)(o),[j,k]=(0,l.useState)("10"),[M,I]=(0,l.useState)(0),[O,Y]=(0,l.useState)(""),[Z,q]=(0,l.useState)(""),[T,K]=(0,l.useState)(""),[F,J]=(0,l.useState)(null),[W,H]=(0,l.useState)(""),[V,G]=(0,l.useState)({filter:"",sort:"",count:0}),[Q,X]=(0,l.useState)(!1),[ee,te]=(0,l.useState)([]),ie=(0,l.useRef)(),le=(0,l.useRef)(),ae=(0,L.useReactToPrint)({content:()=>ie.current,onBeforeGetContent:()=>(X(!0),new Promise((e=>{le.current=e,setTimeout((()=>{X(!1),e()}),2e3)})))}),re=async(e,t)=>{t&&te([...(0,w.filter)(ee,(t=>t.product._id===e._id))]),await ae()};return(0,l.useEffect)((()=>{const e={filial:t,currentPage:M,countPage:j,search:{name:Z.replace(/\s+/g," ").trim(),code:O.replace(/\s+/g," ").trim(),category:T.replace(/\s+/g,"")}};r((0,R.gV)(e))}),[M,j,r]),(0,l.useEffect)((()=>{h(n)}),[n]),(0,l.useEffect)((()=>{y(o)}),[o]),(0,l.useEffect)((()=>{v(c)}),[c]),(0,l.useEffect)((()=>{Q&&"function"===typeof le.current&&le.current()}),[le.current,Q]),(0,l.useEffect)((()=>{Q||(te([]),H(""),J(null))}),[Q]),(0,z.jsxs)(N.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[u||Q&&(0,z.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,z.jsx)(_.A,{})}),(0,z.jsxs)("div",{className:"pagination mainPadding",children:[(0,z.jsx)(A.A,{onClick:()=>{const e=["\u2116","Mahsulot kodi","Mahsulot nomi","Soni","Olish narxi USD","Olish narxi UZS","Olish narxi jami USD","Olish narxi jami UZS","Sotish narxi USD","Sotish narxi UZS","Sotish narxi jami UZS","Sotish narxi jami USD"];r((0,R.cA)()).then((t=>{let{error:i,payload:l}=t;if(!i)if((null===l||void 0===l?void 0:l.length)>0){const t=(0,w.map)(l,((e,t)=>{var i,l,a,r,n,o,s,c,d,u,m;return{nth:t+1,code:(null===e||void 0===e||null===(i=e.productdata)||void 0===i?void 0:i.code)||"",name:(null===e||void 0===e||null===(l=e.productdata)||void 0===l?void 0:l.name)||"",total:e.total+(null===e||void 0===e||null===(a=e.unit)||void 0===a?void 0:a.name)||"",incomingprice:(null===e||void 0===e||null===(r=e.price)||void 0===r?void 0:r.incomingprice)||"",incomingpriceuzs:(null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.incomingpriceuzs)||"",incomingpricealluzs:(null===e||void 0===e||null===(o=e.price)||void 0===o?void 0:o.incomingpriceuzs)*e.total,incomingpriceallusd:(null===e||void 0===e||null===(s=e.price)||void 0===s?void 0:s.incomingprice)*e.total,sellingprice:(null===e||void 0===e||null===(c=e.price)||void 0===c?void 0:c.sellingprice)||"",sellingpriceuzs:(null===e||void 0===e||null===(d=e.price)||void 0===d?void 0:d.sellingpriceuzs)||"",sellingalluzs:(null===e||void 0===e||null===(u=e.price)||void 0===u?void 0:u.sellingpriceuzs)*e.total,sellingallusd:(null===e||void 0===e||null===(m=e.price)||void 0===m?void 0:m.sellingprice)*e.total}}));(0,D.m1)(t,"Etiketka",e)}else(0,U.lY)("Jadvalda ma'lumot mavjud emas !","warning")}))}}),(0,z.jsx)("p",{className:"product_name",children:i("Etiketka")}),(0!==x||0!==d)&&(0,z.jsx)(E.A,{countPage:Number(j),totalDatas:d||x,currentPage:M,setCurrentPage:I})]}),(0,z.jsx)(b.A,{filterBy:["total","category","code","name","checks","printBtn"],filterByCode:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if(Y(t),(f.length>0||d>0)&&r((0,R.$g)()),""===i)h(n),y(o);else{const e=(0,w.filter)(n,(e=>e.productdata.code.includes(i)));h(e),y(e.length)}},filterByName:e=>{let t=e.target.value,i=t.toLowerCase().replace(/\s+/g," ").trim();if(q(t),(f.length>0||d>0)&&r((0,R.$g)()),""===i)h(n),y(o);else{const e=(0,w.filter)(n,(e=>e.productdata.name.toLowerCase().includes(i)));h(e),y(e.length)}},searchByCode:O,searchByName:Z,searchByCategory:T,filterByCategory:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if(K(t),(f.length>0||d>0)&&r((0,R.$g)()),""===i)h(n),y(o);else{const e=(0,w.filter)(n,(e=>e.category.code.includes(i)));h(e),y(e.length)}},numberOfChecks:W,filterByTotal:e=>{let{value:t}=e;k(t),I(0)},filterByCodeAndNameAndCategoryWhenPressEnter:e=>{if("Enter"===e.key){I(0);const e={filialId:t,currentPage:0,countPage:j,search:{name:Z.replace(/\s+/g," ").trim(),code:O.replace(/\s+/g," ").trim(),category:T.replace(/\s+/g,"")}};r((0,R.Yp)(e))}},clickPrintBtn:re,setNumberOfChecks:e=>{H(e.target.value),J(f.length>0?f:g)}}),(0,z.jsx)("div",{className:"tableContainerPadding",children:s?(0,z.jsx)(_.A,{}):0===g.length&&0===f.length?(0,z.jsx)(B.A,{text:i("Maxsulotlar mavjud emas")}):(0,z.jsx)(P.A,{page:"labelsincome",data:f.length>0?f:g,currentPage:M,countPage:j,currency:m,headers:a,Sort:e=>{if(e===V.filter)switch(V.count){case 1:G({filter:e,sort:"1",count:2}),(0,D.Yc)(f.length>0?f:g,f.length>0?v:h,e,1,f.length>0?c:n);break;case 2:G({filter:e,sort:"",count:0}),(0,D.Yc)(f.length>0?f:g,f.length>0?v:h,e,"",f.length>0?c:n);break;default:G({filter:e,sort:"-1",count:1}),(0,D.Yc)(f.length>0?f:g,f.length>0?v:h,e,-1,f.length>0?c:n)}else G({filter:e,sort:"-1",count:1}),(0,D.Yc)(f.length>0?f:g,f.length>0?v:h,e,-1,f?c:n,f.length>0)},sortItem:V,placeholder:`${i("misol")} : 10`,changeHandler:(e,t)=>{const i=ee.findIndex((e=>e.product._id===t._id));-1!==i?(""!==e.target.value.trim()?ee[i].numberOfChecks=Number(e.target.value):ee.splice(i,1),te([...ee])):te([...ee,{product:t,numberOfChecks:Number(e.target.value)}])},Print:re,printedData:ee})}),(0,z.jsx)("div",{className:"hidden",children:(0,z.jsx)($.P,{currency:m,componentRef:ie,countOfCheques:W,productForCheques:F,printedData:ee,marketName:p})})]},"content")},Z=e=>{let{active:t,value:i}=e;const{currencyType:c}=(0,C.d4)((e=>e.currency)),{tablename:d,_id:u}=(0,n.g)(),m=(0,n.zy)(),[p,g]=(0,l.useState)(!0),[h,f]=(0,l.useState)(!0),[v,x]=(0,l.useState)(!0),[P,k]=(0,l.useState)(u),[N,b]=(0,l.useState)(),{t:A}=(0,S.B)(["common"]);return(0,l.useEffect)((()=>{u&&k(u)}),[u]),(0,z.jsxs)("section",{children:[(0,z.jsxs)("div",{className:"shops_card flex gap-[1.25rem] "+(t?"active_shop":""),children:[(0,z.jsx)(r.A,{border:!0,director:i.director}),(0,z.jsxs)("div",{className:"product-cost",children:[(0,z.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,z.jsx)("p",{className:"product",children:A("Kategoriyalar")}),(0,z.jsx)("p",{className:"product-number",children:i.typecount})]}),(0,z.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,z.jsx)("p",{className:"product",children:A("Maxsulotlar turi")}),(0,z.jsx)("p",{className:"product-number",children:i.productcount})]}),(0,z.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,z.jsx)("p",{className:"product",children:A("Jami")}),(0,z.jsxs)("p",{className:"product-total",children:["UZS"===c?i.totalPrice.toLocaleString("ru-Ru"):i.totalPriceUSD.toLocaleString("ru-Ru")," ",c]})]})]}),(0,z.jsxs)("div",{className:"shop-name flex flex-col w-[13.4375rem]",children:[(0,z.jsx)("div",{className:"shop-title",children:(0,z.jsx)("p",{children:A(i.shopname)})}),(0,z.jsxs)("div",{className:"filial-btn",children:[(0,z.jsx)(o.N_,{to:""+(p?`/dukonlar/filiallar/report/${i._id}`:"/dukonlar/filiallar"),onClick:()=>{return e&&e.preventDefault(),g(!p),f(!0),void x(!0);var e},children:(0,z.jsx)(a.A,{type:"product",active:u===i._id&&"report"===d})}),(0,z.jsx)(o.N_,{to:(h?`/dukonlar/filiallar/sales/${i._id}`:"/dukonlar/filiallar")+" ",onClick:()=>{return e&&e.preventDefault(),f(!h),g(!0),void x(!0);var e},children:(0,z.jsx)(a.A,{type:"selling",active:u===i._id&&"sales"===d})}),(0,z.jsx)(o.N_,{to:""+(v?`/dukonlar/filiallar/payment/${i._id}`:"/dukonlar/filiallar"),onClick:()=>{return e&&e.preventDefault(),x(!v),g(!0),void f(!0);var e},children:(0,z.jsx)(a.A,{type:"payments",active:u===i._id&&"payment"===d||u===i._id&&m.pathname===`/dukonlar/filiallar/payment/${u}/exchangesId`})}),(0,z.jsx)(o.N_,{to:""+(N?`/dukonlar/filiallar/income/${i._id}`:"/dukonlar/filiallar"),onClick:()=>{return e&&e.preventDefault(),b(!N),g(!0),void f(!0);var e},children:(0,z.jsx)(a.A,{type:"income",active:u===i._id&&"income"===d||u===i._id&&m.pathname===`/dukonlar/filiallar/income/${u}`})})]})]})]}),(0,z.jsx)(y,{children:(0,z.jsxs)(n.BV,{location:m,children:[(0,z.jsx)(n.qh,{path:"/:tablename/:_id",element:u===i._id?"report"===d?(0,z.jsx)(s.default,{id:u}):"income"===d?(0,z.jsx)(Y,{id:u}):"sales"===d?(0,z.jsx)(j.default,{id:u}):(0,z.jsx)(I,{id:i._id,currency:c}):""}),(0,z.jsx)(n.qh,{path:"/:tablename/:_id/exchangesId",element:P===i._id?(0,z.jsx)(O.default,{currency:c}):""})]},m.pathname)})]})};var q=i(2662),T=i(1576);const K=function(){const{market:e}=(0,C.d4)((e=>e.login)),t=(0,C.wA)(),[i,a]=(0,l.useState)([]),[r,n]=(0,l.useState)(!0);return(0,l.useEffect)((()=>{e&&q.A.emit("getAllFilials",{market:e._id}),e&&q.A.on("getAllFilials",(i=>{let{id:l,filials:r}=i;l===e._id&&(n(!1),t((0,T.Bo)(r)),a((0,w.map)(r,(e=>{var t,i,l,a,r;return{director:{firstname:(null===e||void 0===e||null===(t=e.director)||void 0===t?void 0:t.firstname)||"",lastname:(null===e||void 0===e||null===(i=e.director)||void 0===i?void 0:i.lastname)||"",image:(null===e||void 0===e||null===(l=e.director)||void 0===l?void 0:l.image)||""},typecount:(null===e||void 0===e?void 0:e.productCategory)||0,productcount:(null===e||void 0===e?void 0:e.productCount)||0,totalPrice:(null===e||void 0===e||null===(a=e.products)||void 0===a?void 0:a.totalPriceuzs)||0,totalPriceUSD:(null===e||void 0===e||null===(r=e.products)||void 0===r?void 0:r.totalPrice)||0,shopname:(null===e||void 0===e?void 0:e.name)||"",_id:(null===e||void 0===e?void 0:e._id)||""}}))))})),e&&q.A.on("error",(t=>{let{id:i,err:l}=t;i===e._id&&(0,U.lY)(l.message,"error")}))}),[e,t]),(0,z.jsxs)(N.P.section,{className:"mainPadding",initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[r&&(0,z.jsx)("div",{className:"fixed backdrop-blur-[2px] left-0 right-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,z.jsx)(_.A,{})}),i.length>0&&(0,w.map)(i,(e=>(0,z.jsx)("div",{className:"pb-[1.25rem]",children:(0,z.jsx)(Z,{value:e})},(0,w.uniqueId)("filial"))))]},"content")}},6242:(e,t,i)=>{i.r(t),i.d(t,{default:()=>j});var l=i(5043),a=i(2039),r=i(9456),n=i(7830),o=i(1605),s=i(7424),c=i(3237),d=i(4964),u=i(3536),m=i(8054),p=i(4235),g=i(3216),h=i(200),f=i(3734),v=i(221),x=i(2096),y=i(579);const j=function(e){var t;let{currency:i}=e;const j=(0,g.Zp)(),S=(0,g.zy)(),C=null===S||void 0===S||null===(t=S.state)||void 0===t?void 0:t.id,P=(0,r.wA)(),{idProducts:k,loading:N,total:b,totalSearched:A,searchedExchanges:E}=(0,r.d4)((e=>e.exchangesIdData)),[w,B]=(0,l.useState)(E),[_,D]=(0,l.useState)(0),[U,M]=(0,l.useState)("10"),[z,I]=(0,l.useState)([]),[O,R]=(0,l.useState)(b),[L,$]=(0,l.useState)(""),[Y,Z]=(0,l.useState)(""),[q,T]=(0,l.useState)("");return(0,l.useEffect)((()=>{const e={currentPage:0,countPage:U,transfer:C};P((0,n.xy)(e))}),[P,C,_,U]),(0,l.useEffect)((()=>{I(k)}),[k]),(0,l.useEffect)((()=>{B(E)}),[E]),(0,l.useEffect)((()=>{R(b)}),[b]),(0,y.jsxs)(o.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,y.jsxs)("div",{className:"pagination-supplier mainPadding",children:[(0,y.jsxs)("div",{className:"flex gap-[1rem] items-center",children:[(0,y.jsx)("span",{className:"linktoback",onClick:()=>j(-1),children:(0,y.jsx)(v.feN,{})}),(0,y.jsx)(c.A,{onClick:()=>{const e=["\u2116","Kategoriyasi","Kodi","Maxsulot Nomi","Maxsulot Soni","Kelgan Narxi UZS","Jami Summasi UZS"];if((null===z||void 0===z?void 0:z.length)>0){const t=(0,u.map)(z,((e,t)=>{var l,a,r,n,o,s,c,d,u;return{nth:t+1,Category_code:(null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.code)||"",Product_code:(null===e||void 0===e||null===(a=e.productdata)||void 0===a?void 0:a.code)||"",Product_name:(null===e||void 0===e||null===(r=e.productdata)||void 0===r?void 0:r.name)||"",Product_number:(null===e||void 0===e?void 0:e.pieces)||"",incomingprice:"UZS"===i?(Math.round(1*(null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.incomingpriceuzs))/1).toLocaleString("ru-RU"):(Math.round(1e3*(null===e||void 0===e||null===(o=e.price)||void 0===o?void 0:o.incomingprice))/1e3).toLocaleString("ru-RU"),allIncomingPrice:"UZS"===i?Math.round((null===e||void 0===e||null===(s=e.price)||void 0===s?void 0:s.incomingpriceuzs)+(null===e||void 0===e||null===(c=e.price)||void 0===c?void 0:c.sellingpriceuzs)).toLocaleString("ru-RU"):Math.round((null===e||void 0===e||null===(d=e.price)||void 0===d?void 0:d.incomingprice)+(null===e||void 0===e||null===(u=e.price)||void 0===u?void 0:u.sellingprice)).toLocaleString("ru-RU")}}));(0,h.m1)(t,"Barcha almashinilgan maxsulotlar",e)}else(0,f.lY)("Jadvalda ma'lumot mavjud emas !","warning")}})]}),(0,y.jsx)("p",{className:"supplier-title",children:"Barcha tovarlar ro'yxati"}),(0,y.jsx)("div",{children:(0!==O||0!==A)&&(0,y.jsx)(d.A,{countPage:Number(U),totalDatas:A||O,setCurrentPage:D,currentPage:_})})]}),(0,y.jsx)(s.A,{filterBy:["total","category","code","name"],filterByTotal:e=>{let{value:t}=e;M(t),D(0)},searchByCategory:L,filterByCategory:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if($(t),(w.length>0||A>0)&&P((0,n.vg)()),""===i)I(k),R(b);else{const e=(0,u.filter)(k,(e=>{var t;return null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.code.includes(i)}));I(e),R(e.length)}},searchByCode:Y,filterByCode:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if(Z(t),(w.length>0||A>0)&&P((0,n.vg)()),""===i)I(k),R(b);else{const e=(0,u.filter)(k,(e=>{var t;return null===e||void 0===e||null===(t=e.productdata)||void 0===t?void 0:t.code.includes(i)}));I(e),R(e.length)}},searchByName:q,filterByName:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if(T(t),(w.length>0||A>0)&&P((0,n.vg)()),""===i)I(k),R(b);else{const e=(0,u.filter)(k,(e=>{var t;return null===e||void 0===e||null===(t=e.productdata)||void 0===t?void 0:t.name.toLowerCase().includes(i)}));I(e),R(e.length)}},filterByCodeAndNameAndCategoryWhenPressEnter:e=>{if("Enter"===e.key){D(0);const e={currentPage:_,countPage:U,search:{codeofproduct:Y.replace(/\s+/g," ").trim(),nameofproduct:q.replace(/\s+/g," ").trim(),categoryofproduct:L.replace(/\s+/g," ").trim()}};P((0,n.pg)(e))}}}),(0,y.jsx)("div",{className:"pl-[2.5rem] pr-[1.25rem] pb-[1.25rem]",children:N?(0,y.jsx)(p.A,{}):0===z.length?(0,y.jsx)(m.A,{text:`${(0,x.t)("Tovarlar mavjud emas")}`}):(0,y.jsx)(a.A,{data:z,page:"filialShopDataId",currentPage:_,countPage:U,headers:[{styles:"w-[10%] text-start",title:"\u2116"},{styles:"w-[10%] text-start",filter:"category.code",title:"Kategoriyasi"},{styles:"w-[10%] text-start",filter:"productdata.code",title:"Kodi"},{styles:"text-start",title:"Maxsulot nomi"},{styles:"text-start",filter:"pieces",title:"Maxsulot soni"},{styles:"text-start",title:"Kelgan narxi"},{styles:"text-start",title:"Jami summasi"}],currency:i})})]},"content")}}}]);
//# sourceMappingURL=8236.5805f434.chunk.js.map