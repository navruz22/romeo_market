"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1181,1233],{1204:(e,t,a)=>{a.d(t,{A:()=>r});a(5043);var s=a(5475),n=a(221),l=a(579);const r=e=>{let{link:t}=e;return(0,l.jsx)(s.N_,{to:t,className:"lg:mt-[10px] lg:ms-[20px] mt-[50px] ms-[30px] linktoback",children:(0,l.jsx)(n.feN,{className:"mt-[]"})})}},6270:(e,t,a)=>{a.d(t,{A:()=>N});var s=a(221),n=(a(5043),a(579));const l=e=>{let{onClick:t,text:a,type:l,active:r}=e;const o={cash:(0,n.jsx)(s.iS_,{className:"paymentsstyle",size:"1.3125rem"}),card:(0,n.jsx)(s.dBf,{className:"paymentsstyle",size:"1.3125rem"}),transfer:(0,n.jsx)(s.whc,{className:"paymentsstyle",size:"1.3125rem"}),mixed:(0,n.jsx)(s.m_O,{className:"paymentsstyle",size:"1.3125rem"})};return(0,n.jsxs)("button",{onClick:()=>t(l),className:"salestyle "+(r?"bg-primary-700 text-white-900":"bg-[#E9ECEB]"),children:[o[l],a]})},r=e=>{let{onClick:t,text:a}=e;return(0,n.jsxs)("button",{onClick:t,className:"discountstyle w-full h-[3.25rem] bg-warning-500 text-white-900 duration-200 shadow-lg",children:[(0,n.jsx)(s.YbJ,{className:"discstyle",size:"1.5rem"}),a]})},o=e=>{let{onClick:t,text:a,onDoubleClick:l}=e;return(0,n.jsxs)("button",{onClick:t,onDoubleClick:l,className:"paymentstyle grow",children:[(0,n.jsx)(s.SXw,{className:"paystyle",size:"1.3125rem"}),a]})};var i=a(9456),c=a(1318),u=a(2234);const m=e=>(0,n.jsx)(u.c.DropdownIndicator,{...e,children:(0,n.jsx)(s.QDT,{size:"0.625rem"})}),d={control:e=>({...e,borderTopRightRadius:".125rem",borderBottomRightRadius:".125rem",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",fontSize:"0.75rem",fontWeight:"400",padding:"0.375rem 0.3125rem",color:"#071F45",outline:"none",border:"none",boxShadow:"none",cursor:"pointer",height:"100%",backgroundColor:"#F79009",minHeight:"100%","&:hover":{backgroundColor:"#DC6803"}}),container:e=>({...e,height:"100%",position:"absolute",right:0,width:"3rem",top:0,bottom:0}),option:(e,t)=>{let{isFocused:a,isSelected:s}=t;return{...e,fontSize:".75rem",fontWeight:"400",color:s||a?"#ffffff":"#071F45",backgroundColor:s?"#0090A3":a?"#00B4CC":"#ffffff",transition:"all 0.2s ease",overflow:"hidden",cursor:"pointer",textAlign:"center"}},menu:e=>({...e,overflow:"hidden"}),singleValue:e=>({...e,fontSize:".75rem",fontWeight:"400",color:"#ffffff",margin:0,textAlign:"center"}),valueContainer:e=>({...e,padding:0}),indicatorsContainer:e=>({...e}),dropdownIndicator:e=>({...e,padding:0,color:"#ffffff"})};var h=a(2096);const b=function(e){let{value:t,onChange:a,option:s,onSelect:l}=e;const{currencyType:r}=(0,i.d4)((e=>e.currency)),o=[{value:r,label:r},{value:"%",label:"%"}];return(0,n.jsxs)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:[(0,n.jsx)("input",{className:"w-[8.6875rem] placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-l-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:`${(0,h.t)("misol")}: 100 000 000`,type:"number",value:t,onChange:e=>{a(e.target.value)},onWheel:e=>e.target.blur(),min:0}),(0,n.jsx)(c.Ay,{onChange:l,styles:d,isSearchable:!1,value:s,options:o,components:{IndicatorSeparator:()=>null,DropdownIndicator:m}})]})},x=e=>{let{value:t,onChange:a,option:s,onSelect:l}=e;return(0,n.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,n.jsxs)("div",{className:"text-black-700 text-[0.875rem]",children:[(0,h.t)("Chegirma")," :"]}),(0,n.jsx)(b,{onChange:a,onSelect:l,value:t,option:s})]})};var p=a(6899);const g=e=>{let{onClick:t}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("button",{onClick:t,className:"exitbtn",children:(0,n.jsx)(s.FyX,{size:"0.75rem"})})})};const y=function(e){let{mix:t,value:a,onChange:s,label:l,onClose:r,keyInput:o,placeholder:i,type:c}=e;return(0,n.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,n.jsxs)("span",{className:"custom-payment-text-style",children:[l," :"]}),(0,n.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,n.jsx)(p.A,{placeholder:i||`${(0,h.t)("misol")}: 100 000 000`,type:c||"number",value:a,onChange:e=>{s(e.target.value,o)}}),t&&(0,n.jsx)(g,{onClick:()=>r(o)})]})]})};var f=a(3216);const N=function(e){let{returned:t,active:a,togglePaymentModal:c,type:u="cash",cash:m="",card:d="",transfer:b="",discount:p,hasDiscount:g,debt:N,allPayment:C,paid:j=0,client:v="",onChange:k,onClose:S,changePaymentType:w,discountSelectOption:D,handleClickDiscountBtn:z,handleChangeDiscountSelectOption:P,handleChangeDiscount:I,handleClickPay:A,saleComment:T,changeComment:O,onDoubleClick:q,clickdelay:M}=e;const Q=(0,f.zy)(),B=()=>{switch(u){case"card":return(0,n.jsx)(y,{value:d,keyInput:u,onChange:k,onClose:S,label:(0,h.t)("Plastik")},"sale-card1");case"transfer":return(0,n.jsx)(y,{value:b,keyInput:u,onChange:k,onClose:S,label:(0,h.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,h.t)("Naqd"),key:"cash",value:m},{label:(0,h.t)("Plastik"),key:"card",value:d},{label:(0,h.t)("O`tkazma"),key:"transfer",value:b}].map((e=>(0,n.jsx)(y,{value:e.value,keyInput:e.key,onChange:k,onClose:S,label:(0,h.t)(e.label)},`sale-${e.key}`)));default:return(0,n.jsx)(y,{value:m,onChange:k,keyInput:u,onClose:S,label:(0,h.t)("Naqd")},"sale-cash")}},{currencyType:F}=(0,i.d4)((e=>e.currency));return(0,n.jsxs)("section",{className:"fixed transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 "+(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:c,children:[(0,n.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,h.t)("")}),(0,n.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 "+(a?"translate-x-0":"translate-x-full"),onClick:e=>e.stopPropagation(),autoFocus:!0,children:[(0,n.jsxs)("div",{className:"top-payment w-full",children:[v&&(0,n.jsxs)("div",{className:"customer-head-icon",children:[(0,n.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,n.jsx)(s.uSr,{className:"mr-[0.75rem]"}),(0,n.jsxs)("span",{children:[(0,h.t)("Mijoz")," : "]})]}),(0,n.jsx)("h3",{className:"text-[0.875rem]",children:v})]}),(0,n.jsxs)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:[C.toLocaleString("ru-Ru")," ",F]}),(0,n.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&B(),(Q.pathname.includes("/kassa/debts")||Q.pathname.includes("/qarzdorlar")||Q.pathname.includes("/maxsulotlar/qabul/qabulqilish")||Q.pathname.includes("/maxsulotlar/qabul/qabullar"))&&B(),(0,n.jsx)(y,{value:T,keyInput:u,onChange:O,onClose:S,label:(0,h.t)("Izoh"),placeholder:(0,h.t)("misol: qarzga olindi"),type:"text"},"sale-card"),g&&(0,n.jsx)(x,{value:p,onChange:I,option:D,onSelect:P}),(0,n.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,n.jsxs)("span",{className:"custom-payment-text-style",children:[(0,h.t)("Qarzlar")," :"," "]}),(0,n.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[N.toLocaleString("ru-Ru")," ",F]})]}),(0,n.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,n.jsxs)("span",{className:"custom-payment-text-style",children:[C<0?(0,h.t)("Qaytarilayotgan"):(0,h.t)("To`lanayotgan")," ",":"," "]}),(0,n.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[j.toLocaleString("ru-Ru")," ",F]})]})]})]}),(0,n.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,n.jsxs)("div",{className:"custom-paymet-btn",children:[(0,n.jsx)(l,{text:(0,h.t)("Naqd"),type:"cash",active:"cash"===u,onClick:w}),(0,n.jsx)(l,{text:(0,h.t)("Plastik"),type:"card",active:"card"===u,onClick:w}),(0,n.jsx)(l,{text:(0,h.t)("O'tkazma"),type:"transfer",active:"transfer"===u,onClick:w}),!t&&(0,n.jsx)(l,{text:(0,h.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:w}),Q.pathname.includes("/kassa/debts")&&(0,n.jsx)(l,{text:(0,h.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:w})]}),!t&&(0,n.jsx)(r,{text:(0,h.t)("Chegirma"),onClick:z}),(0,n.jsx)(o,{text:(0,h.t)("To'lash"),onClick:M?()=>console.log("wait"):A})]})]})]})}},7341:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(5043),n=a(9456),l=a(3216),r=a(200),o=a(1204),i=a(5618),c=a(4964),u=a(6270),m=a(7424),d=a(2039),h=a(3734),b=a(7919),x=a(486),p=a(2096),g=a(579);const y=()=>{const{id:e}=(0,l.g)(),t=(0,n.wA)(),{user:a}=(0,n.d4)((e=>e.login)),{currencyType:y,currency:f}=(0,n.d4)((e=>e.currency)),{incomingconnectors:N,connectorscount:C}=(0,n.d4)((e=>e.suppliers)),[j,v]=(0,s.useState)([]),[k,S]=(0,s.useState)(0),[w,D]=(0,s.useState)(10),[z,P]=(0,s.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString()),[I,A]=(0,s.useState)(new Date((new Date).setHours(23,59,59,0)).toISOString()),[T,O]=(0,s.useState)(!1),[q,M]=(0,s.useState)("cash"),[Q,B]=(0,s.useState)(""),[F,R]=(0,s.useState)(""),[U,E]=(0,s.useState)(""),[L,_]=(0,s.useState)(""),[W,H]=(0,s.useState)(""),[$,V]=(0,s.useState)(""),[X,Y]=(0,s.useState)(0),[J,G]=(0,s.useState)(0),[K,Z]=(0,s.useState)(0),[ee,te]=(0,s.useState)(0),[ae,se]=(0,s.useState)(0),[ne,le]=(0,s.useState)(0),[re,oe]=(0,s.useState)("approve"),[ie,ce]=(0,s.useState)(!1),[ue,me]=(0,s.useState)(f),[de,he]=(0,s.useState)(""),[be,xe]=(0,s.useState)("");let pe=null;const ge=e=>Math.round(1e3*e)/1e3,ye=e=>Math.round(e),fe=e=>{O(e?!T:e),M("cash"),Y(0),G(0)},Ne=(e,t)=>{const a=Math.abs(K),s=Math.abs(ee);if("USD"===y)if("cash"===t){const t=Number(e)+Number(U)+Number(W),n=Number((0,r.IQ)(e,ue))+Number(L)+Number($);t<=a?(B(e),R((0,r.IQ)(e,ue)),Y(ge(a-t)),G(ye(s-n)),se(t),le(n)):(0,h.OC)()}else if("card"===t){const t=Number(e)+Number(Q)+Number(W),n=Number(F)+Number((0,r.IQ)(e,ue))+Number($);t<=a?(E(e),_((0,r.IQ)(e,ue)),Y(ge(a-t)),G(ye(s-n)),se(t),le(n)):(0,h.OC)()}else{const t=Number(e)+Number(Q)+Number(U),n=Number(F)+Number(L)+Number((0,r.IQ)(e,ue));t<=a?(H(e),V((0,r.IQ)(e,ue)),Y(ge(a-t)),G(ye(s-n)),se(t),le(n)):(0,h.OC)()}else if("cash"===t){const t=Number(e)+Number(L)+Number($),n=Number((0,r.Ch)(e,ue))+Number(U)+Number(W);t<=s?(R(e),B((0,r.Ch)(e,ue)),Y(ge(a-n)),G(ye(s-t)),se(n),le(t)):(0,h.OC)()}else if("card"===t){const t=Number(e)+Number(F)+Number($),n=Number(Q)+Number((0,r.Ch)(e,ue))+Number(W);t<=s?(E((0,r.Ch)(e,ue)),_(e),Y(ge(a-n)),G(ye(s-t)),se((0,r.Ch)(t,ue)),le(t)):(0,h.OC)()}else{const t=Number(e)+Number(F)+Number(L),n=Number(Q)+Number(U)+Number((0,r.Ch)(e,ue));t<=s?(H((0,r.Ch)(e,ue)),V(e),Y(ge(a-n)),G(ye(s-t)),se(n),le(t)):(0,h.OC)()}},Ce=()=>{const s=e=>e<0&&e||-1*e,n={payment:{payment:Number(K<0?s(Q):Q)+Number(K<0?s(U):U)+Number(K<0?s(W):W),paymentuzs:Number(K<0?s(F):F)+Number(K<0?s(L):L)+Number(K<0?W<0&&s($):$),type:q,cash:Number(K<0?s(Q):Q),cashuzs:Number(ee<0?s(F):F),card:Number(K<0?s(U):U),carduzs:Number(K<0?s(L):L),transfer:Number(K<0?s(W):W),transferuzs:Number(K<0?s($):$),comment:de},user:a._id,incomingconnectorid:be};t((0,b.IH)(n)).then((a=>{let{error:s}=a;s||(t((0,x.A8)({supplierid:e,startDate:z,endDate:I,currentPage:k,countPage:w})),ce(!1),oe(""),fe())}))};(0,s.useEffect)((()=>{let a={supplierid:e,startDate:z,endDate:I,currentPage:k,countPage:w};t((0,x.A8)(a))}),[t,z,I,k,w,e]),(0,s.useEffect)((()=>{v(N)}),[N]);const je=[{title:"\u2116"},{title:(0,p.t)("Sana")},{title:(0,p.t)("Vaqti")},{title:(0,p.t)("ID")},{title:(0,p.t)("Mahsulot turi")},{title:(0,p.t)("Soni")},{title:(0,p.t)("Umumiy")},{title:(0,p.t)("To'langan")},{title:(0,p.t)("Qarz")},{title:""}];return(0,g.jsxs)("div",{className:"relative grow overflow-hidden h-full",children:[(0,g.jsx)("div",{className:"mainPadding",children:(0,g.jsx)(o.A,{link:"/hamkorlar/yetkazuvchilar"})}),(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(m.A,{filterBy:["total","startDate","endDate"],filterByTotal:e=>D(e.value),startDate:new Date(z),endDate:new Date(I),setStartDate:P,setEndDate:A}),(0,g.jsx)(c.A,{currentPage:k,setCurrentPage:S,countPage:w,totalDatas:C||1})]}),(0,g.jsx)("div",{className:"tableContainerPadding",children:j.length>0&&(0,g.jsx)(d.A,{page:"incomingsupplier",currentPage:k,countPage:w,currency:y,headers:je,data:j,Pay:e=>{const t=e.debt,a=e.debtuzs;xe(e._id),Z(t),te(a),B(t),R(a),se(t),le(a),O(!0),me(ye(a/t)),O(!0)}})}),(0,g.jsx)(u.A,{returned:!0,type:q,active:T,togglePaymentModal:fe,changePaymentType:e=>{if(q!==e)switch(M(e),e){case"cash":B(K),R(ee),E(""),_(""),H(""),V(""),se(K),le(ee),Y(0),G(0);break;case"card":E(K),_(ee),B(""),R(""),H(""),V(""),se(K),le(ee),Y(0),G(0);break;case"transfer":H(K),V(ee),B(""),R(""),E(""),_(""),se(K),le(ee),Y(0),G(0);break;default:B(""),R(""),E(""),_(""),H(""),V(""),se(0),le(0),Y(K),G(ee)}},onChange:(e,t)=>{Ne(e,t)},allPayment:"USD"===y?K:ee,card:"USD"===y?U:L,cash:"USD"===y?Q:F,debt:"USD"===y?X:J,hasDiscount:!1,transfer:"USD"===y?W:$,paid:"USD"===y?ae:ne,handleClickPay:()=>{null===pe&&(pe=window.setTimeout((()=>{pe=null,oe("complete"),ce(!0)}),300))},changeComment:e=>{he(e)},saleComment:de,onDoubleClick:()=>{window.clearTimeout(pe),pe=null,Ce()}}),(0,g.jsx)(i.A,{body:re,isOpen:ie,headerText:"To'lovni amalga oshirishni tasdiqlaysizmi ?",title:"To'lovni amalga oshirgach bu ma`lumotlarni o`zgaritirb bo`lmaydi !",approveFunction:Ce,toggleModal:()=>{ce(!ie),setTimeout((()=>{oe("")}),500)}})]})}}}]);
//# sourceMappingURL=1233.8c5e411a.chunk.js.map