"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1181,4569],{7275:(e,t,i)=>{i.d(t,{A:()=>r});i(5043);const r=i.p+"static/media/Excel.3a5a1731280185e0e4ae99ee0a4eebfc.svg"},6521:(e,t,i)=>{i.d(t,{P:()=>d});i(5043);var r=i(3979),a=i(9456),n=i(2096),s=i(579);const c=e=>{var t;let{product:i,currency:c,marketName:l,isShowPrice:o}=e;const{inputRef:d}=(0,r.E)({value:null===i||void 0===i||null===(t=i.productdata)||void 0===t?void 0:t.barcode,options:{background:"#fff",width:"2cm",height:"40cm"}});console.log(i);const{currency:u}=(0,a.d4)((e=>e.currency));return(0,s.jsx)("div",{className:"w-[40mm] break-after-page font-sans h-[65mm] times ",children:(0,s.jsxs)("div",{className:"w-[65mm] rotate-90 mt-20 -ml-0 text-xl",children:[(0,s.jsx)("div",{className:"text-center font-bold text-2xl p-[1px]",children:(0,s.jsxs)("span",{children:['"',l,'"']})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-center text-lg p-1",children:[(0,n.t)("Nomi"),":",(0,s.jsx)("br",{})," ",(0,s.jsx)("span",{className:"font-bold",children:i.productdata&&i.productdata.name})]}),o&&(0,s.jsxs)("div",{className:"text-2xl font-bold text-center p-1",children:[(0,s.jsx)("span",{children:i.price?"\u0426\u0435\u043d\u0430:":""})," ",(0,s.jsx)("span",{children:i.price&&("UZS"===c?i.price.sellingpriceuzs.toLocaleString("ru-RU"):i.price.sellingprice.toLocaleString("ru-RU"))+" "+c||""})]}),(0,s.jsx)("div",{children:(0,s.jsx)("canvas",{ref:d})}),(0,s.jsx)("div",{className:"flex justify-center p-1"}),(0,s.jsxs)("div",{className:"flex justify-between text-xl p-1",children:[(0,s.jsxs)("div",{children:[(0,n.t)("Kodi"),": ",i.category&&i.category.code," ",i.productdata&&i.productdata.code]}),(0,s.jsx)("div",{children:(new Date).toLocaleDateString()})]})]})]})})};var l=i(3536);const o=(e,t)=>{let i=[];for(let r=0;r<e;r++)i.push(t);return i},d=e=>{let{countOfCheques:t,productForCheques:i,printedData:r,componentRef:a,currency:n,marketName:d,isShowPrice:u}=e;return(0,s.jsxs)("div",{ref:a,children:[i&&t&&(0,l.map)(i,(e=>(0,l.range)(0,t).map((()=>(0,s.jsx)(c,{currency:n,product:e,marketName:d,isShowPrice:u},(0,l.uniqueId)("barCode")))))),(0,l.map)(r,(e=>(0,s.jsx)("div",{children:(0,l.map)(o(e.numberOfChecks,e.product),(e=>(0,s.jsx)(c,{currency:n,product:e,marketName:d,isShowPrice:u},(0,l.uniqueId)("barCode"))))},(0,l.uniqueId)("barCodeContainer"))))]})}},3237:(e,t,i)=>{i.d(t,{A:()=>s});i(5043);var r=i(7275),a=i(9092),n=i(579);const s=function(e){let{onClick:t}=e;const{t:i}=(0,a.B)(["common"]);return(0,n.jsxs)("button",{className:"exportButton ",onClick:t,children:[i("Eksport"),(0,n.jsx)("span",{className:"btn-icon bg-white-900 p-[8px]",children:(0,n.jsx)("img",{src:r.A,alt:"excel icon"})})]})}},4837:(e,t,i)=>{i.r(t),i.d(t,{default:()=>j});var r=i(5043),a=i(9456),n=i(200),s=i(3237),c=i(9762),l=i(5618),o=i(4964),d=i(7424),u=i(2039),p=i(3536),m=i(7919),h=i(9092),g=i(4235),f=i(3734),x=i(3141),v=i(6521),y=i(579);const j=()=>{const e=(0,a.wA)(),{t:t}=(0,h.B)(["common"]),{market:{_id:i,name:j}}=(0,a.d4)((e=>e.login)),{incomings:w,incomingscount:S,successUpdate:b,successDelete:D,loadingExcel:k}=(0,a.d4)((e=>e.incoming)),{currencyType:N,currency:C}=(0,a.d4)((e=>e.currency)),P=(0,r.useRef)(),A=(0,r.useRef)(),z=(0,x.useReactToPrint)({content:()=>P.current,onBeforeGetContent:()=>(ae(!0),new Promise((e=>{A.current=e,setTimeout((()=>{ae(!1),e()}),2e3)})))}),[E,U]=(0,r.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString()),[I,B]=(0,r.useState)(new Date((new Date).setHours(23,59,59,0)).toISOString()),[O,L]=(0,r.useState)({name:"",code:"",supplier:""}),[R,q]=(0,r.useState)({name:"",code:"",supplier:""}),[K,Y]=(0,r.useState)(0),[T,F]=(0,r.useState)(10),[M,Z]=(0,r.useState)(!1),[H,J]=(0,r.useState)({filter:"",sort:"",count:0}),[W,_]=(0,r.useState)({}),[Q,G]=(0,r.useState)({}),[V,X]=(0,r.useState)([]),[$,ee]=(0,r.useState)([]),[te,ie]=(0,r.useState)([]),[re,ae]=(0,r.useState)(!1),ne=()=>{V.some((e=>e.pieces===W.pieces&&e.unitprice===W.unitprice&&e.sellingprice===W.sellingprice))?_({}):e((0,m.AH)({market:i,startDate:E,endDate:I,product:{...W}}))},se=(e,t)=>{"beginDay"===t&&U(new Date(e).toISOString()),"endDay"===t&&B(new Date(e).toISOString())},ce=()=>{G({}),Z(!1)},le=(0,r.useCallback)((()=>{e((0,m.qQ)({market:i,beginDay:E,endDay:I,currentPage:K,countPage:T,search:O}))}),[e,i,E,I,K,T,O]);(0,r.useEffect)((()=>{(e=>{let t=(0,p.map)(e,(e=>({...e,sellingprice:e.product.price.sellingprice,sellingpriceuzs:e.product.price.sellingpriceuzs})));X(t),ee(t)})(w)}),[w]),(0,r.useEffect)((()=>{le()}),[le,E,I,K,T,O]),(0,r.useEffect)((()=>{b&&(le(),_({}),e((0,m.KC)()))}),[e,le,b]),(0,r.useEffect)((()=>{D&&(le(),_({}),e((0,m.FT)()))}),[e,le,D]);const oe=[{title:"\u2116"},{title:t("Yetkazuvchi"),filter:"supplier.name",styles:"w-[10%]"},{title:t("Kodi"),filter:"product.productdata.code",styles:"w-[7%]"},{title:t("Nomi"),filter:"product.productdata.name"},{title:t("Soni"),styles:"w-[10%]"},{title:t("Kelish"),styles:"w-[10%]"},{title:t("Jami"),styles:"w-[15%]"},{title:t("Sotish"),styles:"w-[10%]"},{title:t("Cheklar soni"),styles:"w-[10%]"},{title:"",styles:"w-[5%]"}];return(0,r.useEffect)((()=>{re&&"function"===typeof A.current&&A.current()}),[A.current,re]),(0,y.jsxs)("div",{className:"grow overflow-auto",children:[k&&(0,y.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,y.jsx)(g.A,{})}),(0,y.jsx)("div",{className:"mainPadding text-center",children:(0,y.jsx)("p",{children:t("Ro'yxat")})}),(0,y.jsxs)("div",{className:"mainPadding flex items-center justify-between",children:[(0,y.jsx)(s.A,{onClick:()=>{let i="Maxsulotlar-qabul"-(new Date).toLocaleDateString();const r=["\u2116",t("Yetkazuvchi"),t("Kodi"),t("Nomi"),t("Soni"),t("Kelish UZS"),t("Kelish USD"),t("Jami UZS"),t("Jami USD"),t("Sotish UZS"),t("Sotish USD")],a={beginDay:E,endDay:I};e((0,m.FW)(a)).then((e=>{let{error:t,payload:a}=e;if(!t)if((null===a||void 0===a?void 0:a.length)>0){const e=(0,p.map)(a,((e,t)=>{var i,r,a,n,s,c;return{nth:t+1,supplier:(null===(i=e.supplier)||void 0===i?void 0:i.name)||"",code:(null===(r=e.product)||void 0===r||null===(a=r.productdata)||void 0===a?void 0:a.code)||"",name:(null===(n=e.product)||void 0===n||null===(s=n.productdata)||void 0===s?void 0:s.name)||"",count:e.pieces+" "+(null===(c=e.unit)||void 0===c?void 0:c.name)||"",unit:(null===e||void 0===e?void 0:e.unitpriceuzs)||"",unitusd:(null===e||void 0===e?void 0:e.unitprice)||"",all:(null===e||void 0===e?void 0:e.totalpriceuzs)||"",allusd:(null===e||void 0===e?void 0:e.totalprice)||""}}));(0,n.m1)(e,i,r)}else(0,f.lY)("Jadvalda ma'lumot mavjud emas !","warning")}))}}),(0,y.jsxs)("div",{className:"flex gap-[10px]",children:[(0,y.jsx)(c.A,{label:t("dan"),value:new Date(E),onChange:e=>se(e,"beginDay"),maxWidth:"max-w-[9.6875rem]"}),(0,y.jsx)(c.A,{label:t("gacha"),value:new Date(I),onChange:e=>se(e,"endDay"),maxWidth:"max-w-[9.6875rem]"})]}),(0,y.jsx)(o.A,{currentPage:K,setCurrentPage:Y,countPage:T,totalDatas:S})]}),(0,y.jsx)("div",{children:(0,y.jsx)(d.A,{filterBy:["total","code","delivererName","name"],filterByName:e=>{let t=e.target.value.toLowerCase();X([...(0,p.filter)([...$],(e=>{let{product:i}=e;return i.productdata.name.toLowerCase().includes(t)}))]),q({...R,name:t})},filterByTotal:e=>F(e.value),filterByCode:e=>{let t=e.target.value.toLowerCase();X([...(0,p.filter)([...$],(e=>{let{product:i}=e;return i.productdata.code.includes(t)}))]),q({...R,code:t})},filterByCodeAndNameAndCategoryWhenPressEnter:e=>{"Enter"===e.key&&L(R)},filterByDelivererName:e=>{let t=e.target.value.toLowerCase();X([...(0,p.filter)([...$],(e=>e.supplier.name.toLowerCase().includes(t)))]),q({...R,supplier:t})}})}),(0,y.jsx)("div",{className:"tableContainerPadding",children:(0,y.jsx)(u.A,{page:"incomings",headers:oe,data:V,changeNumberHandler:(e,t)=>{const i=te.findIndex((e=>e.product._id===t._id));-1!==i?(""!==e.target.value.trim()?te[i].numberOfChecks=Number(e.target.value):te.splice(i,1),ie([...te])):(console.log(t),ie([...te,{product:{...t,productdata:t.product.productdata,price:t.product.price},numberOfChecks:Number(e.target.value)}]))},currentPage:K,printedData:te,countPage:T,currency:N,editedIncoming:W,Edit:e=>{_(e)},changeHandler:(e,t)=>{let i=Number(e.target.value),r={...W};const a=e=>t===e,s="USD"===N?i:(0,n.Ch)(i,C),c="UZS"===N?i:(0,n.IQ)(i,C);a("pieces")&&(r.pieces=i,r.totalprice=i*r.unitprice,r.totalpriceuzs=i*r.unitpriceuzs),a("unitprice")&&(r.unitprice=s,r.unitpriceuzs=c,r.totalprice=s*r.pieces,r.totalpriceuzs=c*r.pieces),a("sellingprice")&&(r.sellingprice=s,r.sellingpriceuzs=c),_(r)},saveEditIncoming:ne,Delete:e=>(e=>{G(e),Z(!0)})(e),Sort:e=>{if(e===H.filter)switch(H.count){case 1:J({filter:e,sort:"1",count:2}),(0,n.Yc)(V,X,e,1,$);break;case 2:J({filter:e,sort:"",count:0}),(0,n.Yc)(V,X,e,"",$);break;default:J({filter:e,sort:"-1",count:1}),(0,n.Yc)(V,X,e,-1,$)}else J({filter:e,sort:"-1",count:1}),(0,n.Yc)(V,X,e,-1,$)},onKeyUp:e=>{"Enter"===e.key&&ne()},sortItem:H,Print:z})}),(0,y.jsx)(l.A,{body:"approve",isOpen:M,headerText:t("Mahsulotni o`chirishni tasdiqlaysizmi?"),title:t("O`chirilgan mahsulotni tiklashning imkoni mavjud emas!"),approveFunction:()=>{e((0,m.om)({market:i,beginDay:E,endDay:I,product:{...Q}})),Z(!1)},closeModal:ce,toggleModal:ce}),(0,y.jsx)("div",{className:"hidden",children:(0,y.jsx)(v.P,{currency:N,componentRef:P,printedData:te,marketName:j,isShowPrice:!0})})]})}}}]);
//# sourceMappingURL=4569.072aee3d.chunk.js.map