"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1181,7410],{3052:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var l=a(5043),s=a(7630),n=a(4012),i=(a(4964),a(2039)),r=a(3297),c=a(9456),o=a(4235),u=a(8054),m=a(7424),d=a(5618),h=a(1605),p=a(3536),g=a(3734),f=a(1108),x=a(200),v=a(9092),w=a(1154),y=a(5369),j=(a(8069),a(579));const b=()=>{const{t:e}=(0,v.B)(["common"]),t=(0,c.wA)(),{packmans:a,clients:b,loading:k,searchedClients:S,total:D,totalSearched:P}=(0,c.d4)((e=>e.clients)),{user:N}=(0,c.d4)((e=>e.login)),E="Director"===N.type?[{title:"\u2116",styles:"w-[8%] text-left"},{title:e("Mijoz"),styles:"w-[41%] text-left"},{title:e("Savdo"),styles:"w-[41%] text-left"},{title:e("Sof foyda"),styles:"w-[41%] text-left"},{title:"",styles:"w-[8%] text-left"}]:[{title:"\u2116",styles:"w-[8%] text-left"},{title:e("Mijoz"),styles:"w-[41%] text-left"},{title:e("Savdo"),styles:"w-[41%] text-left"},{title:"",styles:"w-[8%] text-left"}],[C,B]=(0,l.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),[z,A]=(0,l.useState)(new Date((new Date).setHours(23,59,59,0)).toISOString()),[M,W]=(0,l.useState)([]),[_,L]=(0,l.useState)([]),[Y,q]=(0,l.useState)([]),[F,O]=(0,l.useState)(""),[T,$]=(0,l.useState)(null),[G,J]=(0,l.useState)(null),[Q,H]=(0,l.useState)(""),[I,U]=(0,l.useState)(null),[V,K]=(0,l.useState)(!1),[R,X]=(0,l.useState)(!1),[Z,ee]=(0,l.useState)("10"),[te,ae]=(0,l.useState)(0),[le,se]=(0,l.useState)(D),[ne,ie]=(0,l.useState)(""),[re,ce]=(0,l.useState)(null),[oe,ue]=(0,l.useState)(null),[me,de]=(0,l.useState)(!1),he=()=>{K(!V),setTimeout((()=>{U(null)}),500)},[pe,ge]=(0,l.useState)(window.innerWidth<=768);(0,l.useEffect)((()=>{const e=()=>{ge(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const fe=e=>{$(e.packman?{label:e.packman.name,value:e.packman._id}:""),O(e.name||""),H(e),X(!0)},xe=e=>{U(e),ue("approve"),K(!0)},ve=e=>{ue("allChecks"),ce(e),K(!0)},we=e=>{e&&e.preventDefault(),O(""),$(null),X(!1)},ye=e=>{let{value:t}=e;J(t)},je=e=>{let a=e.target.value,l=a.toLowerCase().replace(/\s+/g," ").trim();if(ie(a),(Y.length>0||P>0)&&t((0,f.t2)()),""===l)L(b),se(D);else{const e=(0,p.filter)(b,(e=>e.name.toLowerCase().includes(l)));L(e),se(e.length)}},be=e=>{if("Enter"===e.key){const e={currentPage:te,countPage:Z,search:{client:ne.replace(/\s+/g," ").trim()}};t((0,f.CN)(e))}};return(0,l.useEffect)((()=>{t((0,f.YU)())}),[t]),(0,l.useEffect)((()=>{const e={search:{client:ne.replace(/\s+/g," ").trim(),packman:G}};t((0,f.Lf)(e))}),[t,Z,te,C,z,G]),(0,l.useEffect)((()=>{L(b)}),[b]),(0,l.useEffect)((()=>{se(D)}),[D]),(0,l.useEffect)((()=>{q(S)}),[S]),(0,l.useEffect)((()=>{const e=(0,p.map)(a,(e=>({label:e.name,value:e._id})));W(e)}),[a]),(0,j.jsxs)(h.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,j.jsx)(d.A,{headerText:`${I&&I.name} ${e("ismli mijozni o`chirishni tasdiqlaysizmi?")}`,title:e("O`chirilgan mijozni tiklashning imkoni mavjud emas!"),toggleModal:he,body:oe,approveFunction:()=>{const e={name:I.name,_id:I._id,packman:I.packman,currentPage:te,countPage:Z,search:{client:ne.replace(/\s+/g," ").trim()}};t((0,f.Qy)(e)).then((e=>{let{error:t}=e;t||(we(),(0,g.VB)())})),he()},isOpen:V,printedSelling:re}),(0,j.jsx)("form",{className:`flex ps-[20px] mt-[40px] gap-[1.25rem] bg-background flex-col mainPadding transition ease-linear duration-200 ${R&&"stickyForm"}`,children:(0,j.jsxs)("div",{className:"supplier-style",children:[(0,j.jsx)(s.A,{value:T,onChange:e=>{$(e)},label:e("Agentni tanlang"),placeholder:e("Dilso`z"),select:!0,options:M,maxWidth:"lg:w-[21rem] w-[90vw]",border:!0}),(0,j.jsx)(s.A,{value:F,label:e("Mijoz ismi"),placeholder:e("misol: Navro`z"),maxWidth:"lg:w-[21rem] w-[90vw]",type:"string",onChange:e=>{O(e.target.value)}}),(0,j.jsxs)("div",{className:"flex gap-[1.25rem] grow w-[18.3125rem]",children:[(0,j.jsx)(n.A,{add:!R,edit:R,text:e(R?"Saqlash":"Yangi agent qo`shish"),onClick:R?a=>{a.preventDefault();const{failed:l,message:s}=(0,x.py)([{value:F,message:e("Mijoz ismi")}]);if(l)(0,g.EB)(s);else{const e={name:F,_id:Q._id,packman:T&&T.value||null,currentPage:te,countPage:Z,search:{client:ne.replace(/\s+/g," ").trim()}};t((0,f.GG)(e)).then((e=>{let{error:t}=e;t||(we(),(0,g.h6)())}))}}:a=>{a.preventDefault();const{failed:l,message:s}=(0,x.py)([{value:F,message:e("Mijoz ismi")}]);if(l)(0,g.EB)(s);else{const e={name:F,packman:T&&T.value||null,currentPage:te,countPage:Z,search:{client:ne.replace(/\s+/g," ").trim()}};t((0,f.MN)(e)).then((e=>{let{error:t}=e;t||(we(),(0,g.PW)())}))}}}),(0,j.jsx)(n.A,{onClick:we,text:e("Tozalash")})]})]})}),pe&&(0,j.jsx)("div",{className:"flex ps-[10px] pe-[20px] lg:justify-start gap-2 items-center justify-between mb-4",children:(0,j.jsxs)("button",{onClick:()=>{de(!0)},className:"d-block  hover:bg-blue-200  bg-blue-400   focus-visible:outline-none w-[150px] h-[40px] createElement ",children:[(0,j.jsx)(y.YsJ,{})," ",e("izlash")]})}),pe?me&&(0,j.jsxs)("div",{className:"absolute lg:p-[50px] w-[100vw]  h-[100vh]  flex justify-evenly flex-wrap    top-0\tleft-0 z-50 bg-[white]\t",children:[(0,j.jsx)(w.hvQ,{onClick:()=>de(!1),className:" absolute right-[20px]  top-[20px]  text-4xl cursor-pointer"}),(0,j.jsxs)("div",{className:"mt-[10px] flex flex-wrap justify-center items-center",children:[(0,j.jsx)(m.A,{filterBy:["clientName","select"],filterByPackman:ye,filterByClientNameWhenPressEnter:be,filterByDelivererNameWhenPressEnter:be,searchByClientName:ne,filterByClientName:je,startDate:C,endDate:new Date(z),setStartDate:B,setEndDate:A,searchByPackmans:[{label:"Barchasi",value:null},...M]}),(0,j.jsxs)("button",{onClick:()=>{de(!1)},className:"d-block  hover:bg-blue-200  bg-blue-400   focus-visible:outline-none w-[150px] h-[40px] createElement ",children:[(0,j.jsx)(y.YsJ,{})," ",e("izlash")]})]})]}):(0,j.jsx)("div",{className:"mt-[10px] px-4 flex justify-center items-center",children:(0,j.jsx)(m.A,{filterBy:["clientName","select"],filterByPackman:ye,filterByClientNameWhenPressEnter:be,filterByDelivererNameWhenPressEnter:be,searchByClientName:ne,filterByClientName:je,startDate:C,endDate:new Date(z),setStartDate:B,setEndDate:A,searchByPackmans:[{label:"Barchasi",value:null},...M]})}),(0,j.jsx)("div",{className:"lg:tableContainerPadding",children:k?(0,j.jsx)(o.A,{}):0===_.length&&0===Y.length?(0,j.jsx)(u.A,{text:e("Mijozlar mavjud emas")}):pe?(0,j.jsx)(r.A,{data:Y.length>0?Y:_,page:"client",currentPage:te,countPage:Z,headers:E,Edit:fe,Delete:xe,Print:ve,type:N.type}):(0,j.jsx)(i.A,{data:Y.length>0?Y:_,page:"client",currentPage:te,countPage:Z,headers:E,Edit:fe,Delete:xe,Print:ve,type:N.type})})]},"content")}}}]);
//# sourceMappingURL=7410.2ff06e53.chunk.js.map