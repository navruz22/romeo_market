"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4502],{7275:(e,t,i)=>{i.d(t,{A:()=>l});i(5043);const l=i.p+"static/media/Excel.3a5a1731280185e0e4ae99ee0a4eebfc.svg"},6521:(e,t,i)=>{i.d(t,{P:()=>d});i(5043);var l=i(3979),r=i(9456),n=i(2096),a=i(579);const c=e=>{var t;let{product:i,currency:c,marketName:o,isShowPrice:s}=e;const{inputRef:d}=(0,l.E)({value:null===i||void 0===i||null===(t=i.productdata)||void 0===t?void 0:t.barcode,options:{background:"#fff",width:"2cm",height:"40cm"}});console.log(i);const{currency:u}=(0,r.d4)((e=>e.currency));return(0,a.jsx)("div",{className:"w-[40mm] break-after-page font-sans h-[65mm] times ",children:(0,a.jsxs)("div",{className:"w-[65mm] rotate-90 mt-20 -ml-0 text-xl",children:[(0,a.jsx)("div",{className:"text-center font-bold text-2xl p-[1px]",children:(0,a.jsxs)("span",{children:['"',o,'"']})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-center text-lg p-1",children:[(0,n.t)("Nomi"),":",(0,a.jsx)("br",{})," ",(0,a.jsx)("span",{className:"font-bold",children:i.productdata&&i.productdata.name})]}),s&&(0,a.jsxs)("div",{className:"text-2xl font-bold text-center p-1",children:[(0,a.jsx)("span",{children:i.price?"\u0426\u0435\u043d\u0430:":""})," ",(0,a.jsx)("span",{children:i.price&&("UZS"===c?i.price.sellingpriceuzs.toLocaleString("ru-RU"):i.price.sellingprice.toLocaleString("ru-RU"))+" "+c||""})]}),(0,a.jsx)("div",{children:(0,a.jsx)("canvas",{ref:d})}),(0,a.jsx)("div",{className:"flex justify-center p-1"}),(0,a.jsxs)("div",{className:"flex justify-between text-xl p-1",children:[(0,a.jsxs)("div",{children:[(0,n.t)("Kodi"),": ",i.category&&i.category.code," ",i.productdata&&i.productdata.code]}),(0,a.jsx)("div",{children:(new Date).toLocaleDateString()})]})]})]})})};var o=i(3536);const s=(e,t)=>{let i=[];for(let l=0;l<e;l++)i.push(t);return i},d=e=>{let{countOfCheques:t,productForCheques:i,printedData:l,componentRef:r,currency:n,marketName:d,isShowPrice:u}=e;return(0,a.jsxs)("div",{ref:r,children:[i&&t&&(0,o.map)(i,(e=>(0,o.range)(0,t).map((()=>(0,a.jsx)(c,{currency:n,product:e,marketName:d,isShowPrice:u},(0,o.uniqueId)("barCode")))))),(0,o.map)(l,(e=>(0,a.jsx)("div",{children:(0,o.map)(s(e.numberOfChecks,e.product),(e=>(0,a.jsx)(c,{currency:n,product:e,marketName:d,isShowPrice:u},(0,o.uniqueId)("barCode"))))},(0,o.uniqueId)("barCodeContainer"))))]})}},3237:(e,t,i)=>{i.d(t,{A:()=>a});i(5043);var l=i(7275),r=i(9092),n=i(579);const a=function(e){let{onClick:t}=e;const{t:i}=(0,r.B)(["common"]);return(0,n.jsxs)("button",{className:"exportButton ",onClick:t,children:[i("Eksport"),(0,n.jsx)("span",{className:"btn-icon bg-white-900 p-[8px]",children:(0,n.jsx)("img",{src:l.A,alt:"excel icon"})})]})}},5784:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var l=i(5043),r=i(3237),n=i(4964),a=i(2039),c=i(1605),o=i(7424),s=i(9456),d=i(4235),u=i(8054),p=i(3978),m=i(3141),h=i(6521),g=i(200),f=i(9092),x=i(3536),v=i(3734),j=(i(7990),i(579));const y=e=>{let{id:t}=e;const{t:i}=(0,f.B)(["common"]),y=[{title:i("\u2116")},{title:i("Kategoriyasi"),filter:"category.code"},{title:i("Maxsulot kodi"),filter:"productdata.code"},{title:i("Maxsulot nomi"),filter:"productdata.name"},{title:i("Soni(dona)"),filter:"product.total"},{title:i("Olish"),filter:"price.incomingprice"},{title:i("Olish jami")},{title:i("Sotish"),filter:"price.sellingprice"},{title:i("Sotish jami")},{title:i("Cheklar soni")},{title:""}],S=(0,s.wA)(),{products:k,total:b,loading:C,searchedProducts:N,totalSearched:P,loadingExcel:w}=(0,s.d4)((e=>e.products)),{currencyType:B}=(0,s.d4)((e=>e.currency)),{market:{name:A}}=(0,s.d4)((e=>e.login)),[E,O]=(0,l.useState)(k),[U,z]=(0,l.useState)(N),[D,R]=(0,l.useState)(b),[q,I]=(0,l.useState)("10"),[L,Y]=(0,l.useState)(0),[M,Z]=(0,l.useState)(""),[$,T]=(0,l.useState)(""),[_,F]=(0,l.useState)(""),[K,G]=(0,l.useState)(null),[H,J]=(0,l.useState)(""),[W,Q]=(0,l.useState)({filter:"",sort:"",count:0}),[V,X]=(0,l.useState)(!1),[ee,te]=(0,l.useState)([]),[ie,le]=(0,l.useState)(!0),re=(0,l.useRef)(),ne=(0,l.useRef)(),ae=(0,m.useReactToPrint)({content:()=>re.current,onBeforeGetContent:()=>(X(!0),new Promise((e=>{ne.current=e,setTimeout((()=>{X(!1),e()}),2e3)})))}),ce=async(e,t)=>{t&&te([...(0,x.filter)(ee,(t=>t.product._id===e._id))]),await ae()};console.log(ie);return(0,l.useEffect)((()=>{const e={filialId:t,currentPage:L,countPage:q,search:{name:$.replace(/\s+/g," ").trim(),code:M.replace(/\s+/g," ").trim(),category:_.replace(/\s+/g,"")}};S((0,p.d$)(e))}),[L,q,S]),(0,l.useEffect)((()=>{O(k)}),[k]),(0,l.useEffect)((()=>{R(b)}),[b]),(0,l.useEffect)((()=>{z(N)}),[N]),(0,l.useEffect)((()=>{V&&"function"===typeof ne.current&&ne.current()}),[ne.current,V]),(0,l.useEffect)((()=>{V||(te([]),J(""),G(null))}),[V]),(0,j.jsxs)(c.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[w||V&&(0,j.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,j.jsx)(d.A,{})}),(0,j.jsx)("div",{className:"mt-10 lg:mt-0 pagination mainPadding",children:(0,j.jsx)(r.A,{onClick:()=>{const e=["\u2116","Mahsulot kodi","Mahsulot nomi","Soni","Olish narxi USD","Olish narxi UZS","Olish narxi jami USD","Olish narxi jami UZS","Sotish narxi USD","Sotish narxi UZS","Sotish narxi jami UZS","Sotish narxi jami USD"];S((0,p.cA)()).then((t=>{let{error:i,payload:l}=t;if(!i)if((null===l||void 0===l?void 0:l.length)>0){const t=(0,x.map)(l,((e,t)=>{var i,l,r,n,a,c,o,s,d,u,p;return{nth:t+1,code:(null===e||void 0===e||null===(i=e.productdata)||void 0===i?void 0:i.code)||"",name:(null===e||void 0===e||null===(l=e.productdata)||void 0===l?void 0:l.name)||"",total:e.total+(null===e||void 0===e||null===(r=e.unit)||void 0===r?void 0:r.name)||"",incomingprice:(null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.incomingprice)||"",incomingpriceuzs:(null===e||void 0===e||null===(a=e.price)||void 0===a?void 0:a.incomingpriceuzs)||"",incomingpricealluzs:(null===e||void 0===e||null===(c=e.price)||void 0===c?void 0:c.incomingpriceuzs)*e.total,incomingpriceallusd:(null===e||void 0===e||null===(o=e.price)||void 0===o?void 0:o.incomingprice)*e.total,sellingprice:(null===e||void 0===e||null===(s=e.price)||void 0===s?void 0:s.sellingprice)||"",sellingpriceuzs:(null===e||void 0===e||null===(d=e.price)||void 0===d?void 0:d.sellingpriceuzs)||"",sellingalluzs:(null===e||void 0===e||null===(u=e.price)||void 0===u?void 0:u.sellingpriceuzs)*e.total,sellingallusd:(null===e||void 0===e||null===(p=e.price)||void 0===p?void 0:p.sellingprice)*e.total}}));(0,g.m1)(t,"Etiketka",e)}else(0,v.lY)("Jadvalda ma'lumot mavjud emas !","warning")}))}})}),(0,j.jsx)(o.A,{filterBy:["total","category","code","name","checks","checkbox","printBtn"],filterByCode:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if(Z(t),(U.length>0||P>0)&&S((0,p.$g)()),""===i)O(k),R(b);else{const e=(0,x.filter)(k,(e=>e.productdata.code.includes(i)));O(e),R(e.length)}},filterByName:e=>{let t=e.target.value,i=t.toLowerCase().replace(/\s+/g," ").trim();if(T(t),(U.length>0||P>0)&&S((0,p.$g)()),""===i)O(k),R(b);else{const e=(0,x.filter)(k,(e=>e.productdata.name.toLowerCase().includes(i)));O(e),R(e.length)}},searchByCode:M,searchByName:$,searchByCategory:_,filterByCategory:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if(F(t),(U.length>0||P>0)&&S((0,p.$g)()),""===i)O(k),R(b);else{const e=(0,x.filter)(k,(e=>e.category.code.includes(i)));O(e),R(e.length)}},numberOfChecks:H,filterByTotal:e=>{let{value:t}=e;I(t),Y(0)},filterByCodeAndNameAndCategoryWhenPressEnter:e=>{if("Enter"===e.key){Y(0);const e={filialId:t,currentPage:0,countPage:q,search:{name:$.replace(/\s+/g," ").trim(),code:M.replace(/\s+/g," ").trim(),category:_.replace(/\s+/g,"")}};S((0,p.Yp)(e))}},clickPrintBtn:ce,setNumberOfChecks:e=>{J(e.target.value),G(U.length>0?U:E)},check:!ie,handleChangeCheck:()=>le(!ie),checkboxLabel:"Narxi"}),(0,j.jsx)("div",{className:"tableContainerPadding",children:C?(0,j.jsx)(d.A,{}):0===E.length&&0===U.length?(0,j.jsx)(u.A,{text:i("Maxsulotlar mavjud emas")}):(0,j.jsx)(a.A,{page:"productreport",data:U.length>0?U:E,currentPage:L,countPage:q,currency:B,headers:y,Sort:e=>{if(e===W.filter)switch(W.count){case 1:Q({filter:e,sort:"1",count:2}),(0,g.Yc)(U.length>0?U:E,U.length>0?z:O,e,1,U.length>0?N:k);break;case 2:Q({filter:e,sort:"",count:0}),(0,g.Yc)(U.length>0?U:E,U.length>0?z:O,e,"",U.length>0?N:k);break;default:Q({filter:e,sort:"-1",count:1}),(0,g.Yc)(U.length>0?U:E,U.length>0?z:O,e,-1,U.length>0?N:k)}else Q({filter:e,sort:"-1",count:1}),(0,g.Yc)(U.length>0?U:E,U.length>0?z:O,e,-1,U?N:k,U.length>0)},sortItem:W,placeholder:`${i("misol")} : 10`,changeHandler:(e,t)=>{const i=ee.findIndex((e=>e.product._id===t._id));-1!==i?(""!==e.target.value.trim()?ee[i].numberOfChecks=Number(e.target.value):ee.splice(i,1),te([...ee])):te([...ee,{product:t,numberOfChecks:Number(e.target.value)}])},Print:ce,printedData:ee})}),(0,j.jsx)("div",{className:"hidden",children:(0,j.jsx)(h.P,{currency:B,componentRef:re,countOfCheques:H,productForCheques:K,printedData:ee,marketName:A,isShowPrice:ie})}),(0,j.jsx)("div",{className:"m-3 flex justify-center",children:(0!==D||0!==P)&&(0,j.jsx)(n.A,{countPage:Number(q),totalDatas:P||D,currentPage:L,setCurrentPage:Y})})]},"content")}}}]);
//# sourceMappingURL=4502.6365396a.chunk.js.map