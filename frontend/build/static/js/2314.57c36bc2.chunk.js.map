{"version":3,"file":"static/js/2314.57c36bc2.chunk.js","mappings":"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","sources":["Pages/Sale/Routes/SavedSellings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport Table from '../../../Components/Table/Table'\r\nimport TableMobile from '../../../Components/Table/TableMobile'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { deleteSavedPayment, getSavedPayments } from '../Slices/savedSellingsSlice.js'\r\nimport NotFind from '../../../Components/NotFind/NotFind.js'\r\nimport SmallLoader from '../../../Components/Spinner/SmallLoader.js'\r\nimport { universalToast } from '../../../Components/ToastMessages/ToastMessages.js'\r\nimport UniversalModal from '../../../Components/Modal/UniversalModal.js'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { universalSort } from './../../../App/globalFunctions'\r\n\r\nconst SavedSellings = () => {\r\n    const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            setIsMobile(window.innerWidth <= 768);\r\n        };\r\n\r\n        window.addEventListener('resize', handleResize);\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', handleResize);\r\n        };\r\n    }, []);\r\n    const { t } = useTranslation(['common'])\r\n    const dispatch = useDispatch()\r\n    const { savedPayments, getLoading } = useSelector(\r\n        (state) => state.savedSellings\r\n    )\r\n    const [data, setData] = useState(savedPayments)\r\n    const [storeData, setStoreData] = useState(savedPayments)\r\n    const [sorItem, setSorItem] = useState({\r\n        filter: '',\r\n        sort: '',\r\n        count: 0\r\n    })\r\n    const { currencyType } = useSelector((state) => state.currency)\r\n    const [modalVisible, setModalVisible] = useState(false)\r\n    const [modalBody, setModalBody] = useState('approve')\r\n    const [printBody, setPrintBody] = useState({})\r\n    const [selectedPayment, setSelectedPayment] = useState(null)\r\n    const headers = [\r\n        { styles: 'w-[10%] text-start', filter: '', title: 'â„–' },\r\n        { styles: 'w-[40%]', title: t('Sotuvchi') },\r\n        { styles: 'w-[40%]', filter: 'temporary.clientValue', title: t('Mijoz') },\r\n        { styles: 'w-[10%]', filter: '', title: t('Maxsulotlar') },\r\n        { styles: 'w-[10%] text-center', filter: 'temporary.totalPrice', title: t('Jami') },\r\n        { styles: 'w-[10%] text-center', filter: 'createdAt', title: t('Sana') },\r\n        { styles: 'w-[10%] text-center', filter: 'createdAt', title: t('Vaqti') },\r\n        { styles: 'w-[10%]', filter: '', title: ' ' },\r\n    ]\r\n    const toggleModal = () => {\r\n        setModalVisible(!modalVisible)\r\n        setPrintBody({})\r\n        setModalBody('')\r\n    }\r\n    const deletePayment = () => {\r\n        dispatch(deleteSavedPayment({ _id: selectedPayment })).then(({ error }) => {\r\n            if (!error) {\r\n                toggleModal()\r\n                setSelectedPayment(null)\r\n            }\r\n        })\r\n    }\r\n    const handleGetId = (id) => {\r\n        setSelectedPayment(id)\r\n        toggleModal()\r\n        setModalBody('approve')\r\n    }\r\n    const editSavedPayment = () => {\r\n        universalToast(t('Xizmatdan foydalanish hozircha mavjud emas'), 'info')\r\n    }\r\n    const handlePrintModal = (el) => {\r\n        toggleModal()\r\n        setModalBody('savedsalescheck')\r\n        setPrintBody({\r\n            createdAt: el.createdAt,\r\n            products: el.temporary.tableProducts,\r\n            client: { name: el.temporary.clientValue?.label },\r\n            packman: { name: el.temporary.packmanValue.label },\r\n            user: el.user,\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        dispatch(getSavedPayments())\r\n    }, [dispatch])\r\n\r\n    useEffect(() => {\r\n        console.log(savedPayments);\r\n        setData(savedPayments)\r\n        setStoreData(savedPayments)\r\n    }, [savedPayments])\r\n\r\n    const filterData = (filterKey) => {\r\n        if (filterKey === sorItem.filter) {\r\n            switch (sorItem.count) {\r\n                case 1:\r\n                    setSorItem({\r\n                        filter: filterKey,\r\n                        sort: '1',\r\n                        count: 2\r\n                    })\r\n                    universalSort(\r\n                        savedPayments,\r\n                        setData,\r\n                        filterKey,\r\n                        1,\r\n                        storeData\r\n                    )\r\n                    break\r\n                case 2:\r\n                    setSorItem({\r\n                        filter: filterKey,\r\n                        sort: '',\r\n                        count: 0\r\n                    })\r\n                    universalSort(\r\n                        data,\r\n                        setData,\r\n                        filterKey,\r\n                        '',\r\n                        storeData\r\n                    )\r\n                    break\r\n                default:\r\n                    setSorItem({\r\n                        filter: filterKey,\r\n                        sort: '-1',\r\n                        count: 1\r\n                    })\r\n                    universalSort(\r\n                        data,\r\n                        setData,\r\n                        filterKey,\r\n                        -1,\r\n                        storeData\r\n                    )\r\n            }\r\n        } else {\r\n            setSorItem({\r\n                filter: filterKey,\r\n                sort: '-1',\r\n                count: 1\r\n            })\r\n            universalSort(\r\n                data,\r\n                setData,\r\n                filterKey,\r\n                -1,\r\n                storeData\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='pb-[1.25rem] max-h-[35rem] mb-[1rem] pt-[1.25rem] ps-[1rem] pe-[2rem]'>\r\n            <UniversalModal\r\n                isOpen={modalVisible}\r\n                body={modalBody}\r\n                approveFunction={deletePayment}\r\n                printedSelling={printBody}\r\n                toggleModal={toggleModal}\r\n                headerText={t(\r\n                    'Saqlangan to`lovni o`chirishni tasdiqlaysizmi ?'\r\n                )}\r\n                title={t('Agar to`lov o`chsa uni tiklab bo`lmaydi !')}\r\n            />\r\n            {!getLoading ? (\r\n                savedPayments.length > 0 ? (\r\n                    !isMobile ? <Table\r\n                        Edit={editSavedPayment}\r\n                        Delete={handleGetId}\r\n                        page='temporarysale'\r\n                        currentPage={3}\r\n                        countPage={3}\r\n                        data={data}\r\n                        headers={headers}\r\n                        currency={currencyType}\r\n                        Print={handlePrintModal}\r\n                        Sort={filterData}\r\n                        sortItem={sorItem}\r\n                    /> : <TableMobile\r\n                        Edit={editSavedPayment}\r\n                        Delete={handleGetId}\r\n                        page='temporarysale'\r\n                        currentPage={3}\r\n                        countPage={3}\r\n                        data={data}\r\n                        headers={headers}\r\n                        currency={currencyType}\r\n                        Print={handlePrintModal}\r\n                        Sort={filterData}\r\n                        sortItem={sorItem}\r\n                    />\r\n\r\n                ) : (\r\n                    <NotFind\r\n                        text={t('Saqlanganlar to`lovlar hozircha mavjud emas')}\r\n                    />\r\n                )\r\n            ) : (\r\n                <SmallLoader />\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SavedSellings\r\n"],"names":["SavedSellings","isMobile","setIsMobile","useState","window","innerWidth","useEffect","handleResize","addEventListener","removeEventListener","t","useTranslation","dispatch","useDispatch","savedPayments","getLoading","useSelector","state","savedSellings","data","setData","storeData","setStoreData","sorItem","setSorItem","filter","sort","count","currencyType","currency","modalVisible","setModalVisible","modalBody","setModalBody","printBody","setPrintBody","selectedPayment","setSelectedPayment","headers","styles","title","toggleModal","handleGetId","id","editSavedPayment","universalToast","handlePrintModal","el","_el$temporary$clientV","createdAt","products","temporary","tableProducts","client","name","clientValue","label","packman","packmanValue","user","getSavedPayments","console","log","filterData","filterKey","universalSort","_jsxs","className","children","_jsx","UniversalModal","isOpen","body","approveFunction","deletePayment","deleteSavedPayment","_id","then","_ref","error","printedSelling","headerText","SmallLoader","length","TableMobile","Edit","Delete","page","currentPage","countPage","Print","Sort","sortItem","Table","NotFind","text"],"sourceRoot":""}