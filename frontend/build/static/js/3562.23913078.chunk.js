"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1181,3562],{8308:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var r=a(5043),n=a(2039),l=a(4964),s=a(7424),i=a(1605),o=a(5020),c=a(200),g=a(9456),u=a(3734),d=a(4235),h=a(8054),y=a(5618),f=a(3216),m=a(9092),p=a(3536),v=a(579);const x=function(){const{t:e}=(0,m.B)(["common"]),t=[{styles:"w-[10%]",filter:"",title:"\u2116"},{styles:"w-[10%]",filter:"category.code",title:e("Kategoriyasi")},{styles:"w-[10%]",filter:"productdata.code",title:e("Kodi")},{styles:"w-[20%]",filter:"productdata.name",title:e("Nomi")},{styles:"w-[10%] text-center",title:e("Dastlabki")},{styles:"w-[10%] text-center",filter:"",title:e("Sanoq")},{styles:"w-[10%] text-center",filter:"",title:e("Farq")},{styles:"",filter:"",title:e("Izoh")},{styles:"",filter:"",title:" "}],a=(0,g.wA)(),{inventories:x,total:P,searchedInventories:C,totalSearched:S,errorInventories:w,loading:j,successUpdateInventory:B,successComplateInventory:k}=(0,g.d4)((e=>e.inventories)),I=(0,f.Zp)(),[b,A]=(0,r.useState)(x),[q,z]=(0,r.useState)(C),[E,N]=(0,r.useState)(""),[Y,H]=(0,r.useState)(P),[D,K]=(0,r.useState)("10"),[M,T]=(0,r.useState)(0),[F,L]=(0,r.useState)(""),[O,U]=(0,r.useState)(""),[W,Q]=(0,r.useState)(!1),[V,Z]=(0,r.useState)({filter:"",sort:"",count:0}),G=()=>Q(!W),J=e=>{const t={inventory:q.length?{...q[e].inventory}:{...b[e].inventory},currentPage:0,countPage:D,search:{name:O.replace(/\s+/g," ").trim(),code:F.replace(/\s+/g," ").trim(),category:E.replace(/\s+/g," ").trim()}};a((0,o.Q5)(t))};return(0,r.useEffect)((()=>{w&&((0,u.lY)(w,"error"),a((0,o.YV)())),B&&((0,u.q1)(),a((0,o.W)())),k&&((0,u.O8)(),a((0,o.Yr)()),I("/maxsulotlar/inventarizatsiya/inventarizatsiyalar"))}),[w,a,B,k,I]),(0,r.useEffect)((()=>{const e={currentPage:M,countPage:D,search:{name:O.replace(/\s+/g," ").trim(),code:F.replace(/\s+/g," ").trim(),category:E.replace(/\s+/g," ").trim()}};a((0,o.lo)(e))}),[M,D,a]),(0,r.useEffect)((()=>{A(x)}),[x]),(0,r.useEffect)((()=>{H(P)}),[P]),(0,r.useEffect)((()=>{z(C)}),[C]),(0,v.jsxs)(i.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,v.jsx)(y.A,{body:"complete",toggleModal:G,closeModal:G,isOpen:W,headerText:e("Diqqat! Inventarizatsiya yakunlanishini tasdiqlaysizmi?"),approveFunction:()=>{a((0,o.qb)())}}),(0,v.jsxs)("div",{className:"inverterizationHead mainPadding",children:[(0,v.jsx)("div",{className:"inverterizationText",children:e("Inventarizatsiya")}),(0,v.jsx)("div",{children:(0!==Y||0!==S)&&(0,v.jsx)(l.A,{countPage:Number(D),totalDatas:S||Y,currentPage:M,setCurrentPage:T})})]}),(0,v.jsx)(s.A,{filterBy:["total","category","code","name","confirmBtn"],searchByCategory:E,filterByCategory:e=>{let t=e.target.value,r=t.replace(/\s+/g," ").trim();if(N(t),(q.length>0||S>0)&&a((0,o.H3)()),""===r)A(x),H(P);else{const e=(0,p.filter)(x,(e=>e.category.code.includes(r)));A(e),H(e.length)}},filterByCode:e=>{let t=e.target.value,r=t.replace(/\s+/g," ").trim();if(L(t),(q.length>0||S>0)&&a((0,o.H3)()),""===r)A(x),H(P);else{const e=(0,p.filter)(x,(e=>e.productdata.code.includes(r)));A(e),H(e.length)}},filterByName:e=>{let t=e.target.value,r=t.toLowerCase().replace(/\s+/g," ").trim();if(U(t),(q.length>0||S>0)&&a((0,o.H3)()),""===r)A(x),H(P);else{const e=(0,p.filter)(x,(e=>e.productdata.name.toLowerCase().includes(r)));A(e),H(e.length)}},searchByCode:F,searchByName:O,filterByTotal:e=>{let{value:t}=e;K(t),T(0)},filterByCodeAndNameAndCategoryWhenPressEnter:e=>{if("Enter"===e.key){T(0);const e={currentPage:0,countPage:D,search:{name:O.replace(/\s+/g," ").trim(),code:F.replace(/\s+/g," ").trim(),category:E.replace(/\s+/g," ").trim()}};a((0,o.Iq)(e))}},clickConfirmBtn:G}),(0,v.jsx)("div",{className:"tableContainerPadding",children:j?(0,v.jsx)(d.A,{}):0===b.length&&0===q.length?(0,v.jsx)(h.A,{text:"Maxsulotlar mavjud emas"}):(0,v.jsx)(n.A,{sortItem:V,Sort:e=>{if(e===V.filter)switch(V.count){case 1:Z({filter:e,sort:"1",count:2}),(0,c.Yc)(q.length>0?q:b,q.length>0?z:A,e,1,q.length>0?C:x);break;case 2:Z({filter:e,sort:"",count:0}),(0,c.Yc)(q.length>0?q:b,q.length>0?z:A,e,"",q.length>0?C:x);break;default:Z({filter:e,sort:"-1",count:1}),(0,c.Yc)(q.length>0?q:b,q.length>0?z:A,e,-1,q.length>0?C:x)}else Z({filter:e,sort:"-1",count:1}),(0,c.Yc)(q.length>0?q:b,q.length>0?z:A,e,-1,q?C:x,q.length>0)},page:"inventory",currentPage:M,countPage:D,data:q.length>0?q:b,headers:t,changeHandler:(e,t,a,r)=>{let n=q.length?[...q]:[...b];const l=e.target.value;let s={...n[t]};s.inventory="count"===r?{...s.inventory,inventorycount:parseInt(l),productcount:a.total}:{...s.inventory,comment:l},n[t]={...s},q.length?z([...n]):A([...n])},Save:J,onKeyUp:(e,t)=>{"Enter"===e.key&&J(t)}})})]},"content")}}}]);
//# sourceMappingURL=3562.23913078.chunk.js.map