{"version":3,"file":"static/js/4553.9e84e710.chunk.js","mappings":"kKAIA,MAQA,EARmBA,IAAa,IAAZ,KAACC,GAAKD,EACtB,OACIE,EAAAA,EAAAA,KAACC,EAAAA,GAAI,CAACC,GAAIH,EAAMI,UAAU,2DAA0DC,UAChFJ,EAAAA,EAAAA,KAACK,EAAAA,IAAa,CAACF,UAAU,WACtB,C,oLCKf,MA6RA,EA7RsBG,KAClB,MAAOC,EAAUC,IAAeC,EAAAA,EAAAA,UAASC,OAAOC,YAAc,MAC9DC,EAAAA,EAAAA,YAAU,KACN,MAAMC,EAAeA,KACjBL,EAAYE,OAAOC,YAAc,IAAI,EAKzC,OAFAD,OAAOI,iBAAiB,SAAUD,GAE3B,KACHH,OAAOK,oBAAoB,SAAUF,EAAa,CACrD,GACF,IACH,MAAM,GAACG,IAAMC,EAAAA,EAAAA,KAEPC,GAAWC,EAAAA,EAAAA,MAEXC,EAAU,CACZ,CACIC,MAAO,UAEX,CACIA,OAAOC,EAAAA,EAAAA,GAAE,QACTC,OAAQ,aAEZ,CACIF,OAAOC,EAAAA,EAAAA,GAAE,MACTC,OAAQ,MAEZ,CACIF,OAAOC,EAAAA,EAAAA,GAAE,UAEb,CACID,OAAOC,EAAAA,EAAAA,GAAE,SAEb,CACID,OAAOC,EAAAA,EAAAA,GAAE,aAEb,CACID,OAAOC,EAAAA,EAAAA,GAAE,SAEb,CACID,MAAO,GACPG,OAAQ,aAIVC,EAAc,CAChB,CACIJ,OAAOC,EAAAA,EAAAA,GAAE,kBAEb,CACID,OAAOC,EAAAA,EAAAA,GAAE,yBAEb,CACID,OAAOC,EAAAA,EAAAA,GAAE,kBAIX,aAACI,IAAgBC,EAAAA,EAAAA,KAAaC,GAAUA,EAAMC,YAC9C,cAACC,EAAa,MAAEC,IAASJ,EAAAA,EAAAA,KAAaC,GAAUA,EAAMI,WAErDC,EAAMC,IAAWzB,EAAAA,EAAAA,UAAS,KAC1B0B,EAAaC,IAAkB3B,EAAAA,EAAAA,UAAS,IACxC4B,EAAWC,IAAgB7B,EAAAA,EAAAA,UAAS,KACpC8B,EAAQC,IAAa/B,EAAAA,EAAAA,UAAS,CACjCO,GAAI,GACJyB,OAAQ,MAELC,EAAeC,IAAoBlC,EAAAA,EAAAA,UAAS,CAC/CO,GAAI,GACJyB,OAAQ,MAELG,EAAgBC,IAAqBpC,EAAAA,EAAAA,UAAS,OAC9CqC,EAAcC,IAAmBtC,EAAAA,EAAAA,WAAS,IAC1CuC,EAAeC,IAAoBxC,EAAAA,EAAAA,UAAS,CAAC,IAC7CyC,EAAWC,IAAgB1C,EAAAA,EAAAA,UAC9B,IAAI2C,MACA,IAAIA,MAAOC,eACX,IAAID,MAAOE,YACX,IAAIF,MAAOG,aAGZC,EAASC,IAAchD,EAAAA,EAAAA,UAAS,IAAI2C,MAOrCM,EAAoBC,IACtBd,EAAkBc,GAClBZ,GAAgB,EAAK,EA4BnBa,EAAyCC,IAC7B,UAAVA,EAAEC,MACF1B,EAAe,GACfO,EAAiBJ,GACrB,EA+DJ,OA5DA3B,EAAAA,EAAAA,YAAU,KACN,IAAImD,EAAO,CACPb,YACAM,UACArB,cACAE,YACAE,OAAQG,EACRsB,OAAQhD,GAEZE,GAAS+C,EAAAA,EAAAA,IAAiBF,GAAM,GACjC,CACC7C,EACAgC,EACAM,EACArB,EACAE,EACArB,EACA0B,KAGJ9B,EAAAA,EAAAA,YAAU,KAEN,GADAsB,EAAQJ,GACJA,EAAcoC,OAAS,EAAG,CAC1B,MAAMC,GAAaC,EAAAA,EAAAA,QACftC,GACA,CAACuC,EAAMC,IACHD,GACAD,EAAAA,EAAAA,QACIE,EAAKC,UACL,CAACF,EAAMG,IAAYH,EAAOG,EAAQA,SAClC,IAER,GAEEC,GAAgBL,EAAAA,EAAAA,QAClBtC,GACA,CAACuC,EAAMC,IACHD,GACAD,EAAAA,EAAAA,QACIE,EAAKC,UACL,CAACF,EAAMG,IAAYH,EAAOG,EAAQE,YAClC,IAER,GAGEC,GAAeP,EAAAA,EAAAA,QACjBtC,GACA,CAACuC,EAAMC,IAASD,EAAOC,EAAKM,SAASV,QACrC,GAGJjB,EAAiB,CACb4B,WAAY/C,EAAcoC,OAC1BC,aACAM,gBACAE,gBAER,IACD,CAAC7C,KAEAgD,EAAAA,EAAAA,MAAA,OAAK3E,UAAU,SAAQC,SAAA,EACnBJ,EAAAA,EAAAA,KAAC+E,EAAAA,EAAc,CACXnC,eAAgBA,EAChBf,SAAUH,EACVqC,KAAM,YACNiB,OAAQlC,EACRmC,YA7GQA,KAChBlC,GAAiBD,GACjBD,EAAkB,KAAK,KA6GnB7C,EAAAA,EAAAA,KAAA,OAAKG,UAAU,qCAAoCC,UAC/CJ,EAAAA,EAAAA,KAACkF,EAAAA,EAAU,CAACnF,KAAM,8BAGtBC,EAAAA,EAAAA,KAAA,OAAKG,UAAU,cAAaC,UACxBJ,EAAAA,EAAAA,KAACmF,EAAAA,EAAU,CACPC,SAAU,CACN,QACA,YACA,UACA,KACA,cAEJC,cAAgBxB,GAAMvB,EAAauB,EAAEyB,OACrCpC,UAAWA,EACXC,aAAcA,EACdK,QAASA,EACTC,WAAYA,EACZ8B,WAAYhD,EAAOvB,GACnBwE,mBAAoBjD,EAAOE,OAC3BgD,mBA7GY5B,IACxB,MAAM6B,EAAM7B,EAAE8B,OAAOL,MAAMM,cACrBC,GAAmBtE,EAAAA,EAAAA,QAAOO,GAAgB6B,IAAa,IAADmC,EAAAC,EACxD,OAAc,OAAPpC,QAAO,IAAPA,GAAe,QAARmC,EAAPnC,EAASlB,cAAM,IAAAqD,GAAfA,EAAiBE,KACX,OAAPrC,QAAO,IAAPA,GAAe,QAARoC,EAAPpC,EAASlB,cAAM,IAAAsD,OAAR,EAAPA,EAAiBC,KAAKJ,cAAcK,SAASP,GAC7C/B,CAAO,IAEjBzB,EAAQ2D,GACRrD,EAAU,IACHD,EACHE,OAAQiD,GACV,EAmGUQ,WA1HQrC,IACpB,MACMsC,EADMtC,EAAE8B,OAAOL,MACIc,QAAQ,OAAQ,KAAKC,OACxCR,GAAmBtE,EAAAA,EAAAA,QAAOO,GAAgB6B,GACrCA,EAAQ3C,GAAGiF,SAASE,KAE/BjE,EAAQ2D,GACRrD,EAAU,IACHD,EACHvB,GAAImF,GACN,EAiHUG,iCACI1C,EAEJ2C,yBACI3C,MAIX3B,EAAKiC,OAAS,IACXY,EAAAA,EAAAA,MAAA0B,EAAAA,SAAA,CAAApG,SAAA,EACIJ,EAAAA,EAAAA,KAAA,OAAKG,UAAU,2BAA0BC,SAEjCG,GACAP,EAAAA,EAAAA,KAACyG,EAAAA,EAAW,CACZxE,KAAMe,EACNnB,SAAUH,EACVgF,KAAM,gBACNtF,QAASK,KAEZzB,EAAAA,EAAAA,KAAC2G,EAAAA,EAAK,CACP1E,KAAMe,EACNnB,SAAUH,EACVgF,KAAM,gBACNtF,QAASK,OAIbzB,EAAAA,EAAAA,KAAA,OAAKG,UAAU,gCAA+BC,SAEtCG,GACAP,EAAAA,EAAAA,KAACyG,EAAAA,EAAW,CACZxE,KAAMA,EACNE,YAAaA,EACbN,SAAUH,EACVW,UAAWA,EACXqE,KAAM,YACNtF,QAASA,EACTY,SAAS,EACT4E,MAAOlD,KAEX1D,EAAAA,EAAAA,KAAC2G,EAAAA,EAAK,CACF1E,KAAMA,EACNE,YAAaA,EACbN,SAAUH,EACVW,UAAWA,EACXqE,KAAM,eACNtF,QAASA,EACTY,SAAS,EACT4E,MAAOlD,OAIf1D,EAAAA,EAAAA,KAAA,OAAKG,UAAU,0CAAyCC,UAC5DJ,EAAAA,EAAAA,KAAC6G,EAAAA,EAAU,CACPxE,UAAWA,EACXyE,WAAY/E,GAAS,EACrBI,YAAaA,EACbC,eAAgBA,WAMtB,C","sources":["Components/LinkToBack/LinkToBack.js","Pages/Seller/SellersReport.js"],"sourcesContent":["import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport {IoChevronBack} from 'react-icons/io5'\r\n\r\nconst LinkToBack = ({link}) => {\r\n    return (\r\n        <Link to={link} className='lg:mt-[10px] lg:ms-[20px] mt-[50px] ms-[30px] linktoback'>\r\n            <IoChevronBack className='mt-[]'/>\r\n        </Link>\r\n    )\r\n}\r\n\r\nexport default LinkToBack\r\n","import React, {useEffect, useState} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {useParams} from 'react-router-dom'\r\nimport LinkToBack from '../../Components/LinkToBack/LinkToBack'\r\nimport Pagination from '../../Components/Pagination/Pagination'\r\nimport SearchForm from '../../Components/SearchForm/SearchForm'\r\nimport Table from '../../Components/Table/Table'\r\nimport TableMobile from '../../Components/Table/TableMobile'\r\nimport {getSellerReports} from './sellerSlice'\r\nimport {filter, reduce} from 'lodash'\r\nimport UniversalModal from '../../Components/Modal/UniversalModal.js'\r\nimport {t} from 'i18next'\r\n\r\nconst SellersReport = () => {\r\n    const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            setIsMobile(window.innerWidth <= 768);\r\n        };\r\n\r\n        window.addEventListener('resize', handleResize);\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', handleResize);\r\n        };\r\n    }, []);\r\n    const {id} = useParams()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const headers = [\r\n        {\r\n            title: 'â„–'\r\n        },\r\n        {\r\n            title: t('Sana'),\r\n            filter: 'createdAt'\r\n        },\r\n        {\r\n            title: t('ID'),\r\n            filter: 'id'\r\n        },\r\n        {\r\n            title: t('Mijoz')\r\n        },\r\n        {\r\n            title: t('Jami')\r\n        },\r\n        {\r\n            title: t('Chegirma')\r\n        },\r\n        {\r\n            title: t('Qarz')\r\n        },\r\n        {\r\n            title: '',\r\n            styles: 'w-[7rem]'\r\n        }\r\n    ]\r\n\r\n    const headersInfo = [\r\n        {\r\n            title: t('Sotuvlar soni'),\r\n        },\r\n        {\r\n            title: t('Sotilgan mahsulotlar'),\r\n        },\r\n        {\r\n            title: t('Jami tushum'),\r\n        },\r\n    ]\r\n\r\n    const {currencyType} = useSelector((state) => state.currency)\r\n    const {sellersreport, count} = useSelector((state) => state.sellers)\r\n\r\n    const [data, setData] = useState([])\r\n    const [currentPage, setCurrentPage] = useState(0)\r\n    const [countPage, setCountPage] = useState(10)\r\n    const [search, setSearch] = useState({\r\n        id: '',\r\n        client: '',\r\n    })\r\n    const [sendingSearch, setSendingSearch] = useState({\r\n        id: '',\r\n        client: '',\r\n    })\r\n    const [printedSelling, setPrintedSelling] = useState(null)\r\n    const [modalVisible, setModalVisible] = useState(false)\r\n    const [generalReport, setGeneralreport] = useState({})\r\n    const [startDate, setStartDate] = useState(\r\n        new Date(\r\n            new Date().getFullYear(),\r\n            new Date().getMonth(),\r\n            new Date().getDate()\r\n        )\r\n    )\r\n    const [endDate, setEndDate] = useState(new Date())\r\n\r\n    const toggleModal = () => {\r\n        setModalVisible(!modalVisible)\r\n        setPrintedSelling(null)\r\n    }\r\n\r\n    const handleClickPrint = (selling) => {\r\n        setPrintedSelling(selling)\r\n        setModalVisible(true)\r\n    }\r\n    // handle change client and id\r\n    const handleChangeId = (e) => {\r\n        const val = e.target.value\r\n        const valForSearch = val.replace(/\\s+/g, ' ').trim()\r\n        const filteredProducts = filter(sellersreport, (selling) => {\r\n            return selling.id.includes(valForSearch)\r\n        })\r\n        setData(filteredProducts)\r\n        setSearch({\r\n            ...search,\r\n            id: valForSearch,\r\n        })\r\n    }\r\n    const handleChangeClient = (e) => {\r\n        const val = e.target.value.toLowerCase()\r\n        const filteredProducts = filter(sellersreport, (selling) => {\r\n            return selling?.client?.name\r\n                ? selling?.client?.name.toLowerCase().includes(val)\r\n                : selling\r\n        })\r\n        setData(filteredProducts)\r\n        setSearch({\r\n            ...search,\r\n            client: val,\r\n        })\r\n    }\r\n    const handleChangeIdAndClientWhenPressEnter = (e) => {\r\n        if (e.key === 'Enter') {\r\n            setCurrentPage(0)\r\n            setSendingSearch(search)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        let body = {\r\n            startDate,\r\n            endDate,\r\n            currentPage,\r\n            countPage,\r\n            search: sendingSearch,\r\n            seller: id,\r\n        }\r\n        dispatch(getSellerReports(body))\r\n    }, [\r\n        dispatch,\r\n        startDate,\r\n        endDate,\r\n        currentPage,\r\n        countPage,\r\n        id,\r\n        sendingSearch,\r\n    ])\r\n\r\n    useEffect(() => {\r\n        setData(sellersreport)\r\n        if (sellersreport.length > 0) {\r\n            const totalprice = reduce(\r\n                sellersreport,\r\n                (summ, sale) =>\r\n                    summ +\r\n                    reduce(\r\n                        sale.payments,\r\n                        (summ, payment) => summ + payment.payment,\r\n                        0\r\n                    ),\r\n                0\r\n            )\r\n            const totalpriceuzs = reduce(\r\n                sellersreport,\r\n                (summ, sale) =>\r\n                    summ +\r\n                    reduce(\r\n                        sale.payments,\r\n                        (summ, payment) => summ + payment.paymentuzs,\r\n                        0\r\n                    ),\r\n                0\r\n            )\r\n\r\n            const saleProducts = reduce(\r\n                sellersreport,\r\n                (summ, sale) => summ + sale.products.length,\r\n                0\r\n            )\r\n\r\n            setGeneralreport({\r\n                salesCount: sellersreport.length,\r\n                totalprice,\r\n                totalpriceuzs,\r\n                saleProducts,\r\n            })\r\n        }\r\n    }, [sellersreport])\r\n    return (\r\n        <div className='w-full'>\r\n            <UniversalModal\r\n                printedSelling={printedSelling}\r\n                currency={currencyType}\r\n                body={'allChecks'}\r\n                isOpen={modalVisible}\r\n                toggleModal={toggleModal}\r\n            />\r\n            <div className='flex items-center justify-between '>\r\n                <LinkToBack link={'/hamkorlar/sotuvchilar'} />\r\n            </div>\r\n            \r\n            <div className='flex w-full'>\r\n                <SearchForm\r\n                    filterBy={[\r\n                        'total',\r\n                        'startDate',\r\n                        'endDate',\r\n                        'id',\r\n                        'clientName',\r\n                    ]}\r\n                    filterByTotal={(e) => setCountPage(e.value)}\r\n                    startDate={startDate}\r\n                    setStartDate={setStartDate}\r\n                    endDate={endDate}\r\n                    setEndDate={setEndDate}\r\n                    searchById={search.id}\r\n                    searchByClientName={search.client}\r\n                    filterByClientName={handleChangeClient}\r\n                    filterById={handleChangeId}\r\n                    filterByClientNameWhenPressEnter={\r\n                        handleChangeIdAndClientWhenPressEnter\r\n                    }\r\n                    filterByIdWhenPressEnter={\r\n                        handleChangeIdAndClientWhenPressEnter\r\n                    }\r\n                />\r\n            </div>\r\n            {data.length > 0 && (\r\n                <>\r\n                    <div className='lg:tableContainerPadding'>\r\n                        {\r\n                            isMobile?\r\n                            <TableMobile\r\n                            data={generalReport}\r\n                            currency={currencyType}\r\n                            page={'generalreport'}\r\n                            headers={headersInfo}\r\n                        />\r\n                        :<Table\r\n                        data={generalReport}\r\n                        currency={currencyType}\r\n                        page={'generalreport'}\r\n                        headers={headersInfo}\r\n                    />\r\n                        }\r\n                    </div>\r\n                    <div className='lg:tableContainerPadding mt-4'>\r\n                        {\r\n                            isMobile?\r\n                            <TableMobile\r\n                            data={data}\r\n                            currentPage={currentPage}\r\n                            currency={currencyType}\r\n                            countPage={countPage}\r\n                            page={'saleslist'}\r\n                            headers={headers}\r\n                            sellers={true}\r\n                            Print={handleClickPrint}\r\n                        />:\r\n                        <Table\r\n                            data={data}\r\n                            currentPage={currentPage}\r\n                            currency={currencyType}\r\n                            countPage={countPage}\r\n                            page={'clientssales'}\r\n                            headers={headers}\r\n                            sellers={true}\r\n                            Print={handleClickPrint}\r\n                        />\r\n                        }\r\n                    </div>\r\n                    <div className='flex justify-center mt-[30px] mb-[30px]'>\r\n                <Pagination\r\n                    countPage={countPage}\r\n                    totalDatas={count || 1}\r\n                    currentPage={currentPage}\r\n                    setCurrentPage={setCurrentPage}\r\n                />\r\n            </div>\r\n                </>\r\n                \r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SellersReport\r\n"],"names":["_ref","link","_jsx","Link","to","className","children","IoChevronBack","SellersReport","isMobile","setIsMobile","useState","window","innerWidth","useEffect","handleResize","addEventListener","removeEventListener","id","useParams","dispatch","useDispatch","headers","title","t","filter","styles","headersInfo","currencyType","useSelector","state","currency","sellersreport","count","sellers","data","setData","currentPage","setCurrentPage","countPage","setCountPage","search","setSearch","client","sendingSearch","setSendingSearch","printedSelling","setPrintedSelling","modalVisible","setModalVisible","generalReport","setGeneralreport","startDate","setStartDate","Date","getFullYear","getMonth","getDate","endDate","setEndDate","handleClickPrint","selling","handleChangeIdAndClientWhenPressEnter","e","key","body","seller","getSellerReports","length","totalprice","reduce","summ","sale","payments","payment","totalpriceuzs","paymentuzs","saleProducts","products","salesCount","_jsxs","UniversalModal","isOpen","toggleModal","LinkToBack","SearchForm","filterBy","filterByTotal","value","searchById","searchByClientName","filterByClientName","val","target","toLowerCase","filteredProducts","_selling$client","_selling$client2","name","includes","filterById","valForSearch","replace","trim","filterByClientNameWhenPressEnter","filterByIdWhenPressEnter","_Fragment","TableMobile","page","Table","Print","Pagination","totalDatas"],"sourceRoot":""}