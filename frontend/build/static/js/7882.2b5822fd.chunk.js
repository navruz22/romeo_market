"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1181,7882],{8668:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(2096),r=a(221),i=a(579);const s=function(e){let{id:t,title:a,code:s,products:c,activeCategory:n,onClick:o}=e;return(0,i.jsxs)("div",{className:"category-card "+(n?"active-category":""),onClick:()=>o(t),children:[(0,i.jsx)("h1",{className:"text-black-700 text-base leading-[1.5625rem]",children:a||(0,l.t)("Nomsiz kategoriya")}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex gap-[0.3125rem] items-center",children:[(0,i.jsxs)("p",{className:"footer-text",children:[(0,l.t)("Kodi")," :"]}),(0,i.jsx)("span",{className:"block rounded-[3.125rem] bg-warning-500 py-[0.125rem] px-[0.625rem] text-xs leading-[0.875rem] text-white-900",children:s||0})]}),(0,i.jsxs)("div",{className:"flex gap-[0.3125rem] items-center",children:[(0,i.jsxs)("p",{className:"footer-text",children:[(0,l.t)("Maxsulot turlari")," :"]}),(0,i.jsx)("span",{className:"block rounded-[3.125rem] bg-success-400 py-[0.125rem] px-[0.625rem] text-xs leading-[0.875rem] text-white-900",children:c||0})]})]}),(0,i.jsx)("div",{className:"category-card-checkmark",children:(0,i.jsx)(r.KDk,{size:"1rem",className:"check-icon"})})]})}},6270:(e,t,a)=>{a.d(t,{A:()=>N});var l=a(221),r=(a(5043),a(579));const i=e=>{let{onClick:t,text:a,type:i,active:s}=e;const c={cash:(0,r.jsx)(l.iS_,{className:"paymentsstyle",size:"1.3125rem"}),card:(0,r.jsx)(l.dBf,{className:"paymentsstyle",size:"1.3125rem"}),transfer:(0,r.jsx)(l.whc,{className:"paymentsstyle",size:"1.3125rem"}),mixed:(0,r.jsx)(l.m_O,{className:"paymentsstyle",size:"1.3125rem"})};return(0,r.jsxs)("button",{onClick:()=>t(i),className:"salestyle "+(s?"bg-primary-700 text-white-900":"bg-[#E9ECEB]"),children:[c[i],a]})},s=e=>{let{onClick:t,text:a}=e;return(0,r.jsxs)("button",{onClick:t,className:"discountstyle w-full h-[3.25rem] bg-warning-500 text-white-900 duration-200 shadow-lg",children:[(0,r.jsx)(l.YbJ,{className:"discstyle",size:"1.5rem"}),a]})},c=e=>{let{onClick:t,text:a,onDoubleClick:i}=e;return(0,r.jsxs)("button",{onClick:t,onDoubleClick:i,className:"paymentstyle grow",children:[(0,r.jsx)(l.SXw,{className:"paystyle",size:"1.3125rem"}),a]})};var n=a(9456),o=a(1318),u=a(2234);const d=e=>(0,r.jsx)(u.c.DropdownIndicator,{...e,children:(0,r.jsx)(l.QDT,{size:"0.625rem"})}),m={control:e=>({...e,borderTopRightRadius:".125rem",borderBottomRightRadius:".125rem",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",fontSize:"0.75rem",fontWeight:"400",padding:"0.375rem 0.3125rem",color:"#071F45",outline:"none",border:"none",boxShadow:"none",cursor:"pointer",height:"100%",backgroundColor:"#F79009",minHeight:"100%","&:hover":{backgroundColor:"#DC6803"}}),container:e=>({...e,height:"100%",position:"absolute",right:0,width:"3rem",top:0,bottom:0}),option:(e,t)=>{let{isFocused:a,isSelected:l}=t;return{...e,fontSize:".75rem",fontWeight:"400",color:l||a?"#ffffff":"#071F45",backgroundColor:l?"#0090A3":a?"#00B4CC":"#ffffff",transition:"all 0.2s ease",overflow:"hidden",cursor:"pointer",textAlign:"center"}},menu:e=>({...e,overflow:"hidden"}),singleValue:e=>({...e,fontSize:".75rem",fontWeight:"400",color:"#ffffff",margin:0,textAlign:"center"}),valueContainer:e=>({...e,padding:0}),indicatorsContainer:e=>({...e}),dropdownIndicator:e=>({...e,padding:0,color:"#ffffff"})};var p=a(2096);const h=function(e){let{value:t,onChange:a,option:l,onSelect:i}=e;const{currencyType:s}=(0,n.d4)((e=>e.currency)),c=[{value:s,label:s},{value:"%",label:"%"}];return(0,r.jsxs)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:[(0,r.jsx)("input",{className:"w-[8.6875rem] placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-l-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:`${(0,p.t)("misol")}: 100 000 000`,type:"number",value:t,onChange:e=>{a(e.target.value)},onWheel:e=>e.target.blur(),min:0}),(0,r.jsx)(o.Ay,{onChange:i,styles:m,isSearchable:!1,value:l,options:c,components:{IndicatorSeparator:()=>null,DropdownIndicator:d}})]})},x=e=>{let{value:t,onChange:a,option:l,onSelect:i}=e;return(0,r.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,r.jsxs)("div",{className:"text-black-700 text-[0.875rem]",children:[(0,p.t)("Chegirma")," :"]}),(0,r.jsx)(h,{onChange:a,onSelect:i,value:t,option:l})]})};var b=a(6899);const g=e=>{let{onClick:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{onClick:t,className:"exitbtn",children:(0,r.jsx)(l.FyX,{size:"0.75rem"})})})};const v=function(e){let{mix:t,value:a,onChange:l,label:i,onClose:s,keyInput:c,placeholder:n,type:o}=e;return(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[i," :"]}),(0,r.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,r.jsx)(b.A,{placeholder:n||`${(0,p.t)("misol")}: 100 000 000`,type:o||"number",value:a,onChange:e=>{l(e.target.value,c)}}),t&&(0,r.jsx)(g,{onClick:()=>s(c)})]})]})};var f=a(3216);const N=function(e){let{returned:t,active:a,togglePaymentModal:o,type:u="cash",cash:d="",card:m="",transfer:h="",discount:b,hasDiscount:g,debt:N,allPayment:j,paid:y=0,client:w="",onChange:S,onClose:C,changePaymentType:k,discountSelectOption:z,handleClickDiscountBtn:_,handleChangeDiscountSelectOption:A,handleChangeDiscount:U,handleClickPay:D,saleComment:P,changeComment:F,onDoubleClick:M,clickdelay:I}=e;const T=(0,f.zy)(),O=()=>{switch(u){case"card":return(0,r.jsx)(v,{value:m,keyInput:u,onChange:S,onClose:C,label:(0,p.t)("Plastik")},"sale-card1");case"transfer":return(0,r.jsx)(v,{value:h,keyInput:u,onChange:S,onClose:C,label:(0,p.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,p.t)("Naqd"),key:"cash",value:d},{label:(0,p.t)("Plastik"),key:"card",value:m},{label:(0,p.t)("O`tkazma"),key:"transfer",value:h}].map((e=>(0,r.jsx)(v,{value:e.value,keyInput:e.key,onChange:S,onClose:C,label:(0,p.t)(e.label)},`sale-${e.key}`)));default:return(0,r.jsx)(v,{value:d,onChange:S,keyInput:u,onClose:C,label:(0,p.t)("Naqd")},"sale-cash")}},{currencyType:Q}=(0,n.d4)((e=>e.currency));return(0,r.jsxs)("section",{className:"fixed transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 "+(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:o,children:[(0,r.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,p.t)("")}),(0,r.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 "+(a?"translate-x-0":"translate-x-full"),onClick:e=>e.stopPropagation(),autoFocus:!0,children:[(0,r.jsxs)("div",{className:"top-payment w-full",children:[w&&(0,r.jsxs)("div",{className:"customer-head-icon",children:[(0,r.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,r.jsx)(l.uSr,{className:"mr-[0.75rem]"}),(0,r.jsxs)("span",{children:[(0,p.t)("Mijoz")," : "]})]}),(0,r.jsx)("h3",{className:"text-[0.875rem]",children:w})]}),(0,r.jsxs)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:[j.toLocaleString("ru-Ru")," ",Q]}),(0,r.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&O(),(T.pathname.includes("/kassa/debts")||T.pathname.includes("/qarzdorlar")||T.pathname.includes("/maxsulotlar/qabul/qabulqilish")||T.pathname.includes("/maxsulotlar/qabul/qabullar"))&&O(),(0,r.jsx)(v,{value:P,keyInput:u,onChange:F,onClose:C,label:(0,p.t)("Izoh"),placeholder:(0,p.t)("misol: qarzga olindi"),type:"text"},"sale-card"),g&&(0,r.jsx)(x,{value:b,onChange:U,option:z,onSelect:A}),(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,p.t)("Qarzlar")," :"," "]}),(0,r.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[N.toLocaleString("ru-Ru")," ",Q]})]}),(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[j<0?(0,p.t)("Qaytarilayotgan"):(0,p.t)("To`lanayotgan")," ",":"," "]}),(0,r.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[y.toLocaleString("ru-Ru")," ",Q]})]})]})]}),(0,r.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,r.jsxs)("div",{className:"custom-paymet-btn",children:[(0,r.jsx)(i,{text:(0,p.t)("Naqd"),type:"cash",active:"cash"===u,onClick:k}),(0,r.jsx)(i,{text:(0,p.t)("Plastik"),type:"card",active:"card"===u,onClick:k}),(0,r.jsx)(i,{text:(0,p.t)("O'tkazma"),type:"transfer",active:"transfer"===u,onClick:k}),!t&&(0,r.jsx)(i,{text:(0,p.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:k}),T.pathname.includes("/kassa/debts")&&(0,r.jsx)(i,{text:(0,p.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:k})]}),!t&&(0,r.jsx)(s,{text:(0,p.t)("Chegirma"),onClick:_}),(0,r.jsx)(c,{text:(0,p.t)("To'lash"),onClick:I?()=>console.log("wait"):D})]})]})]})}},2662:(e,t,a)=>{a.d(t,{A:()=>i});const l=(0,a(2104).Ay)("https://moyprays.uz/"),r=JSON.parse(localStorage.getItem("userData"));l.auth={token:r.token,market:r.market};const i=l},7972:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var l=a(5043),r=a(7990),i=a(7630),s=a(2039),c=a(9456),n=a(221),o=a(8668),u=a(8054),d=a(4235),m=a(6899),p=a(3536),h=a(2096),x=a(579);const b=e=>{let{data:t,Delete:a,changeHandler:r,currency:i,increment:s,decrement:o,lowUnitpriceProducts:u,wholeSale:d,productId:b,productModal:g}=e;const[v,f]=(0,l.useState)(window.innerWidth<=768);(0,l.useEffect)((()=>{const e=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const{filials:N}=(0,c.d4)((e=>e.registerSelling)),{market:j}=(0,c.d4)((e=>e.login)),[y,w]=(0,l.useState)([]);(0,l.useEffect)((()=>{w((0,p.map)(t,(()=>!1)))}),[t]);let S=t.find((e=>e.product._id==b));const C=S?[S]:[];return(0,x.jsx)(x.Fragment,{children:C.map(((e,t)=>(0,x.jsxs)("li",{className:"w-[100vw] mt-[50px] bg-white list-none mb-[10px] p-[20px] rounded-md",children:[(0,x.jsx)("li",{className:"mt-2 text-2xl flex justify-between text-start",children:(0,x.jsx)("p",{className:"text-black-700 leading-7",children:e.product.name})}),(0,x.jsx)("li",{className:"flex justify-end mt-[20px] pe-7 text-2xl text-[green]",children:null===e||void 0===e?void 0:e.filialProductsTotal}),(0,x.jsx)("p",{className:"mt-3 text-sm",children:(0,h.t)("Fillial")}),(0,x.jsx)("li",{className:"w-[100vw] mt-1 bg-white list-none  rounded-md",children:N.length>1&&(0,x.jsx)("div",{className:"flex justify-center w-[80vw]",children:(0,x.jsx)("select",{onChange:t=>r(e.product._id,{filial:t.target.value,productcode:e.product.code,categorycode:e.categorycode},"select"),value:e.filial,className:"w-full outline-none border-[1px] rounded h-[40px] p-2 bg-[white]",children:N.length>0&&N.map(((e,t)=>(0,x.jsx)("option",{value:e.value,children:e.label},t)))})})}),(0,x.jsx)("p",{className:"mt-3 text-sm",children:(0,h.t)("Soni")}),(0,x.jsx)("li",{className:" mt-1 mb-3 text-sm flex justify-start ",children:(0,x.jsxs)("span",{className:"flex gap-[0.6rem]  items-center justify-start",children:[(0,x.jsx)("div",{className:"w-[40vw] ",children:(0,x.jsx)(m.A,{value:e.pieces,onChange:t=>r(e.product._id,t.target.value,"pieces"),type:"number",min:"h-[50px]"})}),(0,x.jsx)("button",{className:"rounded-[4px] duration-100 bg-success-500 hover:bg-success-600 p-[0.2rem]  h-[40px] w-[70px] text-3xl text-center text-white-900 active:scale-95",onClick:()=>s(e.product._id),children:"+"}),(0,x.jsx)("button",{className:"rounded-[4px] duration-100 bg-error-500 hover:bg-error-600 p-[0.2rem]  text-white-900 h-[40px] w-[70px] text-3xl text-center active:scale-95",onClick:()=>o(e.product._id),children:"-"})]})}),(0,x.jsx)("p",{className:"mt-3 text-sm",children:(0,h.t)("Ombordan")}),(0,x.jsx)("li",{className:"w-[40vw] mt-1",children:(0,x.jsx)(m.A,{value:e.fromFilial,onChange:t=>r(e.product._id,t.target.value,"fromFilial"),type:"number",disabled:e.filial===j._id&&!0})}),(0,x.jsxs)("p",{className:"mt-3 text-sm",children:[(0,h.t)("Narxi"),": ",i]}),(0,x.jsx)("li",{className:" mt-1 text-sm flex justify-start  items-center ",children:(0,x.jsx)(m.A,{value:"UZS"!==i?d&&e.tradeprice||e.unitprice:d&&e.tradepriceuzs||e.unitpriceuzs,onChange:t=>r(e.product._id,t.target.value,"unitprice"),type:"number"})}),(0,x.jsxs)("li",{className:" p-[10px] mt-3 text-xl flex justify-between  items-center ",children:[(0,x.jsxs)("span",{className:"me-2 w-8",children:[(0,h.t)("Jami"),": "]}),"UZS"!==i?e.totalprice.toLocaleString("ru-Ru"):e.totalpriceuzs.toLocaleString("ru-Ru")," ",i]}),(0,x.jsxs)("li",{className:" p-[10px] text-xl flex justify-between items-center ",children:[(0,x.jsx)("button",{onClick:()=>(e=>{const t=[...y];t[e]=!t[e],w([...t])})(t),children:y[t]?(0,x.jsx)(n.GNz,{}):(0,x.jsx)(n.Xyd,{})}),(0,x.jsx)("span",{className:"",children:y[t]?"UZS"===i?e.incomingpriceuzs.toLocaleString("ru-Ru")+" UZS":e.incomingprice.toLocaleString("ru-Ru")+" USD":""})]}),(0,x.jsxs)("li",{className:"flex justify-evenly mt-3",children:[(0,x.jsx)("button",{onClick:()=>g(!1),className:"rounded-[4px] duration-100 bg-success-500 hover:bg-success-600 p-[0.2rem]  h-[40px] w-[40vw]  text-center text-white-900 active:scale-95",children:(0,h.t)("Qo'shish")}),(0,x.jsx)("button",{className:"rounded-[4px] duration-100 bg-error-500 hover:bg-error-600 p-[0.2rem]  h-[40px] w-[40vw]  text-center text-white-900 active:scale-95",onClick:()=>{a(t),g(!1)},children:(0,h.t)("O'chirish")})]})]})))})};var g=a(7160),v=a(7415),f=a(1108),N=a(827),j=a(5618),y=a(200),w=a(3734),S=a(6270),C=a(3216),k=a(6490),z=a(9092),_=a(2662),A=a(5842),U=a(6243),D=a(3297),P=a(5369),F=a(7149),M=a(1154),I=a(1655),T=a(3141);const O=()=>{const[e,t]=(0,l.useState)(!1),{t:a}=(0,z.B)(["common"]),m=(0,c.wA)(),h=(0,C.Zp)(),O=(0,C.zy)(),{user:Q,market:q}=(0,c.d4)((e=>e.login)),[E,$]=(0,l.useState)(!1),[R,Z]=(0,l.useState)(!1),{currencyType:L,currency:W}=(0,c.d4)((e=>e.currency)),{allcategories:B,loading:H}=(0,c.d4)((e=>e.category)),{filials:J}=(0,c.d4)((e=>e.registerSelling)),{allProducts:K,clients:V,loadingMakePayment:Y,lastPayments:X}=(0,c.d4)((e=>e.registerSelling)),{packmans:G}=(0,c.d4)((e=>e.clients)),[ee,te]=(0,l.useState)([]),[ae,le]=(0,l.useState)(""),[re,ie]=(0,l.useState)(!1),[se,ce]=(0,l.useState)([]),[ne,oe]=(0,l.useState)(B),[ue,de]=(0,l.useState)(null),[me,pe]=(0,l.useState)(""),[he,xe]=(0,l.useState)([]),[be,ge]=(0,l.useState)(""),[ve,fe]=(0,l.useState)(""),[Ne,je]=(0,l.useState)([]),[ye,we]=(0,l.useState)(""),[Se,Ce]=(0,l.useState)(""),[ke,ze]=(0,l.useState)(!1),[_e,Ae]=(0,l.useState)(null),[Ue,De]=(0,l.useState)(!1),[Pe,Fe]=(0,l.useState)("cash"),[Me,Ie]=(0,l.useState)(""),[Te,Oe]=(0,l.useState)(""),[Qe,qe]=(0,l.useState)(""),[Ee,$e]=(0,l.useState)(""),[Re,Ze]=(0,l.useState)(""),[Le,We]=(0,l.useState)(""),[Be,He]=(0,l.useState)(""),[Je,Ke]=(0,l.useState)(""),[Ve,Ye]=(0,l.useState)(""),[Xe,Ge]=(0,l.useState)(!1),[et,tt]=(0,l.useState)({label:"%",value:"%"}),[at,lt]=(0,l.useState)(null),[rt,it]=(0,l.useState)(0),[st,ct]=(0,l.useState)(0),[nt,ot]=(0,l.useState)(0),[ut,dt]=(0,l.useState)(0),[mt,pt]=(0,l.useState)(0),[ht,xt]=(0,l.useState)(0),[bt,gt]=(0,l.useState)(""),[vt,ft]=(0,l.useState)(null),[Nt,jt]=(0,l.useState)(null),[yt,wt]=(0,l.useState)(null),[St,Ct]=(0,l.useState)([]),[kt,zt]=(0,l.useState)([]),[_t,At]=(0,l.useState)([]),[Ut,Dt]=(0,l.useState)(0),[Pt,Ft]=(0,l.useState)(0),[Mt,It]=(0,l.useState)(0),[Tt,Ot]=(0,l.useState)(0),[Qt,qt]=(0,l.useState)(W),[Et,$t]=(0,l.useState)(""),[Rt,Zt]=(0,l.useState)([]),[Lt,Wt]=(0,l.useState)(!1),[Bt,Ht]=(0,l.useState)({label:q.name,value:q._id}),[Jt,Kt]=(0,l.useState)(window.innerWidth<=768);(0,l.useEffect)((()=>{const e=()=>{Kt(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);let Vt=null;const Yt=(0,l.useRef)(null),Xt=(0,T.useReactToPrint)({content:()=>Yt.current}),Gt=[{title:"\u2116"},{title:a("Filial")},{title:a("Qoldiq")},{title:a("Nomi")},{title:a("Soni")},{title:a("O'lchov birligi")},{title:a("Ombordan")},{title:a("Narxi")},{title:a("Jami"),styles:"w-[8rem]"},{title:""},{title:""}],ea=[{title:"\u2116"},{title:a("Qoldiq")},{title:a("Nomi")},{title:a("Soni")},{title:a("O'lchov birligi")},{title:a("Narxi")},{title:a("Jami"),styles:"w-[8rem]"},{title:""},{title:""}],ta=[{title:"\u2116"},{title:a("Kodi")},{title:a("Nomi")},{title:a("Soni")},{title:a("Jami")},{title:a("Soni")},{title:a("Jami")}],aa=e=>{De(e?!Ue:e),Fe("cash"),Ge(!1),He(""),Ke(""),Ye(""),it(0),ct(0),tt({label:"%",value:"%"})},la=e=>Math.round(1e3*e)/1e3,ra=e=>Math.round(e),ia=(e,t)=>{qt(ra(e/t))},sa=()=>{if(se.length){if(se.some((e=>0===e.total&&0===e.fromFilial)))return(0,w.GU)();const e=se.filter((e=>e.unitprice<=e.incomingprice)).map((e=>e.product._id));if(e.length>0)Zt(e),(0,w.am)();else{Zt(e);const t=se.reduce(((e,t)=>la(e+t.totalprice)),0),a=se.reduce(((e,t)=>ra(e+t.totalpriceuzs)),0);ot(t),dt(a),Ie(t),Oe(a),pt(t),xt(a),De(!0),ia(a,t)}}else W?(0,w.$5)():(0,w.QC)()},ca=e=>{Ie(""),Oe(""),qe(""),$e(""),Ze(""),We(""),it(0),ct(0),pt(0),xt(0),ce([]),we(""),ge(""),xe([...(0,p.map)([...G],(e=>({value:e._id,label:e.name})))]),je([{label:a("Barchasi"),value:""},...(0,p.map)([...V],(e=>({value:e._id,label:e.name,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null})))]),Ce(""),ie(!1),de(null),Ae(null),pe(""),wt(null),At([]),zt([]),Ct([]),It(0),Ot(0),Ft(0),Dt(0),aa(e),Ht({label:q.name,value:q._id})},na=()=>{ze(!1),setTimeout((()=>{gt("")}),500)},[oa,ua]=(0,l.useState)(!1),da=()=>{var e,t;na();const a={saleproducts:(0,p.map)(se,(e=>{if(Lt){const t={...e,pieces:Number(e.pieces)+Number(e.fromFilial),unitprice:e.tradeprice||e.unitprice,unitpriceuzs:e.tradepriceuzs||e.unitpriceuzs};return(null===t||void 0===t?void 0:t.tradeprice)&&(null===t||void 0===t||delete t.tradeprice),(null===t||void 0===t?void 0:t.tradepriceuzs)&&(null===t||void 0===t||delete t.tradepriceuzs),t}{const t={...e,pieces:Number(e.pieces)+Number(e.fromFilial)};return(null===t||void 0===t?void 0:t.tradeprice)&&(null===t||void 0===t||delete t.tradeprice),(null===t||void 0===t?void 0:t.tradepriceuzs)&&(null===t||void 0===t||delete t.tradepriceuzs),t}})),client:{_id:ye?ye.value:null,name:ye?ye.label:Se,packman:null===ye||void 0===ye?void 0:ye.packman},packman:be?{_id:be.value,name:be.label}:null,discount:{discount:Number(Be),discountuzs:Number(Je),procient:Number(Ve),isProcient:!!Ve},payment:{totalprice:Number(nt),totalpriceuzs:Number(ut),type:Pe,cash:Number(Me),cashuzs:Number(Te),card:Number(Qe),carduzs:Number(Ee),transfer:Number(Re),transferuzs:Number(Le),discount:Number(Be),discountuzs:Number(Je)},debt:{debt:Number(rt),debtuzs:Number(st),comment:""},user:ve||Q._id,saleconnectorid:yt,comment:Et};if((null===(e=a.debt)||void 0===e?void 0:e.debtuzs)>0&&(null===a||void 0===a||null===(t=a.client)||void 0===t||!t.name))return(0,w.Tv)();m(yt?(0,g.eh)(a):(0,g.Rr)(a)).then((e=>{let{payload:t,error:a}=e;ua(!0),a||(console.log(t),ft(t),Wt(!1),setTimeout((()=>{Jt||Xt(),ca()}),500),Nt&&(m((0,v.vZ)({_id:Nt._id})),jt(null)),setTimeout((()=>{ua(!1)}),1e4),fe(""))}))},ma=()=>{ua(!0),na();const e={saleproducts:(0,p.filter)(St,(e=>Number(e.pieces)>0)),discounts:_t,payment:{totalprice:Number(nt),totalpriceuzs:Number(ut),type:Pe,cash:Number(nt<0?-1*Me:Me),cashuzs:Number(ut<0?-1*Te:Te),card:Number(nt<0?-1*Qe:Qe),carduzs:Number(nt<0?-1*Ee:Ee),transfer:Number(nt<0?-1*Re:Re),transferuzs:Number(nt<0?-1*Le:Re)},debt:{debt:Number(nt<0?-1*rt:rt),debtuzs:Number(nt<0?-1*st:st),comment:""},user:Q._id,saleconnectorid:yt,comment:Et};m((0,g.Oy)(e)).then((e=>{let{payload:t,error:a}=e;a||(ft(t),setTimeout((()=>{Jt||(gt("checkSellReturn"),ze(!0)),ca()}),500),setTimeout((()=>{ua(!1)}),1e4))}))},pa=()=>{if(se.length>0){const e=se.reduce(((e,t)=>la(e+t.totalprice)),0),t=se.reduce(((e,t)=>ra(e+t.totalpriceuzs)),0),a={temporary:{saleconnectorid:null,clientValue:ye,packmanValue:be,userValue:Se,tableProducts:se,totalPrice:e,totalPriceUzs:t},user:Q._id};m((0,g.Uw)(a)).then((e=>{let{error:t}=e;t||(ca(!1),h("/sotuv/saqlanganlar"))})),Nt&&(m((0,v.vZ)({_id:Nt._id})),jt(null))}},ha=(e,t,a)=>{switch(a){case"unitprice":wa(e,t);break;case"pieces":Sa(e,t);break;case"fromFilial":Ca(e,t);break;case"select":Da(e,t)}},xa=e=>{1===se.length&&fe(""),se.splice(e,1),ce([...se])},ba=(JSON.stringify(ha),()=>{re&&(Ce(""),ge(""),we("")),ie(!re)}),ga=e=>{ue===e?de(null):(de(e),pe(""),oe(B))},va=e=>{const t=e.target.value;pe(t);const a=t.replace(/\s+/g," ").trim(),l=(0,p.filter)(B,(e=>e.name&&e.name.toLowerCase().includes(a)||e.code.includes(a)));oe(""!==t?l:B)},fa=e=>{if(e.barcode?(0,p.filter)(se,(t=>t.product.barcode===e.barcode)).length>0:(0,p.filter)(se,(t=>t.product._id===e.value)).length>0)(0,w.lY)(a("Maxsulot ro'yxatda mavjud !"),"error");else{!e.barcode&&le(e);const t=e.barcode?K.find((t=>t.productdata.barcode===e.barcode)):K.find((t=>t._id===e.value)),a={total:t.total,product:{_id:t._id,code:t.productdata.code,name:t.productdata.name,barcode:t.productdata.barcode},totalprice:t.price.sellingprice,totalpriceuzs:t.price.sellingpriceuzs,tradeprice:t.price.tradeprice||0,tradepriceuzs:t.price.tradepriceuzs||0,pieces:1,incomingprice:t.price.incomingprice,incomingpriceuzs:t.price.incomingpriceuzs,unitprice:t.price.sellingprice,unitpriceuzs:t.price.sellingpriceuzs,unitname:t.unit.name,categorycode:t.category.code,filialProductsTotal:t.total,fromFilial:0,filial:q._id};"USD"===L&&a.incomingprice<=a.unitprice||"UZS"===L&&a.incomingpriceuzs<=a.unitpriceuzs?(ce([...se,a]),le("")):(0,w.am)()}},Na=e=>{ge(e);const t=(0,p.filter)(G,(t=>t._id===e.value))[0];t&&t.hasOwnProperty("clients")?je((0,p.map)(t.clients,(e=>({label:e.name,value:e._id,packman:t,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null})))):je([{label:a("Tanlang"),value:""},...(0,p.map)([...V],(e=>({label:e.name,value:e._id,packman:null===e||void 0===e?void 0:e.packman,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null})))]),we(""),Ce("")},ja=e=>{we(e),wt((null===e||void 0===e?void 0:e.saleconnectorid)||null);const t=(0,p.filter)(V,(t=>t._id===e.value))[0];var a,l;t&&t.hasOwnProperty("packman")&&ge({label:null===t||void 0===t||null===(a=t.packman)||void 0===a?void 0:a.name,value:null===t||void 0===t||null===(l=t.packman)||void 0===l?void 0:l._id});e.value?Ce(e.label):Ce("")},ya=e=>{Ce(e.target.value)},wa=(e,t)=>{const a=Lt?(0,p.map)(se,(a=>a.product._id===e?{...a,tradeprice:"USD"===L?t:(0,y.Ch)(t,Qt),tradepriceuzs:"UZS"===L?t:(0,y.IQ)(t,Qt),totalprice:"USD"===L?t*a.pieces:(0,y.Ch)(t*a.pieces,Qt),totalpriceuzs:"UZS"===L?t*a.pieces:(0,y.IQ)(t*a.pieces,Qt)}:a)):(0,p.map)(se,(a=>a.product._id===e?{...a,unitprice:"USD"===L?t:(0,y.Ch)(t,Qt),unitpriceuzs:"UZS"===L?t:(0,y.IQ)(t,Qt),totalprice:"USD"===L?t*(Number(a.pieces)+Number(a.fromFilial)):(0,y.Ch)(t*(Number(a.pieces)+Number(a.fromFilial)),Qt),totalpriceuzs:"UZS"===L?t*(Number(a.pieces)+Number(a.fromFilial)):(0,y.IQ)(t*(Number(a.pieces)+Number(a.fromFilial)),Qt)}:a));ce(a)},Sa=(e,t)=>{const a=(0,p.map)(se,(a=>a.product._id===e?{...a,pieces:Number(t),totalprice:la((Number(t)+Number(a.fromFilial))*(Lt&&a.tradeprice||a.unitprice)),totalpriceuzs:ra((Number(t)+Number(a.fromFilial))*(Lt&&a.tradepriceuzs||a.unitpriceuzs))}:a));ce(a)},Ca=(e,t)=>{const a=(0,p.map)(se,(a=>a.product._id===e?{...a,fromFilial:Number(t),totalprice:la((Number(t)+Number(a.pieces))*(Lt&&a.tradeprice||a.unitprice)),totalpriceuzs:ra((Number(t)+Number(a.pieces))*(Lt&&a.tradepriceuzs||a.unitpriceuzs))}:a));ce(a)},ka=e=>{const t=(0,p.map)(se,(t=>t.product._id===e?{...t,pieces:Number(t.pieces)+1,totalprice:la((Number(t.pieces)+Number(t.fromFilial)+1)*(Lt&&t.tradeprice||t.unitprice)),totalpriceuzs:ra((Number(t.pieces)+Number(t.fromFilial)+1)*(Lt&&t.tradepriceuzs||t.unitpriceuzs))}:t));ce(t)},za=e=>{const t=(0,p.map)(se,(t=>t.product._id===e?{...t,pieces:Number(t.pieces)>1?Number(t.pieces)-1:1,totalprice:la((Number(t.pieces)>1?Number(t.pieces)-1+Number(t.fromFilial):1)*(Lt&&t.tradeprice||t.unitprice)),totalpriceuzs:ra((Number(t.pieces)>1?Number(t.pieces)-1+Number(t.fromFilial):1)*(Lt&&t.tradepriceuzs||t.unitpriceuzs))}:t));ce(t)},_a=(e,t,l)=>{if(e>Number(St[l].product.pieces))return(0,w.lY)(a("Diqqat! Qaytariladigan mahsulot soni sotilgan mahsulot sonidan ortiq bo'lolmaydi"),"warning");const r=(0,p.map)(St,(a=>a._id===t?{...a,pieces:e,totalprice:la(e*a.unitprice),totalpriceuzs:ra(e*a.unitpriceuzs)}:a));Ct(r)},Aa=()=>{if(St.length){const e=St.reduce(((e,t)=>la(e+t.totalprice)),0),t=St.reduce(((e,t)=>ra(e+t.totalpriceuzs)),0),a=kt.map((e=>{let t={...e};return(0,p.map)(St,(a=>{var l;return e._id===(null===(l=a.product)||void 0===l?void 0:l.discount)&&(t={...e,discount:e.procient?la(t.discount-a.totalprice*e.procient/100):0,discountuzs:e.procient?ra(t.discountuzs-a.totalpriceuzs*e.procient/100):0,totalprice:la(t.totalprice-a.totalprice),totalpriceuzs:ra(t.totalpriceuzs-a.totalpriceuzs)}),""})),{...t}})),l=a.reduce(((e,t)=>e+t.discount),0),r=a.reduce(((e,t)=>e+t.discountuzs),0),i=la(Ut-Mt-l-e),s=ra(Pt-Tt-r-t);At(a),i<=0?(ot(i),dt(s),Ie(Math.abs(i)),Oe(Math.abs(s)),pt(Math.abs(i)),xt(Math.abs(s))):(Ie(0),Oe((0,y.IQ)(0,Qt)),it(la(i)),ct(ra(s)),ot(e),dt(t),pt(e),xt(t)),De(!0),ia(t,e)}else(0,w._z)()},Ua=e=>{let t=e.target.checked;se.length>0?(Wt(!Lt),ce(t?e=>e.map((e=>({...e,totalprice:e.tradeprice?la(Number(e.pieces+e.fromFilial)*e.tradeprice):e.totalprice,totalpriceuzs:e.tradepriceuzs?ra(Number(e.pieces+e.fromFilial)*e.tradepriceuzs):e.totalpriceuzs}))):e=>e.map((e=>({...e,totalprice:e.unitprice?la(Number(e.pieces+e.fromFilial)*e.unitprice):e.totalprice,totalpriceuzs:e.unitpriceuzs?ra(Number(e.pieces+e.fromFilial)*e.unitpriceuzs):e.totalpriceuzs}))))):(0,w.$5)()},Da=(e,t)=>{Pa(t).then((a=>{ce([...se].map((l=>(l.product._id===e&&(l.filialProductsTotal=a.total,l.filial=t.filial,t.filial===q._id&&(l.fromFilial=0,l.totalprice=la(Number(l.pieces)*(Lt&&l.tradeprice||l.unitprice)),l.totalpriceuzs=ra(Number(l.pieces)*(Lt&&l.tradepriceuzs||l.unitpriceuzs)))),l))))})).catch((e=>(0,w.lY)(e,"error")))},Pa=async e=>{const{data:t}=await U.A.post("/filials/products/get",e);return t};return(0,l.useEffect)((()=>{let e=[],t=[];q&&_.A.emit("getProductsOfCount",{market:q._id}),q&&_.A.on("categories",(e=>{let{id:t,categories:a}=e;t===q._id&&m((0,A.U2)(a))})),q&&_.A.on("getProductsOfCount",(a=>{let{id:l,products:r}=a;l===q._id&&(t=[...t,...(0,p.map)(r,(e=>{var t,a;return{value:e._id,label:`(${e.total}) ${e.category.code}${e.productdata.code} - ${e.productdata.name} -------- (${"USD"===L?(null===e||void 0===e||null===(t=e.price)||void 0===t?void 0:t.sellingprice).toLocaleString("ru-RU"):(null===e||void 0===e||null===(a=e.price)||void 0===a?void 0:a.sellingpriceuzs).toLocaleString("ru-RU")} ${L})`}}))],te(t),e.push(...r),m((0,g.UC)(e)))})),q&&_.A.on("error",(e=>{let{id:t,message:a}=e;t===q._id&&(0,w.lY)(a,"error")}))}),[q,m,X]),(0,l.useEffect)((()=>{if(ue){const e=(0,p.filter)(K,(e=>e.category._id===ue));te((0,p.map)(e,(e=>({value:e._id,label:`(${e.total}) ${e.category.code}${e.productdata.code} - ${e.productdata.name}`}))))}else te((0,p.map)(K,(e=>({value:e._id,label:`(${e.total}) ${e.category.code}${e.productdata.code} - ${e.productdata.name}`}))))}),[ue]),(0,l.useEffect)((()=>{m((0,f.YU)()),m((0,g.Lf)()),m((0,g.f1)({marketData:q}))}),[m,q]),(0,l.useEffect)((()=>{oe(B)}),[B]),(0,l.useEffect)((()=>{xe([{label:a("Tanlang"),value:""},...(0,p.map)([...G],(e=>({value:e._id,label:e.name})))])}),[G,a]),(0,l.useEffect)((()=>{je([{label:a("Barchasi"),value:""},...(0,p.map)([...V],(e=>({value:e._id,label:e.name,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null})))])}),[V,a]),(0,l.useEffect)((()=>{const e=O.state,t=()=>{e.saleconnector.client&&we({label:e.saleconnector.client.name,value:e.saleconnector.client._id}),e.saleconnector.packman&&ge({label:e.saleconnector.packman.name,value:e.saleconnector.packman._id}),wt(e.saleconnector._id)};var a;e&&e.temporary&&(fe(e.temporary.user._id),jt(e.temporary),ce(e.temporary.tableProducts),we(e.temporary.clientValue),ge(e.temporary.packmanValue),Ce(null===(a=e.temporary.user)||void 0===a?void 0:a.userValue));if(e&&e.saleconnector&&!e.returnProducts&&t(),e&&e.saleconnector&&e.returnProducts){t();let a=[];(0,p.map)(e.saleconnector.products,(e=>{const t={_id:e.product._id,discount:e.discount&&e.discount,pieces:e.pieces,totalprice:e.totalprice,totalpriceuzs:e.totalpriceuzs};return(0,p.map)(e.saleproducts,(e=>(t.pieces+=e.pieces,t.totalprice+=e.totalprice,t.totalpriceuzs+=e.totalpriceuzs,""))),e.pieces>0&&a.push({pieces:"",totalpriceuzs:0,totalprice:0,unitprice:e.unitprice,unitpriceuzs:e.unitpriceuzs,product:{...t},productdata:{...e.product.productdata},_id:e._id}),""})),Ct((0,p.filter)(a,(e=>e.product.pieces>0))),zt([...e.saleconnector.discounts]);const l=(e,t,a)=>"uzs"===a?ra(e.reduce(((e,a)=>e+a[t]),0)):la(e.reduce(((e,a)=>e+a[t]),0));Dt(l(e.saleconnector.products,"totalprice","usd")),Ft(l(e.saleconnector.products,"totalpriceuzs","uzs")),It(l(e.saleconnector.payments,"payment","usd")),Ot(l(e.saleconnector.payments,"paymentuzs","uzs"))}window.history.replaceState({},document.title)}),[O.state]),(0,x.jsxs)("div",{className:"flex grow relative overflow-auto",children:[Y&&(0,x.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,x.jsx)(d.A,{})}),(0,x.jsx)(S.A,{clickdelay:oa,returned:!!St.length,type:Pe,active:Ue,togglePaymentModal:aa,changePaymentType:e=>{const t=nt-Number(Be),a=ut-Number(Je),l=St.reduce(((e,t)=>la(e+t.totalprice)),0),r=St.reduce(((e,t)=>ra(e+t.totalpriceuzs)),0),i=la(Ut-Mt-l),s=ra(Pt-Tt-r);if(Pe!==e)switch(Fe(e),e){case"cash":St.length>0?i<=0?(ot(i),dt(s),Ie(Math.abs(i)),Oe(Math.abs(s)),pt(Math.abs(i)),xt(Math.abs(s))):(Ie(0),Oe((0,y.IQ)(0,Qt)),it(la(i)),ct(ra(s)),ot(l),dt(r),pt(l),xt(r)):(Ie(t),Oe(a),qe(""),$e(""),Ze(""),We(""),pt(t),xt(a),it(0),ct(0));break;case"card":St.length>0?i<=0?(ot(i),dt(s),qe(Math.abs(i)),$e(Math.abs(s)),pt(Math.abs(i)),xt(Math.abs(s))):(qe(0),$e((0,y.IQ)(0,Qt)),it(la(i)),ct(ra(s)),ot(l),dt(r),pt(l),xt(r)):(qe(t),$e(a),Ie(""),Oe(""),Ze(""),We(""),pt(t),xt(a),it(0),ct(0)),Ie(""),Oe(""),Ze(""),We("");break;case"transfer":St.length>0?i<=0?(ot(i),dt(s),Ze(Math.abs(i)),We(Math.abs(s)),pt(Math.abs(i)),xt(Math.abs(s))):(Ze(0),We((0,y.IQ)(0,Qt)),it(la(i)),ct(ra(s)),ot(l),dt(r),pt(l),xt(r)):(Ze(t),We(a),Ie(""),Oe(""),qe(""),$e(""),pt(t),xt(a),it(0),ct(0)),Ie(""),Oe(""),qe(""),$e("");break;default:Ie(""),Oe(""),qe(""),$e(""),Ze(""),We(""),pt(0),xt(0),it(nt-Number(Be)),ct(ut-Number(Je))}},onChange:(e,t)=>{((e,t)=>{const a=Math.abs(nt)-Number(Be),l=Math.abs(ut)-Number(Je);if("USD"===L)if("cash"===t){const t=Number(e)+Number(Qe)+Number(Re),r=Number((0,y.IQ)(e,Qt))+Number(Ee)+Number(Le);t<=a?(Ie(e),Oe((0,y.IQ)(e,Qt)),it(la(a-t)),ct(ra(l-r)),pt(t),xt(r)):(0,w.OC)()}else if("card"===t){const t=Number(e)+Number(Me)+Number(Re),r=Number(Te)+Number((0,y.IQ)(e,Qt))+Number(Le);t<=a?(qe(e),$e((0,y.IQ)(e,Qt)),it(la(a-t)),ct(ra(l-r)),pt(t),xt(r)):(0,w.OC)()}else{const t=Number(e)+Number(Me)+Number(Qe),r=Number(Te)+Number(Ee)+Number((0,y.IQ)(e,Qt));t<=a?(Ze(e),We((0,y.IQ)(e,Qt)),it(la(a-t)),ct(ra(l-r)),pt(t),xt(r)):(0,w.OC)()}else if("cash"===t){const t=Number(e)+Number(Ee)+Number(Le),r=Number((0,y.Ch)(e,Qt))+Number(Qe)+Number(Re);t<=l?(Oe(e),Ie((0,y.Ch)(e,Qt)),it(la(a-r)),ct(ra(l-t)),pt(r),xt(t)):(0,w.OC)()}else if("card"===t){const t=Number(e)+Number(Te)+Number(Le),r=Number(Me)+Number((0,y.Ch)(e,Qt))+Number(Re);t<=l?(qe((0,y.Ch)(e,Qt)),$e(e),it(la(a-r)),ct(ra(l-t)),pt((0,y.Ch)(t,Qt)),xt(t)):(0,w.OC)()}else{const t=Number(e)+Number(Te)+Number(Ee),r=Number(Me)+Number(Qe)+Number((0,y.Ch)(e,Qt));t<=l?(Ze((0,y.Ch)(e,Qt)),We(e),it(la(a-r)),ct(ra(l-t)),pt(r),xt(t)):(0,w.OC)()}})(e,t)},client:Se||ye.label||be.label,allPayment:"USD"===L?nt:ut,card:"USD"===L?Qe:Ee,cash:"USD"===L?Me:Te,debt:"USD"===L?rt:st,discount:"USD"===L?"USD"===et.value?Be:Ve:"UZS"===et.value?Je:Ve,handleChangeDiscount:e=>{const t=Math.round(30*nt/100*1e3)/1e3,a=Math.round(30*ut/100*1)/1;if("USD"===et.value)e>t?(0,w.nN)(`${t} USD`):(He(e),Ke((0,y.IQ)(e,Qt)),Ye(0),it(nt-e),ct((0,y.IQ)(nt-e,Qt)));else if("UZS"===et.value)e>a?(0,w.nN)(`${a} UZS`):(Ke(e),He((0,y.Ch)(e,Qt)),Ye(0),it((0,y.Ch)(ut-e,Qt)),ct(ut-e));else if(e>30)(0,w.nN)("30%");else{const t=Math.round(nt*e/100*1e3)/1e3,a=Math.round(ut*e/100*1)/1;Ye(e),He(t),Ke(a),it(la(nt-t)),ct(ra(ut-a)),pt(nt-t),xt(ut-a)}Ie(""),Oe(""),qe(""),$e(""),Ze(""),We(""),pt(0),xt(0)},hasDiscount:Xe,transfer:"USD"===L?Re:Le,handleClickDiscountBtn:()=>{Ge(!Xe),"cash"===Pe?(Ie(nt),Oe(ut),pt(nt),xt(ut)):"card"===Pe?(qe(nt),$e(ut),pt(nt),xt(ut)):"transfer"===Pe?(Ze(nt),We(ut),pt(nt),xt(ut)):(Ie(""),Oe(""),qe(""),$e(""),Ze(""),We(""),pt(0),xt(0),it(nt),ct(ut)),He(""),Ke(""),Ye("")},discountSelectOption:et,handleChangeDiscountSelectOption:e=>{et.value!==e.value&&(tt(e),He(""),Ke(""),Ye(""),Ie(""),Oe(""),qe(""),$e(""),Ze(""),We(""),it(nt),ct(ut),pt(0),xt(0))},paid:"USD"===L?mt:ht,handleClickPay:()=>{St.length?ma():da()},changeComment:e=>{$t(e)},saleComment:Et,onDoubleClick:()=>{window.clearTimeout(Vt),Vt=null,St.length>0?ma():da()}}),(0,x.jsx)(j.A,{body:bt,toggleModal:"complete"===bt?na:()=>{ze(!ke),gt(""),ft(null)},approveFunction:"complete"===bt?St.length?ma:da:()=>{},isOpen:ke,product:vt,headers:Gt,headerText:"complete"===bt&&a("To'lovni amalga oshirishni tasdiqlaysizmi ?"),title:"complete"===bt&&a("To'lovni amalga oshirgach bu ma`lumotlarni o`zgaritirb bo`lmaydi !"),changeProduct:(e,t)=>{switch(t){case"unitprice":(e=>{Ae({..._e,unitprice:"USD"===L?e:(0,y.Ch)(e,Qt),unitpriceuzs:"UZS"===L?e:(0,y.IQ)(e,Qt),totalprice:"USD"===L?e*_e.pieces:(0,y.Ch)(e*_e.pieces,Qt),totalpriceuzs:"UZS"===L?e*_e.pieces:(0,y.IQ)(e*_e.pieces,Qt)})})(e);break;case"pieces":(e=>{Ae({..._e,pieces:e,totalprice:e*_e.unitprice,totalpriceuzs:e*_e.unitpriceuzs})})(e);break;default:return null}}}),Jt?null:(0,x.jsxs)("div",{className:"flex flex-col grow gap-[1.25rem] overflow-auto",children:[(0,x.jsxs)("div",{className:"mainPadding flex flex-col gap-[1.25rem]",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)(r.A,{id:"register-selling",onChange:ba,value:re,label:a("Mijoz")}),(0,x.jsxs)("div",{className:"flex gap-[1.25rem] mt-[1rem]",children:[(0,x.jsx)(i.A,{placeholder:a("Agentlar"),maxWidth:"w-[14.676875rem]",disabled:!re,border:!0,select:!0,value:be,options:he,onChange:Na}),(0,x.jsx)(i.A,{placeholder:a("Xaridor"),maxWidth:"w-[14.676875rem]",disabled:!re,border:!0,select:!0,value:ye,options:Ne,onChange:ja}),(0,x.jsx)(i.A,{placeholder:a("Amaldagi xaridor"),disabled:!re,value:Se,onChange:ya})]})]}),!St.length&&(0,x.jsxs)("div",{className:"flex flex-col gap-[1.25rem]",children:[(0,x.jsx)(i.A,{select:!0,placeholder:a("misol: kompyuter"),value:ae,label:a("Maxsulotlar"),onChange:fa,options:ee}),(0,x.jsx)("div",{className:"flex justify-end items-start",children:(0,x.jsxs)("div",{className:"checkbox-card sale-toggle-container",children:[(0,x.jsxs)("p",{className:"toggleText",children:[a("Optom narxida hisoblash")," :"]}),(0,x.jsx)("input",{type:"checkbox",checked:Lt,onChange:Ua})]})})]})]}),(0,x.jsx)("div",{className:"tableContainerPadding mt-[-20px]",children:St.length?(0,x.jsx)(s.A,{page:"backproduct",data:St,headers:ta,currency:L,changeHandler:_a}):se.length?(0,x.jsx)(s.A,{page:"registersale",data:se,headers:J.length>1?Gt:ea,currency:L,Delete:xa,changeHandler:ha,footer:"registersale",increment:ka,decrement:za,lowUnitpriceProducts:Rt,wholeSale:Lt,selectedFilial:Bt}):(0,x.jsx)(u.A,{text:a("Sotuvda mahsulotlar qo'shilmagan!")})})]}),Jt&&e?(0,x.jsx)("div",{className:"fixed w-[100%] h-[100vh] bg-[white] top-0 right-0 z-[60] ",children:(0,x.jsx)(b,{data:se,headers:J.length>1?Gt:ea,currency:L,productId:at,Delete:xa,productModal:t,changeHandler:ha,footer:"registersale",increment:ka,decrement:za,lowUnitpriceProducts:Rt,wholeSale:Lt,selectedFilial:Bt})}):null,Jt?(0,x.jsxs)("div",{className:"flex mt-[-20px] flex-col grow gap-[1.25rem] overflow-auto",children:[(0,x.jsxs)("div",{className:"flex gap-2 p-4 lg:justify-start mt-4 justify-evenly",children:[Jt?(0,x.jsxs)("button",{onClick:()=>$(!0),className:" hover:bg-blue-200  bg-blue-400 focus-visible:outline-none w-[150px] lg:h-[33px] h=[40px] createElement ",children:[(0,x.jsx)(P.VGZ,{}),a("Mijoz")]}):null,Jt?(0,x.jsxs)("button",{onClick:()=>Z(!0),className:" hover:bg-green-200  bg-green-400 focus-visible:outline-none w-[150px] lg:h-[33px] h=[40px] createElement ",children:[(0,x.jsx)(F.M1j,{})," ",a("Kategoriya")]}):null]}),(0,x.jsx)("div",{className:" flex justify-center",children:!St.length&&(0,x.jsx)("div",{className:"flex flex-col w-[90vw] gap-[1.25rem]",children:(0,x.jsx)(i.A,{select:!0,placeholder:a("misol: kompyuter"),value:ae,onChange:e=>{fa(e),t(!0),lt(e.value)},options:ee})})}),(0,x.jsx)("div",{className:"ml-[20px] mb-[-20px] flex justify-between mr-[20px]",children:(0,x.jsx)("div",{className:"flex justify-end items-start",children:(0,x.jsxs)("div",{className:"checkbox-card  sale-toggle-container",children:[(0,x.jsxs)("p",{className:"toggleText ",children:[a("Optom narxida hisoblash")," :"]}),(0,x.jsx)("input",{className:"z-0",type:"checkbox",checked:Lt,onChange:Ua})]})})}),E?(0,x.jsxs)("div",{className:"fixed w-[100%] h-[100vh] bg-[white] top-0 right-0 z-50 ",children:[(0,x.jsx)(M.hvQ,{onClick:()=>$(!1),className:" absolute right-[20px]  top-[20px]  text-4xl cursor-pointer"}),(0,x.jsxs)("div",{className:"mainPadding ps-[20px] mt-[50px] flex flex-col gap-[1.25rem]",children:[(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:"flex flex-wrap gap-[1.25rem] mt-[1rem]",children:[(0,x.jsx)(r.A,{id:"register-selling",onChange:ba,value:re,label:a("Mijoz")}),(0,x.jsx)(i.A,{placeholder:a("Agentlar"),maxWidth:"lg:w-[14.676875rem] w-[90vw]",disabled:!re,border:!0,select:!0,value:be,options:he,onChange:Na}),(0,x.jsx)(i.A,{placeholder:a("Xaridor"),maxWidth:"lg:w-[14.676875rem] w-[90vw]",disabled:!re,border:!0,select:!0,value:ye,options:Ne,onChange:ja}),(0,x.jsx)(i.A,{placeholder:a("Amaldagi xaridor"),disabled:!re,value:Se,onChange:ya})]})}),(0,x.jsx)("div",{className:"flex mt-[30px] justify-center ",children:(0,x.jsxs)("button",{onClick:()=>$(!1),className:" hover:bg-blue-200  bg-blue-400 focus-visible:outline-none w-[150px] lg:h-[33px] h=[40px] createElement ",children:[(0,x.jsx)(P.YsJ,{})," ",a("izlash")]})})]})]}):null,(0,x.jsx)("div",{className:"mb-[100px] mt-[20px]",children:St.length?Jt?(0,x.jsx)(D.A,{page:"backproduct",data:St,headers:ta,currency:L,changeHandler:_a}):(0,x.jsx)(s.A,{page:"backproduct",data:St,headers:ta,currency:L,changeHandler:_a}):se.length?Jt?(0,x.jsx)(D.A,{page:"registersale",productModal:t,productId:lt,data:se,headers:J.length>1?Gt:ea,currency:L,Delete:xa,changeHandler:ha,footer:"registersale",increment:ka,decrement:za,lowUnitpriceProducts:Rt,wholeSale:Lt,selectedFilial:Bt}):(0,x.jsx)(s.A,{page:"registersale",data:se,headers:J.length>1?Gt:ea,currency:L,Delete:xa,changeHandler:ha,footer:"registersale",increment:ka,decrement:za,lowUnitpriceProducts:Rt,wholeSale:Lt,selectedFilial:Bt}):(0,x.jsx)(u.A,{text:a("Sotuvda mahsulotlar qo'shilmagan!")})}),Jt?(0,x.jsxs)("div",{className:"flex justify-center p-[5vw] gap-1 fixed bottom-0 left-0",children:[(0,x.jsx)("button",{type:"button",className:"lg:w-[200px] lg:ms-4 w-[70vw] register-selling-right-accept-btn",onClick:St.length?Aa:sa,children:a("To'lov")}),!St.length&&(0,x.jsx)("button",{type:"button",onClick:pa,className:"lg:w-[50px] flex justify-center w-[20vw] register-selling-right-deny-btn",children:(0,x.jsx)(n.WiF,{size:"1.5rem"})})]}):null]}):null,R?(0,x.jsxs)("div",{className:"fixed w-[100%] h-[100vh] bg-[white] top-0 right-0 z-50 register-selling-right min-w-[20.25rem] bg-white-400 backdrop-blur-[3.125rem] rounded-[0.25rem] flex flex-col gap-[1.25rem]",children:[(0,x.jsx)(M.hvQ,{onClick:()=>Z(!1),className:" absolute right-[20px]  top-[20px]  text-4xl cursor-pointer"}),(0,x.jsxs)("div",{className:"flex mt-[50px] flex-col grow gap-[1.25rem]",children:[(0,x.jsx)(N.A,{placeholder:a("kategoriyani qidirish..."),value:me,onChange:va,onKeyUp:()=>{}}),(0,x.jsx)("div",{className:"grow relative overflow-auto",children:(0,x.jsx)("div",{className:"cards-container absolute left-0 right-[0.125rem] top-0 bottom-0",children:H?(0,x.jsx)("div",{className:"tableContainerPadding",children:(0,x.jsx)(d.A,{})}):ne.length>0?(0,p.map)(ne,(e=>(0,x.jsx)(o.A,{id:e._id,activeCategory:e._id===ue,title:e.name,code:e.code,products:e.products.length,onClick:ga},e._id))):(0,x.jsx)(u.A,{text:a("Kategoriya mavjud emas")})})})]}),(0,x.jsx)("div",{className:"flex gap-[0.625rem]",children:(0,x.jsx)("button",{type:"button",className:"register-selling-right-accept-btn",onClick:()=>Z(!1),children:a("Saqlash")})})]}):null,Jt?null:(0,x.jsxs)("div",{className:"register-selling-right min-w-[20.25rem] bg-white-400 backdrop-blur-[3.125rem] rounded-[0.25rem] flex flex-col gap-[1.25rem]",children:[(0,x.jsxs)("div",{className:"flex flex-col grow gap-[1.25rem]",children:[(0,x.jsx)(N.A,{placeholder:a("kategoriyani qidirish..."),value:me,onChange:va,onKeyUp:()=>{}}),(0,x.jsx)("div",{className:"grow relative overflow-auto",children:(0,x.jsx)("div",{className:"cards-container absolute left-0 right-[0.125rem] top-0 bottom-0",children:H?(0,x.jsx)("div",{className:"tableContainerPadding",children:(0,x.jsx)(d.A,{})}):ne.length>0?(0,p.map)(ne,(e=>(0,x.jsx)(o.A,{id:e._id,activeCategory:e._id===ue,title:e.name,code:e.code,products:e.products.length,onClick:ga},e._id))):(0,x.jsx)(u.A,{text:a("Kategoriya mavjud emas")})})})]}),(0,x.jsxs)("div",{className:"flex gap-[0.625rem]",children:[(0,x.jsx)("button",{type:"button",className:"register-selling-right-accept-btn",onClick:St.length?Aa:sa,children:a("To'lov")}),!St.length&&(0,x.jsx)("button",{type:"button",onClick:pa,className:"register-selling-right-deny-btn",children:(0,x.jsx)(n.WiF,{size:"1.5rem"})})]})]}),(0,x.jsx)(k.A,{onError:()=>{(0,w.lY)(a("Mahsulot kodi o'qilmadi!"),"warning")},onScan:e=>{fa({barcode:e})}}),(0,x.jsx)("div",{className:"hidden",children:(0,x.jsx)(I.E,{ref:Yt,product:vt})})]})}}}]);
//# sourceMappingURL=7882.2b5822fd.chunk.js.map