"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1181,8842],{7275:(e,t,a)=>{a.d(t,{A:()=>r});a(5043);const r=a.p+"static/media/Excel.3a5a1731280185e0e4ae99ee0a4eebfc.svg"},3237:(e,t,a)=>{a.d(t,{A:()=>n});a(5043);var r=a(7275),s=a(9092),o=a(579);const n=function(e){let{onClick:t}=e;const{t:a}=(0,s.B)(["common"]);return(0,o.jsxs)("button",{className:"exportButton ",onClick:t,children:[a("Eksport"),(0,o.jsx)("span",{className:"btn-icon bg-white-900 p-[8px]",children:(0,o.jsx)("img",{src:r.A,alt:"excel icon"})})]})}},5068:(e,t,a)=>{a.d(t,{A:()=>n});a(5043);var r=a(221),s=a(9092),o=a(579);const n=function(e){let{readExcel:t}=e;const{t:a}=(0,s.B)(["common"]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{children:(0,o.jsxs)("label",{htmlFor:"import-field",className:"importButton",children:[a("Import"),(0,o.jsx)("span",{className:"btn-icon bg-white-900 p-[8px] text-primary-800",children:(0,o.jsx)(r.R2D,{size:"1rem"})})]})}),(0,o.jsx)("input",{type:"file",className:"hidden ",id:"import-field",onClick:e=>e.target.value=null,onChange:e=>{const a=e.target.files[0];t(a)}})]})}},5927:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var r=a(7630),s=a(5043),o=a(4012),n=a(3734),l=a(3237),i=a(5068),c=a(4964),d=a(9456),u=a(2039),m=a(7424),g=a(2300),h=a(4235),x=a(8054),p=a(6490),f=a(200),b=a(5618),v=a(1238),j=a(3536),S=a(579);const y=function(){const e=(0,d.wA)(),{products:t,searchedProducts:a,totalSearched:y,total:k,loadingGetAll:P}=(0,d.d4)((e=>e.barcode)),[A,C]=(0,s.useState)(t),[N,E]=(0,s.useState)(k),[B,w]=(0,s.useState)(""),[D,M]=(0,s.useState)(""),[F,Y]=(0,s.useState)(""),[_,z]=(0,s.useState)(""),[W,q]=(0,s.useState)(0),[T,K]=(0,s.useState)(10),[L,O]=(0,s.useState)(null),[$,G]=(0,s.useState)(null),[I,J]=(0,s.useState)(!1),[Q,R]=(0,s.useState)(!1),[H,U]=(0,s.useState)(null),[V,X]=(0,s.useState)([]),[Z,ee]=(0,s.useState)([]),te=()=>{R(!Q),U(null),setTimeout((()=>{X([])}),500)},ae=e=>{e&&(e.autofocus=!0),e&&e.preventDefault(),w(""),M(""),J(!1)},re=t=>{if("Enter"===t.key){q(0);const t={currentPage:0,countPage:T,search:{code:F.replace(/\s+/g," ").trim(),name:_.replace(/\s+/g," ").trim()}};e((0,g.IK)(t))}};return(0,s.useEffect)((()=>{C(t)}),[t]),(0,s.useEffect)((()=>{E(k)}),[k]),(0,s.useEffect)((()=>{const t={currentPage:W,countPage:T,search:{code:"",name:""}};e((0,g.sQ)(t))}),[e,W,T]),(0,S.jsxs)("section",{children:[(0,S.jsx)(b.A,{body:H,title:"Agar shtrix kodni o'chirsangiz uni qayta tiklab bo'lmaydi !",headerText:"Shtrix kodni o'chirishni tasdiqlaysizmi ?",approveFunction:"approve"===H?()=>{const t={_id:$._id,currentPage:W,countPage:T,search:{code:F.replace(/\s+/g," ").trim(),name:_.replace(/\s+/g," ").trim()}};e((0,g.Cp)(t)).then((e=>{let{error:t}=e;t||(te(),G(null))}))}:()=>{const t=Object.keys(V[0]),a=(0,j.map)(Z,(e=>{const t={};for(const a in e)t[a]=e[a].toString().replace(/\s+/g," ").trim();return t}));a.forEach((e=>t.forEach((t=>e.hasOwnProperty(t)&&delete e[t]))));const r={barcodes:[...a],countPage:T,currentPage:W,search:{code:F.replace(/\s+/g," ").trim(),name:_.replace(/\s+/g," ").trim()}};e((0,g.zl)(r)).then((e=>{let{error:t}=e;t||(te(),ee([]),X([]))}))},toggleModal:te,isOpen:Q,excelData:V,headers:[{name:"Shtrix kodi",value:"barcode"},{name:"Maxsulot name",value:"name"}],createdData:Z,setCreatedData:ee}),(0,S.jsxs)("form",{className:"flex items-end gap-[1.25rem] bg-background mainPadding transition ease-linear duration-200 "+(I?"stickyForm":""),children:[(0,S.jsx)(r.A,{type:"number",label:"Shtix kodi",border:!0,maxWidth:"grow",placeholder:"Enter barcode",value:B,onChange:e=>w(e.target.value)}),(0,S.jsx)(r.A,{type:"text",label:"Maxsulot nomi",placeholder:"Enter name",border:!0,maxWidth:"grow",value:D,onChange:e=>M(e.target.value)}),(0,S.jsxs)("div",{className:"flex min-w-[25rem] gap-[1.25rem]",children:[(0,S.jsx)(o.A,{add:!I,edit:I,text:I?"Saqlash":"Qo'shish",onClick:I?t=>{t.preventDefault(),t.autofocus=!0;const{failed:a,message:r}=(0,f.py)([{value:B,message:"Shtrix kod"},{value:D,message:"Maxsulot nomi"}]);if(a)(0,n.EB)(r);else{const t={currentPage:W,countPage:T,barcode:{_id:L._id,barcode:B,name:D.replace(/\s+/g," ").trim()},search:{code:F.replace(/\s+/g," ").trim(),name:_.replace(/\s+/g," ").trim()}};e((0,g.yG)(t)).then((e=>{let{error:t}=e;t||(ae(),O(null))}))}}:t=>{t.preventDefault(),t.autofocus=!0;const{failed:a,message:r}=(0,f.py)([{value:B,message:"Shtrix kod"},{value:D,message:"Maxsulot nomi"}]);if(a)(0,n.EB)(r);else{const t={currentPage:W,countPage:T,barcode:{barcode:B,name:D.replace(/\s+/g," ").trim()},search:{code:F.replace(/\s+/g," ").trim(),name:_.replace(/\s+/g," ").trim()}};e((0,g.EN)(t)).then((e=>{let{error:t}=e;t||ae()}))}}}),(0,S.jsx)(o.A,{text:"Tozalash",onClick:ae})]})]}),(0,S.jsxs)("div",{className:"flex justify-between items-center mainPadding",children:[(0,S.jsxs)("div",{className:"flex gap-[1.5rem]",children:[(0,S.jsx)(l.A,{onClick:()=>{const e=["\u2116","Shtix kodi","Maxsulot Nomi"];if((null===t||void 0===t?void 0:t.length)>0){const a=(0,j.map)(t,((e,t)=>({nth:t+1,code:(null===e||void 0===e?void 0:e.barcode)||"",name:(null===e||void 0===e?void 0:e.name)||""})));(0,f.m1)(a,"Shtrix Kodlar",e)}else(0,n.lY)("Jadvalda ma'lumot mavjud emas !","warning")}}),(0,S.jsx)(i.A,{readExcel:e=>{["xls","xlsx"].includes(e.name.split(".").pop())?new Promise(((t,a)=>{const r=new FileReader;r.readAsArrayBuffer(e),r.onload=e=>{const a=e.target.result,r=v.LF(a,{type:"buffer"}),s=r.SheetNames[0],o=r.Sheets[s],n=v.Wp.sheet_to_json(o);t(n)},r.onerror=e=>{(0,n.lY)("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430","error"),a(e)}})).then((e=>{e.length>0?(X(e),U("import"),R(!0)):(0,n.lY)("Jadvalda ma`lumot mavjud emas","error")})):(0,n.lY)("Fayl formati noto'g'ri","error")}})]}),(0,S.jsx)("h3",{className:"text-blue-900 text-[xl] leading-[1.875rem]",children:"Maxsulotlar"}),(0!==N||0!==y)&&(0,S.jsx)(c.A,{countPage:Number(T),totalDatas:y||N,currentPage:W,setCurrentPage:q})]}),(0,S.jsx)(m.A,{filterBy:["total","barcode","name"],filterByTotal:e=>{let{value:t}=e;K(t),q(0)},filterByName:r=>{let s=r.target.value,o=s.toLowerCase().replace(/\s+/g," ").trim();if(z(s),(a.length>0||y>0)&&e((0,g.$g)()),""===o)C(t),E(k);else{const e=(0,j.filter)(t,(e=>e.name.toLowerCase().includes(o)));C(e),E(e.length)}},filterByBarcode:r=>{let s=r.target.value,o=s.replace(/\s+/g," ").trim();if(Y(s),(a.length>0||y>0)&&e((0,g.$g)()),""===o)C(t),E(k);else{const e=(0,j.filter)(t,(e=>e.barcode.includes(o)));C(e),E(e.length)}},barcode:F,searchByName:_,filterByCodeAndNameAndCategoryWhenPressEnter:re,filterByBarcodeWhenPressEnter:re}),(0,S.jsx)("div",{className:"tableContainerPadding",children:P?(0,S.jsx)(h.A,{}):0===A.length&&0===a.length?(0,S.jsx)(x.A,{text:"Maxsulot mavjud emas"}):(0,S.jsx)(u.A,{headers:[{title:"\u2116"},{title:"Barcode"},{title:"Name"},{title:""}],data:a.length>0?a:A,currentPage:W,countPage:T,page:"barcode",Edit:e=>{J(!0),w(e.barcode),M(e.name),O(e)},Delete:e=>{U("approve"),R(!0),G(e)}})}),(0,S.jsx)(p.A,{onError:e=>{e.toString().length>4&&(0,n.lY)("Maxsulot kodi o'qilmadi!","error")},onScan:t=>{const a={code:t};e((0,g.nN)(a)).then((e=>{let{error:a}=e;a?/^[0-9]*$/.test(t)?w(t):(0,n.lY)("Shtrix kod formati noto`g`ri","error",{autoClose:2e3,position:"bottom-right"}):(0,n.lY)("Bunday shtrix kodli maxsulot mavjud","error",{autoClose:2e3,position:"bottom-right"})}))},stopPropagation:!0,preventDefault:!0,onKeyDetect:e=>{e.preventDefault()}})]})}}}]);
//# sourceMappingURL=8842.668a33a2.chunk.js.map