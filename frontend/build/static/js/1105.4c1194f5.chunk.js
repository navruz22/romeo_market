"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1105,1181],{7037:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var a=r(5043),s=r(7424),l=r(2039),i=r(4012),n=r(9456),c=r(1688),o=r(4964),d=r(4235),u=r(8054),m=r(5618),g=r(3734),h=r(3536),p=r(2096),f=r(579);const k=()=>{const e=(0,n.wA)(),{markets:t,total:r,searchedMarkets:k,totalSearched:v,loadingGetMarkets:x,loadingDeleteMarket:P}=(0,n.d4)((e=>e.adminmarkets)),[y,S]=(0,a.useState)(t),[j,w]=(0,a.useState)(k),[N,D]=(0,a.useState)(r),[C,M]=(0,a.useState)("10"),[b,A]=(0,a.useState)(0),[B,E]=(0,a.useState)(""),[T,_]=(0,a.useState)(""),[L,K]=(0,a.useState)(!1),[q,F]=(0,a.useState)(""),[O,W]=(0,a.useState)(1),[z,G]=(0,a.useState)(!1),[I,R]=(0,a.useState)(null),[Y,Z]=(0,a.useState)(""),[$,H]=(0,a.useState)(null),[J,Q]=(0,a.useState)(null),[U,V]=(0,a.useState)(null),X=()=>{K(!1),setTimeout((()=>{F(""),H(null),Q(null),Z(""),R(null),W(1),G(!1)}),100)},ee=t=>{if("Enter"===t.key){A(0);const t={currentPage:0,countPage:C,search:{name:B.replace(/\s+/g," ").trim(),director:T.replace(/\s+/g," ").trim()}};e((0,c.th)(t))}};return(0,a.useEffect)((()=>{const t={currentPage:b,countPage:C,search:{name:B.replace(/\s+/g," ").trim(),director:T.replace(/\s+/g," ").trim()}};e((0,c.sv)(t))}),[e,b,C]),(0,a.useEffect)((()=>{S(t)}),[t]),(0,a.useEffect)((()=>{w(k)}),[k]),(0,a.useEffect)((()=>{D(r)}),[r]),(0,f.jsxs)("section",{children:[P?(0,f.jsx)(d.A,{}):(0,f.jsx)(m.A,{title:"approve"===q&&(0,p.t)("O'chirilgan do'kon ma'lumotlarini tiklashning imkoni mavjud emas"),headerText:"approve"===q&&(0,p.t)("Diqqat do'kon ma'lumotlarni o'chirishni tasdiqlaysizmi?"),body:q,isOpen:L,toggleModal:J||1===O?X:()=>{},addMarket:{currentStep:O,bgActive:z,handleNext:J?t=>{const r={market:{...t,_id:J._id}};e((0,c.Td)(r)).then((t=>{let{error:r,payload:a}=t;if(!r){var s;W(O+1),G(!0),Z((null===J||void 0===J||null===(s=J.director)||void 0===s?void 0:s.image)||""),R(a._id);const t={currentPage:b,countPage:C,search:{name:B.replace(/\s+/g," ").trim(),director:T.replace(/\s+/g," ").trim()}};e((0,c.sv)(t))}}))}:t=>{e((0,c.vj)(t)).then((e=>{let{error:t,payload:r}=e;t||(W(O+1),G(!0),Z(""),R(r._id))}))},handleFinish:J?t=>{const r={...t,image:Y,market:I,_id:J.director._id};e((0,c.Dh)(r)).then((t=>{let{error:r}=t;if(!r){const t={currentPage:b,countPage:C,search:{name:B.replace(/\s+/g," ").trim(),director:T.replace(/\s+/g," ").trim()}};Z(""),W(1),G(!1),R(null),(0,g.$f)(),e((0,c.sv)(t)),X()}}))}:t=>{const r={...t,image:Y,market:I};e((0,c.bF)(r)).then((t=>{let{error:r}=t;if(!r){const t={currentPage:b,countPage:C,search:{name:B.replace(/\s+/g," ").trim(),director:T.replace(/\s+/g," ").trim()}};Z(""),W(1),G(!1),R(null),(0,g.KZ)(),e((0,c.sv)(t)),X()}}))},image:Y,setImage:Z,editedMarket:J},product:$,approveFunction:U?()=>{e((0,c.O9)({id:U._id})).then((t=>{let{error:r,payload:a}=t;if(!r){const t={currentPage:b,countPage:C,search:{name:B.replace(/\s+/g," ").trim(),director:T.replace(/\s+/g," ").trim()}};V(null),K(!1),F(""),e((0,c.sv)(t))}}))}:()=>{const t={currentPage:b,countPage:C,search:{name:B.replace(/\s+/g," ").trim(),director:T.replace(/\s+/g," ").trim()}};e((0,c.sv)(t)),X()}}),(0,f.jsx)("div",{className:"mainPadding",children:(0,f.jsx)(i.A,{text:"Yangi do'kon qo`shish",add:!0,onClick:()=>{F("addMarket"),K(!0)}})}),(0,f.jsxs)("div",{className:"flex justify-between items-center mainPadding",children:[(0,f.jsx)("h3",{className:"text-blue-900 text-[xl] leading-[1.875rem]",children:(0,p.t)("Do'konlar")}),(0!==N||0!==v)&&(0,f.jsx)(o.A,{countPage:Number(C),totalDatas:v||N,currentPage:b,setCurrentPage:A})]}),(0,f.jsx)(s.A,{filterBy:["total","marketName","directorName"],filterByMarketName:a=>{let s=a.target.value,l=s.toLowerCase().replace(/\s+/g," ").trim();if(E(s),(j.length>0||v>0)&&e((0,c.KK)()),""===l)S(t),D(r);else{const e=(0,h.filter)(t,(e=>e.name.toLowerCase().includes(l)));S(e),D(e.length)}},filterByDirectorName:a=>{let s=a.target.value,l=s.toLowerCase().replace(/\s+/g," ").trim();if(_(s),(j.length>0||v>0)&&e((0,c.KK)()),""===l)S(t),D(r);else{const e=(0,h.filter)(t,(e=>e.director.firstname.toLowerCase().includes(l)||e.director.lastname.toLowerCase().includes(l)));S(e),D(e.length)}},searchByDirectorName:T,searchByMarketName:B,filterByDirectorNameWhenPressEnter:ee,filterByMarketNameWhenPressEnter:ee,filterByTotal:e=>{let{value:t}=e;M(t),A(0)}}),(0,f.jsx)("div",{className:"tableContainerPadding",children:x?(0,f.jsx)(d.A,{}):0===y.length&&0===j.length?(0,f.jsx)(u.A,{text:"Do'konlar mavjud emas"}):(0,f.jsx)(l.A,{page:"adminProduct",data:j.length>0?j:y,headers:[{title:"\u2116",styles:"text-center"},{title:"Logotip",styles:"w-[4.25rem]"},{title:"Do'kon nomi",styles:"text-center"},{title:"Director",styles:"text-center"},{title:"Telefon",styles:"w-[7.875rem]"},{title:"Sa'nasi",styles:""},{title:"Turi",styles:"text-center w-[3.1875rem]"},{title:"",styles:"w-[3rem]"},{title:"Delete",styles:"w-[3rem]"}],currentPage:b,countPage:C,onClickTableRow:e=>{H(e),F("filterBranch"),K(!0)},Edit:e=>{Q(e),Z(null!==e&&void 0!==e&&e.image?null===e||void 0===e?void 0:e.image:""),F("addMarket"),K(!0)},handleDelete:e=>{V(e),F("approve"),K(!0)}})})]})}}}]);
//# sourceMappingURL=1105.4c1194f5.chunk.js.map