"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1181,2440],{6270:(e,t,a)=>{a.d(t,{A:()=>g});var s=a(221),n=(a(5043),a(579));const l=e=>{let{onClick:t,text:a,type:l,active:r}=e;const o={cash:(0,n.jsx)(s.iS_,{className:"paymentsstyle",size:"1.3125rem"}),card:(0,n.jsx)(s.dBf,{className:"paymentsstyle",size:"1.3125rem"}),transfer:(0,n.jsx)(s.whc,{className:"paymentsstyle",size:"1.3125rem"}),mixed:(0,n.jsx)(s.m_O,{className:"paymentsstyle",size:"1.3125rem"})};return(0,n.jsxs)("button",{onClick:()=>t(l),className:"salestyle "+(r?"bg-primary-700 text-white-900":"bg-[#E9ECEB]"),children:[o[l],a]})},r=e=>{let{onClick:t,text:a}=e;return(0,n.jsxs)("button",{onClick:t,className:"discountstyle w-full h-[3.25rem] bg-warning-500 text-white-900 duration-200 shadow-lg",children:[(0,n.jsx)(s.YbJ,{className:"discstyle",size:"1.5rem"}),a]})},o=e=>{let{onClick:t,text:a,onDoubleClick:l}=e;return(0,n.jsxs)("button",{onClick:t,onDoubleClick:l,className:"paymentstyle grow",children:[(0,n.jsx)(s.SXw,{className:"paystyle",size:"1.3125rem"}),a]})};var i=a(9456),c=a(1318),u=a(2234);const m=e=>(0,n.jsx)(u.c.DropdownIndicator,{...e,children:(0,n.jsx)(s.QDT,{size:"0.625rem"})}),d={control:e=>({...e,borderTopRightRadius:".125rem",borderBottomRightRadius:".125rem",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",fontSize:"0.75rem",fontWeight:"400",padding:"0.375rem 0.3125rem",color:"#071F45",outline:"none",border:"none",boxShadow:"none",cursor:"pointer",height:"100%",backgroundColor:"#F79009",minHeight:"100%","&:hover":{backgroundColor:"#DC6803"}}),container:e=>({...e,height:"100%",position:"absolute",right:0,width:"3rem",top:0,bottom:0}),option:(e,t)=>{let{isFocused:a,isSelected:s}=t;return{...e,fontSize:".75rem",fontWeight:"400",color:s||a?"#ffffff":"#071F45",backgroundColor:s?"#0090A3":a?"#00B4CC":"#ffffff",transition:"all 0.2s ease",overflow:"hidden",cursor:"pointer",textAlign:"center"}},menu:e=>({...e,overflow:"hidden"}),singleValue:e=>({...e,fontSize:".75rem",fontWeight:"400",color:"#ffffff",margin:0,textAlign:"center"}),valueContainer:e=>({...e,padding:0}),indicatorsContainer:e=>({...e}),dropdownIndicator:e=>({...e,padding:0,color:"#ffffff"})};var h=a(2096);const b=function(e){let{value:t,onChange:a,option:s,onSelect:l}=e;const{currencyType:r}=(0,i.d4)((e=>e.currency)),o=[{value:r,label:r},{value:"%",label:"%"}];return(0,n.jsxs)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:[(0,n.jsx)("input",{className:"w-[8.6875rem] placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-l-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:`${(0,h.t)("misol")}: 100 000 000`,type:"number",value:t,onChange:e=>{a(e.target.value)},onWheel:e=>e.target.blur(),min:0}),(0,n.jsx)(c.Ay,{onChange:l,styles:d,isSearchable:!1,value:s,options:o,components:{IndicatorSeparator:()=>null,DropdownIndicator:m}})]})},x=e=>{let{value:t,onChange:a,option:s,onSelect:l}=e;return(0,n.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,n.jsxs)("div",{className:"text-black-700 text-[0.875rem]",children:[(0,h.t)("Chegirma")," :"]}),(0,n.jsx)(b,{onChange:a,onSelect:l,value:t,option:s})]})};var p=a(6899);const y=e=>{let{onClick:t}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("button",{onClick:t,className:"exitbtn",children:(0,n.jsx)(s.FyX,{size:"0.75rem"})})})};const f=function(e){let{mix:t,value:a,onChange:s,label:l,onClose:r,keyInput:o,placeholder:i,type:c}=e;return(0,n.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,n.jsxs)("span",{className:"custom-payment-text-style",children:[l," :"]}),(0,n.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,n.jsx)(p.A,{placeholder:i||`${(0,h.t)("misol")}: 100 000 000`,type:c||"number",value:a,onChange:e=>{s(e.target.value,o)}}),t&&(0,n.jsx)(y,{onClick:()=>r(o)})]})]})};var N=a(3216);const g=function(e){let{returned:t,active:a,togglePaymentModal:c,type:u="cash",cash:m="",card:d="",transfer:b="",discount:p,hasDiscount:y,debt:g,allPayment:C,paid:v=0,client:j="",onChange:S,onClose:k,changePaymentType:w,discountSelectOption:D,handleClickDiscountBtn:z,handleChangeDiscountSelectOption:I,handleChangeDiscount:M,handleClickPay:P,saleComment:T,changeComment:O,onDoubleClick:U,clickdelay:A}=e;const Q=(0,N.zy)(),q=()=>{switch(u){case"card":return(0,n.jsx)(f,{value:d,keyInput:u,onChange:S,onClose:k,label:(0,h.t)("Plastik")},"sale-card1");case"transfer":return(0,n.jsx)(f,{value:b,keyInput:u,onChange:S,onClose:k,label:(0,h.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,h.t)("Naqd"),key:"cash",value:m},{label:(0,h.t)("Plastik"),key:"card",value:d},{label:(0,h.t)("O`tkazma"),key:"transfer",value:b}].map((e=>(0,n.jsx)(f,{value:e.value,keyInput:e.key,onChange:S,onClose:k,label:(0,h.t)(e.label)},`sale-${e.key}`)));default:return(0,n.jsx)(f,{value:m,onChange:S,keyInput:u,onClose:k,label:(0,h.t)("Naqd")},"sale-cash")}},{currencyType:B}=(0,i.d4)((e=>e.currency));return(0,n.jsxs)("section",{className:"fixed transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 "+(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:c,children:[(0,n.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,h.t)("")}),(0,n.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 "+(a?"translate-x-0":"translate-x-full"),onClick:e=>e.stopPropagation(),autoFocus:!0,children:[(0,n.jsxs)("div",{className:"top-payment w-full",children:[j&&(0,n.jsxs)("div",{className:"customer-head-icon",children:[(0,n.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,n.jsx)(s.uSr,{className:"mr-[0.75rem]"}),(0,n.jsxs)("span",{children:[(0,h.t)("Mijoz")," : "]})]}),(0,n.jsx)("h3",{className:"text-[0.875rem]",children:j})]}),(0,n.jsxs)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:[C.toLocaleString("ru-Ru")," ",B]}),(0,n.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&q(),(Q.pathname.includes("/kassa/debts")||Q.pathname.includes("/qarzdorlar")||Q.pathname.includes("/maxsulotlar/qabul/qabulqilish")||Q.pathname.includes("/maxsulotlar/qabul/qabullar"))&&q(),(0,n.jsx)(f,{value:T,keyInput:u,onChange:O,onClose:k,label:(0,h.t)("Izoh"),placeholder:(0,h.t)("misol: qarzga olindi"),type:"text"},"sale-card"),y&&(0,n.jsx)(x,{value:p,onChange:M,option:D,onSelect:I}),(0,n.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,n.jsxs)("span",{className:"custom-payment-text-style",children:[(0,h.t)("Qarzlar")," :"," "]}),(0,n.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[g.toLocaleString("ru-Ru")," ",B]})]}),(0,n.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,n.jsxs)("span",{className:"custom-payment-text-style",children:[C<0?(0,h.t)("Qaytarilayotgan"):(0,h.t)("To`lanayotgan")," ",":"," "]}),(0,n.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[v.toLocaleString("ru-Ru")," ",B]})]})]})]}),(0,n.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,n.jsxs)("div",{className:"custom-paymet-btn",children:[(0,n.jsx)(l,{text:(0,h.t)("Naqd"),type:"cash",active:"cash"===u,onClick:w}),(0,n.jsx)(l,{text:(0,h.t)("Plastik"),type:"card",active:"card"===u,onClick:w}),(0,n.jsx)(l,{text:(0,h.t)("O'tkazma"),type:"transfer",active:"transfer"===u,onClick:w}),!t&&(0,n.jsx)(l,{text:(0,h.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:w}),Q.pathname.includes("/kassa/debts")&&(0,n.jsx)(l,{text:(0,h.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:w})]}),!t&&(0,n.jsx)(r,{text:(0,h.t)("Chegirma"),onClick:z}),(0,n.jsx)(o,{text:(0,h.t)("To'lash"),onClick:A?()=>console.log("wait"):P})]})]})]})}},5018:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(5043),n=a(9456),l=a(200),r=a(5618),o=a(6270),i=a(7424),c=a(2039),u=a(3734),m=a(6752),d=a(3536),h=a(579);const b=()=>{const e=(0,n.wA)(),{datas:t}=(0,n.d4)((e=>e.reports)),{currencyType:a,currency:b}=(0,n.d4)((e=>e.currency)),{user:x}=(0,n.d4)((e=>e.login)),[p,y]=(0,s.useState)([]),[f,N]=(0,s.useState)([]),[g,C]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[S,k]=(0,s.useState)("cash"),[w,D]=(0,s.useState)(""),[z,I]=(0,s.useState)(""),[M,P]=(0,s.useState)(""),[T,O]=(0,s.useState)(""),[U,A]=(0,s.useState)(""),[Q,q]=(0,s.useState)(""),[B,R]=(0,s.useState)(""),[F,L]=(0,s.useState)(""),[E,$]=(0,s.useState)(""),[H,W]=(0,s.useState)(!1),[_,J]=(0,s.useState)(null),[Z,X]=(0,s.useState)(""),[K,V]=(0,s.useState)({label:"%",value:"%"}),[Y,G]=(0,s.useState)(0),[ee,te]=(0,s.useState)(0),[ae,se]=(0,s.useState)(0),[ne,le]=(0,s.useState)(0),[re,oe]=(0,s.useState)(0),[ie,ce]=(0,s.useState)(0),[ue,me]=(0,s.useState)(""),[de,he]=(0,s.useState)(null),[be,xe]=(0,s.useState)(null),pe=e=>{j(e?!v:e),k("cash"),W(!1),R(""),L(""),$(""),G(0),te(0),V({label:"%",value:"%"})},ye=e=>Math.round(1e3*e)/1e3,fe=e=>Math.round(e),Ne=()=>{C(!1),setTimeout((()=>{me("")}),500)},[ge,Ce]=(0,s.useState)(new Date((new Date).setMonth((new Date).getMonth()-3))),[ve,je]=(0,s.useState)(new Date);(0,s.useEffect)((()=>{e((0,m.N7)({startDate:ge,endDate:ve}))}),[e,ge,ve]),(0,s.useEffect)((()=>{N(t),y(t)}),[t]);return(0,h.jsxs)("div",{className:"relative overflow-auto h-full pt-[10px]",children:[(0,h.jsx)("div",{className:"flex items-center justify-between",children:(0,h.jsx)(i.A,{filterBy:["startDate","endDate","id","clientName"],filterById:e=>{N([...(0,d.filter)([...p],(t=>t.id.includes(e.target.value)))])},filterByClientName:e=>{N([...(0,d.filter)([...p],(t=>t.client&&t.client.name.toLowerCase().includes(e.target.value.toLowerCase())))])},startDate:ge,endDate:ve,setStartDate:e=>{Ce(new Date(e.setHours(0,0,0)))},setEndDate:e=>{je(new Date(e.setHours(23,59,59)))}})}),(0,h.jsx)("div",{className:"tableContainerPadding",children:f.length>0&&(0,h.jsx)(c.A,{page:"debts",headers:[{title:"\u2116"},{title:"Sana"},{title:"ID"},{title:"Mijoz"},{title:"Izoh"},{title:"Jami"},{title:"Qarz"},{title:""}],data:f,currency:a,Pay:e=>{const t=e.debt,a=e.debtuzs;se(t),le(a),D(t),I(a),oe(t),ce(a),J(e._id),j(!0)},Print:e=>{me("allChecks"),xe(e),C(!0)}})}),(0,h.jsx)("div",{children:(0,h.jsx)(o.A,{returned:!0,type:S,active:v,togglePaymentModal:pe,changePaymentType:e=>{const t=ae-Number(B),a=ne-Number(F);if(S!==e)switch(k(e),e){case"cash":D(t),I(a),P(""),O(""),A(""),q(""),oe(t),ce(a),G(0),te(0);break;case"card":P(t),O(a),D(""),I(""),A(""),q(""),oe(t),ce(a),G(0),te(0);break;case"transfer":A(t),q(a),D(""),I(""),P(""),O(""),oe(t),ce(a),G(0),te(0);break;default:D(""),I(""),P(""),O(""),A(""),q(""),oe(0),ce(0),G(ae-Number(B)),te(ne-Number(F))}},onChange:(e,t)=>{((e,t)=>{const s=ae-Number(B),n=ne-Number(F);if("USD"===a)if("cash"===t){const t=Number(e)+Number(M)+Number(U),a=Number(z)+Number(T)+Number(Q);t<=s?(D(e),I((0,l.IQ)(e,b)),G(ye(s-t)),te((0,l.IQ)(s-t,b)),oe(t),ce(a)):(0,u.OC)()}else if("card"===t){const t=Number(e)+Number(w)+Number(U),a=Number(z)+Number(T)+Number(Q);t<=s?(P(e),O((0,l.IQ)(e,b)),G(ye(s-t)),te((0,l.IQ)(s-t,b)),oe(t),ce(a)):(0,u.OC)()}else{const t=Number(e)+Number(w)+Number(M),a=Number(z)+Number(T)+Number(Q);t<=s?(A(e),q((0,l.IQ)(e,b)),G(ye(s-t)),te((0,l.IQ)(s-t,b)),oe(t),ce(a)):(0,u.OC)()}else if("cash"===t){const t=Number(e)+Number(T)+Number(Q),a=Number(w)+Number(M)+Number(U);t<=n?(I(e),D((0,l.Ch)(e,b)),G((0,l.Ch)(n-t,b)),te(fe(n-t)),oe(a),ce(t)):(0,u.OC)()}else if("card"===t){const t=Number(e)+Number(z)+Number(Q);t<=n?(P((0,l.Ch)(e,b)),O(e),G((0,l.Ch)(n-t,b)),te(fe(n-t)),oe((0,l.Ch)(t,b)),ce(t)):(0,u.OC)()}else{const t=Number(e)+Number(z)+Number(T),a=Number(w)+Number(M)+Number(U);t<=n?(A((0,l.Ch)(e,b)),q(e),G((0,l.Ch)(n-t,b)),te(fe(n-t)),oe(a),ce(t)):(0,u.OC)()}})(e,t)},client:Z,allPayment:"USD"===a?ae:ne,card:"USD"===a?M:T,cash:"USD"===a?w:z,debt:"USD"===a?Y:ee,discount:"USD"===a?"USD"===K.value?B:E:"UZS"===K.value?F:E,handleChangeDiscount:e=>{const t=Math.round(5*ae/100*10)/10,a=Math.round(5*ne/100*10)/10;if("USD"===K.value)e>t?(0,u.nN)(`${t} USD`):(R(e),L((0,l.IQ)(e,b)),$(Math.round(ae*e/100*10)/10),G(ae-e),te((0,l.IQ)(ae-e,b)));else if("UZS"===K.value)e>a?(0,u.nN)(`${a} UZS`):(L(e),R((0,l.Ch)(e,b)),$(Math.round(ne*e/100*10)/10),G((0,l.Ch)(ne-e,b)),te(ne-e));else if(e>5)(0,u.nN)("5%");else{const t=Math.round(ae*e/100*10)/10,a=Math.round(ne*e/100*10)/10;$(e),R(t),L(a),G(ye(ae-t)),te(fe(ne-a)),oe(ae-t),ce(ne-a)}D(""),I(""),P(""),O(""),A(""),q(""),oe(0),ce(0)},hasDiscount:H,transfer:"USD"===a?U:Q,handleClickDiscountBtn:()=>{W(!H),"cash"===S?(D(ae),I(ne),oe(ae),ce(ne)):"card"===S?(P(ae),O(ne),oe(ae),ce(ne)):"transfer"===S?(A(ae),q(ne),oe(ae),ce(ne)):(D(""),I(""),P(""),O(""),A(""),q(""),oe(0),ce(0),G(ae),te(ne)),R(""),L(""),$("")},discountSelectOption:K,handleChangeDiscountSelectOption:e=>{K.value!==e.value&&(V(e),R(""),L(""),$(""),D(""),I(""),P(""),O(""),A(""),q(""),G(ae),te(ne),oe(0),ce(0))},paid:"USD"===a?re:ie,handleClickPay:()=>{me("complete"),C(!0)}})}),(0,h.jsx)(r.A,{body:ue,toggleModal:"sell"===ue?()=>{me(""),C(!g),setTimeout((()=>{}),500)}:"complete"===ue?Ne:()=>{C(!g),me(""),he(null)},approveFunction:()=>{Ne();const t={payment:{totalprice:Number(ae),totalpriceuzs:Number(ne),type:S,cash:Number(w),cashuzs:Number(z),card:Number(M),carduzs:Number(T),transfer:Number(U),transferuzs:Number(Q),discount:Number(B),discountuzs:Number(F)},user:x._id,saleconnectorid:_};e((0,m.IH)(t)).then((t=>{let{payload:a}=t;const s=new Date((new Date).setMonth((new Date).getMonth()-3)),n=new Date;he(a),e((0,m.N7)({startDate:s,endDate:n})),setTimeout((()=>{var e;me("checkPayment"),C(!0),D(""),I(""),P(""),O(""),A(""),q(""),G(0),te(0),oe(0),ce(0),X(""),J(null),pe(e)}),500)}))},isOpen:g,payment:de,headers:[{title:"\u2116"},{title:"Kodi"},{title:"Nomi"},{title:"Soni"},{title:"Narxi"},{title:"Jami",styles:"w-[10rem]"},{title:""}],printedSelling:be,headerText:"complete"===ue&&"To'lovni amalga oshirishni tasdiqlaysizmi ?",title:"complete"===ue&&"To'lovni amalga oshirgach bu ma`lumotlarni o`zgaritirb bo`lmaydi !"})]})}}}]);
//# sourceMappingURL=2440.39707eef.chunk.js.map