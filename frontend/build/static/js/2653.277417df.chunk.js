"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1181,2653],{3307:(e,t,a)=>{a.d(t,{A:()=>r});a(5043);var s=a(221),l=a(579);const r=e=>{let{text:t,onClick:a}=e;return(0,l.jsxs)("button",{onClick:a,className:"bg-primary-800 flex items-center gap-[0.3125rem] justify-center p-[10px] text-white-900 rounded-[0.5rem] shadow-[0_5px_15px_rgba(0,0,0,0.15)] transition-all ease-in-out duration-200 active:shadow-none hover:bg-primary-900",children:[(0,l.jsx)(s.zo4,{className:"text-white-900",size:"1.125rem"})," ",t&&(0,l.jsx)("span",{className:"text-sm leading-[1.125rem]",children:t})]})}},1204:(e,t,a)=>{a.d(t,{A:()=>n});a(5043);var s=a(5475),l=a(221),r=a(579);const n=e=>{let{link:t}=e;return(0,r.jsx)(s.N_,{to:t,className:"lg:mt-[10px] lg:ms-[20px] mt-[50px] ms-[30px] linktoback",children:(0,r.jsx)(l.feN,{className:"mt-[]"})})}},6270:(e,t,a)=>{a.d(t,{A:()=>j});var s=a(221),l=(a(5043),a(579));const r=e=>{let{onClick:t,text:a,type:r,active:n}=e;const i={cash:(0,l.jsx)(s.iS_,{className:"paymentsstyle",size:"1.3125rem"}),card:(0,l.jsx)(s.dBf,{className:"paymentsstyle",size:"1.3125rem"}),transfer:(0,l.jsx)(s.whc,{className:"paymentsstyle",size:"1.3125rem"}),mixed:(0,l.jsx)(s.m_O,{className:"paymentsstyle",size:"1.3125rem"})};return(0,l.jsxs)("button",{onClick:()=>t(r),className:"salestyle "+(n?"bg-primary-700 text-white-900":"bg-[#E9ECEB]"),children:[i[r],a]})},n=e=>{let{onClick:t,text:a}=e;return(0,l.jsxs)("button",{onClick:t,className:"discountstyle w-full h-[3.25rem] bg-warning-500 text-white-900 duration-200 shadow-lg",children:[(0,l.jsx)(s.YbJ,{className:"discstyle",size:"1.5rem"}),a]})},i=e=>{let{onClick:t,text:a,onDoubleClick:r}=e;return(0,l.jsxs)("button",{onClick:t,onDoubleClick:r,className:"paymentstyle grow",children:[(0,l.jsx)(s.SXw,{className:"paystyle",size:"1.3125rem"}),a]})};var c=a(9456),o=a(1318),u=a(2234);const d=e=>(0,l.jsx)(u.c.DropdownIndicator,{...e,children:(0,l.jsx)(s.QDT,{size:"0.625rem"})}),m={control:e=>({...e,borderTopRightRadius:".125rem",borderBottomRightRadius:".125rem",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",fontSize:"0.75rem",fontWeight:"400",padding:"0.375rem 0.3125rem",color:"#071F45",outline:"none",border:"none",boxShadow:"none",cursor:"pointer",height:"100%",backgroundColor:"#F79009",minHeight:"100%","&:hover":{backgroundColor:"#DC6803"}}),container:e=>({...e,height:"100%",position:"absolute",right:0,width:"3rem",top:0,bottom:0}),option:(e,t)=>{let{isFocused:a,isSelected:s}=t;return{...e,fontSize:".75rem",fontWeight:"400",color:s||a?"#ffffff":"#071F45",backgroundColor:s?"#0090A3":a?"#00B4CC":"#ffffff",transition:"all 0.2s ease",overflow:"hidden",cursor:"pointer",textAlign:"center"}},menu:e=>({...e,overflow:"hidden"}),singleValue:e=>({...e,fontSize:".75rem",fontWeight:"400",color:"#ffffff",margin:0,textAlign:"center"}),valueContainer:e=>({...e,padding:0}),indicatorsContainer:e=>({...e}),dropdownIndicator:e=>({...e,padding:0,color:"#ffffff"})};var h=a(2096);const x=function(e){let{value:t,onChange:a,option:s,onSelect:r}=e;const{currencyType:n}=(0,c.d4)((e=>e.currency)),i=[{value:n,label:n},{value:"%",label:"%"}];return(0,l.jsxs)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:[(0,l.jsx)("input",{className:"w-[8.6875rem] placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-l-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:`${(0,h.t)("misol")}: 100 000 000`,type:"number",value:t,onChange:e=>{a(e.target.value)},onWheel:e=>e.target.blur(),min:0}),(0,l.jsx)(o.Ay,{onChange:r,styles:m,isSearchable:!1,value:s,options:i,components:{IndicatorSeparator:()=>null,DropdownIndicator:d}})]})},f=e=>{let{value:t,onChange:a,option:s,onSelect:r}=e;return(0,l.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,l.jsxs)("div",{className:"text-black-700 text-[0.875rem]",children:[(0,h.t)("Chegirma")," :"]}),(0,l.jsx)(x,{onChange:a,onSelect:r,value:t,option:s})]})};var p=a(6899);const b=e=>{let{onClick:t}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("button",{onClick:t,className:"exitbtn",children:(0,l.jsx)(s.FyX,{size:"0.75rem"})})})};const g=function(e){let{mix:t,value:a,onChange:s,label:r,onClose:n,keyInput:i,placeholder:c,type:o}=e;return(0,l.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,l.jsxs)("span",{className:"custom-payment-text-style",children:[r," :"]}),(0,l.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,l.jsx)(p.A,{placeholder:c||`${(0,h.t)("misol")}: 100 000 000`,type:o||"number",value:a,onChange:e=>{s(e.target.value,i)}}),t&&(0,l.jsx)(b,{onClick:()=>n(i)})]})]})};var y=a(3216);const j=function(e){let{returned:t,active:a,togglePaymentModal:o,type:u="cash",cash:d="",card:m="",transfer:x="",discount:p,hasDiscount:b,debt:j,allPayment:N,paid:S=0,client:v="",onChange:k,onClose:D,changePaymentType:w,discountSelectOption:z,handleClickDiscountBtn:C,handleChangeDiscountSelectOption:U,handleChangeDiscount:E,handleClickPay:R,saleComment:P,changeComment:L,onDoubleClick:I,clickdelay:A}=e;const q=(0,y.zy)(),O=()=>{switch(u){case"card":return(0,l.jsx)(g,{value:m,keyInput:u,onChange:k,onClose:D,label:(0,h.t)("Plastik")},"sale-card1");case"transfer":return(0,l.jsx)(g,{value:x,keyInput:u,onChange:k,onClose:D,label:(0,h.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,h.t)("Naqd"),key:"cash",value:d},{label:(0,h.t)("Plastik"),key:"card",value:m},{label:(0,h.t)("O`tkazma"),key:"transfer",value:x}].map((e=>(0,l.jsx)(g,{value:e.value,keyInput:e.key,onChange:k,onClose:D,label:(0,h.t)(e.label)},`sale-${e.key}`)));default:return(0,l.jsx)(g,{value:d,onChange:k,keyInput:u,onClose:D,label:(0,h.t)("Naqd")},"sale-cash")}},{currencyType:T}=(0,c.d4)((e=>e.currency));return(0,l.jsxs)("section",{className:"fixed transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 "+(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:o,children:[(0,l.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,h.t)("")}),(0,l.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 "+(a?"translate-x-0":"translate-x-full"),onClick:e=>e.stopPropagation(),autoFocus:!0,children:[(0,l.jsxs)("div",{className:"top-payment w-full",children:[v&&(0,l.jsxs)("div",{className:"customer-head-icon",children:[(0,l.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,l.jsx)(s.uSr,{className:"mr-[0.75rem]"}),(0,l.jsxs)("span",{children:[(0,h.t)("Mijoz")," : "]})]}),(0,l.jsx)("h3",{className:"text-[0.875rem]",children:v})]}),(0,l.jsxs)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:[N.toLocaleString("ru-Ru")," ",T]}),(0,l.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&O(),(q.pathname.includes("/kassa/debts")||q.pathname.includes("/qarzdorlar")||q.pathname.includes("/maxsulotlar/qabul/qabulqilish")||q.pathname.includes("/maxsulotlar/qabul/qabullar"))&&O(),(0,l.jsx)(g,{value:P,keyInput:u,onChange:L,onClose:D,label:(0,h.t)("Izoh"),placeholder:(0,h.t)("misol: qarzga olindi"),type:"text"},"sale-card"),b&&(0,l.jsx)(f,{value:p,onChange:E,option:z,onSelect:U}),(0,l.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,l.jsxs)("span",{className:"custom-payment-text-style",children:[(0,h.t)("Qarzlar")," :"," "]}),(0,l.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[j.toLocaleString("ru-Ru")," ",T]})]}),(0,l.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,l.jsxs)("span",{className:"custom-payment-text-style",children:[N<0?(0,h.t)("Qaytarilayotgan"):(0,h.t)("To`lanayotgan")," ",":"," "]}),(0,l.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[S.toLocaleString("ru-Ru")," ",T]})]})]})]}),(0,l.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,l.jsxs)("div",{className:"custom-paymet-btn",children:[(0,l.jsx)(r,{text:(0,h.t)("Naqd"),type:"cash",active:"cash"===u,onClick:w}),(0,l.jsx)(r,{text:(0,h.t)("Plastik"),type:"card",active:"card"===u,onClick:w}),(0,l.jsx)(r,{text:(0,h.t)("O'tkazma"),type:"transfer",active:"transfer"===u,onClick:w}),!t&&(0,l.jsx)(r,{text:(0,h.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:w}),q.pathname.includes("/kassa/debts")&&(0,l.jsx)(r,{text:(0,h.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:w})]}),!t&&(0,l.jsx)(n,{text:(0,h.t)("Chegirma"),onClick:C}),(0,l.jsx)(i,{text:(0,h.t)("To'lash"),onClick:A?()=>console.log("wait"):R})]})]})]})}},2977:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var s=a(5043),l=a(9456),r=a(3216),n=a(200),i=a(1204),c=a(5618),o=a(4964),u=a(3307),d=a(6270),m=a(7424),h=a(2039),x=a(3297),f=a(3734),p=a(6752),b=a(3444),g=a(2096);const y=e=>({sale:[{title:"\u2116"},{title:(0,g.t)("Sana"),filter:"createdAt"},{title:(0,g.t)("ID"),filter:(0,g.t)("id")},{title:(0,g.t)("Mijoz")},{title:(0,g.t)("Jami")},{title:"To'langan"},{title:(0,g.t)("Qarz")},{title:(0,g.t)("Izoh")},{title:"",styles:"w-[7rem]"}],income:[{title:"\u2116"},{title:(0,g.t)("Sana"),filter:"createdAt"},{title:(0,g.t)("ID"),filter:"saleconnector.id"},{title:(0,g.t)("Kelgan narxi")},{title:(0,g.t)("Sotilgan narxi")},{title:(0,g.t)("Chegirma")},{title:(0,g.t)("Foyda")},{title:""}],debts:[{title:"\u2116"},{title:(0,g.t)("Sana"),filter:"createdAt"},{title:(0,g.t)("ID"),filter:"saleconnector.id"},{title:(0,g.t)("Mijoz"),filter:"client"},{title:(0,g.t)("Qarz izoh")},{title:(0,g.t)("Jami")},{title:(0,g.t)("Qarz")},{title:""}],expenses:[{title:"\u2116"},{title:(0,g.t)("Sana"),filter:"createdAt"},{title:(0,g.t)("Summa")},{title:(0,g.t)("Izoh")},{title:(0,g.t)("Turi")}],discounts:[{title:"\u2116"},{title:(0,g.t)("Sana"),filter:"createdAt"},{title:(0,g.t)("ID"),filter:"saleconnector.id"},{title:(0,g.t)("Mijoz"),filter:"client"},{title:(0,g.t)("Jami")},{title:(0,g.t)("Chegirma")},{title:(0,g.t)("Foiz")}],backproducts:[{title:"\u2116"},{title:(0,g.t)("Sana"),filter:"createdAt"},{title:(0,g.t)("ID"),filter:"saleconnector.id"},{title:(0,g.t)("Mijoz"),filter:"client"},{title:(0,g.t)("Soni")},{title:(0,g.t)("Jami")},{title:(0,g.t)("Qaytarilgan")},{title:""}],payments:[{title:"\u2116"},{title:(0,g.t)("Sana"),filter:"createdAt"},{title:(0,g.t)("ID"),filter:"saleconnector.id"},{title:(0,g.t)("Mijoz")},{title:(0,g.t)("Naqt")},{title:(0,g.t)("Plastik")},{title:(0,g.t)("O'tkazma")},{title:(0,g.t)("Qarzdan to'lov")},{title:(0,g.t)("Qaytarilgan")},{title:""}]}[`${e}`]);var j=a(3536),N=a(3054),S=a(1154),v=a(1069),k=a(5702),D=a(7275),w=a(8069),z=a(4235),C=a(579);const U=()=>{var e;const[t,a]=(0,s.useState)(window.innerWidth<=768);(0,s.useEffect)((()=>{const e=()=>{a(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const{id:U}=(0,r.g)(),E=(0,l.wA)(),{market:R,user:P}=(0,l.d4)((e=>e.login)),{expenses:L}=(0,l.d4)((e=>e.expense)),{datas:I,count:A,startDate:q,endDate:O,successDebtComment:T,totalpayment:Q}=(0,l.d4)((e=>e.reports)),{sellings:M}=(0,l.d4)((e=>e.sellings)),{currencyType:B,currency:F}=(0,l.d4)((e=>e.currency)),[W,_]=(0,s.useState)(0),[$,J]=(0,s.useState)(10),[Y,H]=(0,s.useState)(1),[Z,X]=(0,s.useState)({id:"",client:""}),[K,V]=(0,s.useState)({id:"",client:""}),[G,ee]=(0,s.useState)([]),[te,ae]=(0,s.useState)(I),[se,le]=(0,s.useState)(!1),[re,ne]=(0,s.useState)(!1),[ie,ce]=(0,s.useState)("cash"),[oe,ue]=(0,s.useState)(""),[de,me]=(0,s.useState)(""),[he,xe]=(0,s.useState)(""),[fe,pe]=(0,s.useState)(""),[be,ge]=(0,s.useState)(""),[ye,je]=(0,s.useState)(""),[Ne,Se]=(0,s.useState)(""),[ve,ke]=(0,s.useState)(""),[De,we]=(0,s.useState)(""),[ze,Ce]=(0,s.useState)(!1),[Ue,Ee]=(0,s.useState)(null),[Re,Pe]=(0,s.useState)(""),[Le,Ie]=(0,s.useState)(!1),[Ae,qe]=(0,s.useState)({label:"%",value:"%"}),[Oe,Te]=(0,s.useState)({filter:"",sort:"",count:0}),[Qe,Me]=(0,s.useState)(I),[Be,Fe]=(0,s.useState)(0),[We,_e]=(0,s.useState)(0),[$e,Je]=(0,s.useState)(0),[Ye,He]=(0,s.useState)(0),[Ze,Xe]=(0,s.useState)(0),[Ke,Ve]=(0,s.useState)(0),[Ge,et]=(0,s.useState)(""),[tt,at]=(0,s.useState)(null),[st,lt]=(0,s.useState)({usd:0,uzs:0}),[rt,nt]=(0,s.useState)(null),[it,ct]=(0,s.useState)(new Date),[ot,ut]=(0,s.useState)(!1),[dt,mt]=(0,s.useState)({}),ht=e=>{let{value:t}=e;J(Number(t)),_(0)},xt=(0,s.useMemo)((()=>({cash:{uzs:L.filter((e=>"cash"===e.type)).reduce(((e,t)=>{let{sumuzs:a}=t;return e+a}),0),usd:L.filter((e=>"cash"===e.type)).reduce(((e,t)=>{let{sum:a}=t;return e+a}),0)},card:{uzs:L.filter((e=>"card"===e.type)).reduce(((e,t)=>{let{sumuzs:a}=t;return e+a}),0),usd:L.filter((e=>"card"===e.type)).reduce(((e,t)=>{let{sum:a}=t;return e+a}),0)},transfer:{uzs:L.filter((e=>"transfer"===e.type)).reduce(((e,t)=>{let{sumuzs:a}=t;return e+a}),0),usd:L.filter((e=>"transfer"===e.type)).reduce(((e,t)=>{let{sum:a}=t;return e+a}),0)}})),[L]),ft=e=>{ne(e?!re:e),ce("cash"),Ce(!1),Se(""),ke(""),we(""),Fe(0),_e(0),qe({label:"%",value:"%"})},pt=()=>{le(!se),et(""),at(null)},bt=e=>Math.round(1e3*e)/1e3,gt=e=>Math.round(e),yt=e=>{const t=e.debt,a=e.debtuzs;Je(t),He(a),ue(t),me(a),Xe(t),Ve(a),Ee(e._id),ne(!0)},jt=()=>{le(!1),setTimeout((()=>{et("")}),500)},Nt=e=>{"debts"===U&&(at(e),et("allChecks"),le(!0)),"sale"===U&&(at(e),et("allChecks"),le(!0)),"backproducts"===U&&(et("allChecks"),at(e),le(!se)),"income"===U&&(et("allChecks"),at(e),le(!se)),"payments"===U&&(e.payment?(et("checkSell"),at(e),le(!se)):(console.log(e),et("allChecks"),at(e),le(!se)))},St=e=>{let t=e.target.value;ae([...(0,j.filter)([...G],(e=>e.saleconnector?e.saleconnector.id.includes(t):e.id.includes(t)))]),V({...K,id:t})},vt=e=>{let t=e.target.value.toLowerCase();ae([...(0,j.filter)([...G],(e=>e.client&&e.client.name.toLowerCase().includes(t)))]),V({...K,client:t})},kt=e=>{"Enter"===e.key&&X(K)},Dt=e=>{let t=new Date(e.setHours(0,0,0));nt(t)},wt=e=>{let t=new Date(e.setHours(23,59,59));ct(t)},zt=e=>{if(e===Oe.filter)switch(Oe.count){case 1:Te({filter:e,sort:"1",count:2}),(0,n.Yc)(te,ae,e,1,Qe);break;case 2:Te({filter:e,sort:"",count:0}),(0,n.Yc)(te,ae,e,"",Qe);break;default:Te({filter:e,sort:"-1",count:1}),(0,n.Yc)(te,ae,e,-1,Qe)}else Te({filter:e,sort:"-1",count:1}),(0,n.Yc)(te,ae,e,-1,Qe)},Ct=(e,t)=>{E((0,p.ZT)({comment:e,debtid:t})),et("debtcomment"),le(!se)};return(0,s.useEffect)((()=>{const e=e=>U===e;let t={type:U,currentPage:W,countPage:$,startDate:rt,endDate:it,market:R,search:Z},a={startDate:rt,endDate:it};return e("sale")&&E((0,N.WL)(t)),e("income")&&E((0,p.Dd)(t)),e("payments")&&E((0,p.Hj)(t)),e("debts")&&E((0,p.N7)(a)),e("discounts")&&E((0,p.bV)(t)),e("backproducts")&&E((0,p.s3)(t)),e("expenses")&&E((0,p.Qj)(t)),()=>{E((0,p.fo)())}}),[E,Z,W,$,rt,it,R,U]),(0,s.useEffect)((()=>("cash"!==U&&"card"!==U&&"transfer"!==U||(ae([...I.filter((e=>0!==e[U]))]),ee([...I.filter((e=>0!==e[U]))])),"sale"===U?(ae(M),ee(M)):(ae(I),ee(I)),()=>{ae([]),ee([])})),[I,U,M]),(0,s.useEffect)((()=>{A>0&&H(A)}),[A]),(0,s.useEffect)((()=>{"debts"===U&&lt({usd:(0,n.tE)(I.reduce(((e,t)=>{let{debt:a}=t;return e+a}),0)),uzs:(0,n.Df)(I.reduce(((e,t)=>{let{debtuzs:a}=t;return e+a}),0))})}),[I,U]),(0,s.useEffect)((()=>{if("debts"===U){const e=[...I].filter((e=>new Date(e.createdAt)>=rt&&new Date(e.createdAt)<=it));ae(e)}ae(I),Me(I)}),[U,I,rt,it]),(0,s.useEffect)((()=>{if(T){let e={startDate:rt,endDate:it,market:R};E((0,p.N7)(e)),E((0,p.Z0)())}}),[E,T,U,R,Z,rt,it]),(0,s.useEffect)((()=>{let e={currentPage:0,countPage:1e7,startDate:rt,endDate:it};E((0,b.$R)(e))}),[E,rt,it]),(0,s.useEffect)((()=>{if("debts"===U){let e=new Date,t=e.getMonth(),a=e.getFullYear(),s=e.getDate(),l=new Date(a,t-3,s);nt(l)}else nt(q?new Date(q):new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()).setHours(0,0,0)),O&&ct(new Date(O))}),[U,q,O]),(0,C.jsxs)("div",{className:"relative overflow-auto ",children:[ot&&(0,C.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,C.jsx)(z.A,{})}),(0,C.jsxs)("div",{className:"flex lg:justify-start mb-3 justify-between items-center pe-4",children:[(0,C.jsx)("span",{className:"lg:mt-[20px]",children:(0,C.jsx)(i.A,{link:"/kassa"})}),t?(0,C.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,C.jsx)("div",{className:"mt-12",children:(0,C.jsx)(w.A,{onSelect:ht},"total_1")}),(0,C.jsx)("button",{onClick:()=>Ie(!0),className:"hover:bg-blue-200  bg-blue-400 focus-visible:outline-none w-[50px] h-[33px] lg:mt-2 lg:ms-2 mt-[50px]  createElement ",children:(0,C.jsx)(v.OuI,{})})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"mt-6",children:(0,C.jsx)(w.A,{onSelect:ht},"total_1")}),(0,C.jsx)(m.A,{filterBy:"debts"===U?["startDate","endDate","id","clientName"]:"income"===U?["total","id","startDate","endDate"]:"expenses"===U?["startDate","endDate"]:["id","clientName","startDate","endDate"],filterById:St,filterByClientName:vt,filterByIdWhenPressEnter:kt,filterByClientNameWhenPressEnter:kt,startDate:rt,endDate:it,setStartDate:Dt,setEndDate:wt}),(0,C.jsxs)("button",{className:"mt-6 exportButton",children:[(0,C.jsx)(k.A,{id:"reacthtmltoexcel",table:"excel-tabel",sheet:"Sheet",buttonText:"Excel",filename:"income"===U?"Sof foyda":"expenses"===U?"Xarajatlar":"payments"===U?"Tushumlar":"backproducts"===U?"Qaytarilganlar":"discounts"===U?"Chegirmalar":"Qarzlar"}),(0,C.jsx)("span",{className:"btn-icon bg-white-900 p-[8px]",children:(0,C.jsx)("img",{src:D.A,alt:"excel icon"})})]})]})]}),"payments"===U&&(0,C.jsx)("div",{className:"ml-3 px-4 py-2 flex justify-end",children:(0,C.jsx)(u.A,{text:`${(0,g.t)("Savdo hisoboti")}`,onClick:async e=>{ut(!0);try{let e={startDate:new Date(q),endDate:new Date(O),search:{client:"",id:"",product:""}},t={startDate:new Date(q).toISOString(),endDate:new Date(O)};const[{saleconnectors:a},{income:s,debts:l,discounts:r},{totalpieces:n},{totalpieces:i,totalprice:c,totalpriceuzs:o,producttypes:u}]=await Promise.all([await E((0,N.ah)(e)).unwrap(),await E((0,p.RI)(t)).unwrap(),await E((0,p.U7)(t)).unwrap(),await E((0,p.d$)()).unwrap()]);pt(),et("dailySaleCheck"),mt({boshsana:q,tugashsana:O,sotuvlarsoni:a.length,tushumlar:{naqt:{sum:Q.payment.cashuzs,dollar:Q.payment.cash},plastik:{sum:Q.payment.carduzs,dollar:Q.payment.card},utkazma:{sum:Q.payment.transferuzs,dollar:Q.payment.transfer}},qaytarilganlar:{naqt:{sum:Q.back.cashuzs,dollar:Q.back.cash},plastik:{sum:Q.back.carduzs,dollar:Q.back.card},utkazma:{sum:Q.back.transferuzs,dollar:Q.back.transfer}},xarajatlar:{naqt:{sum:xt.cash.uzs,dollar:xt.cash.usd},plastik:{sum:xt.card.uzs,dollar:xt.card.usd},utkazma:{sum:xt.transfer.uzs,dollar:xt.transfer.usd}},foyda:{sum:s.incomeuzs,dollar:s.income},qarzlar:{sum:l.debtsuzs,dollar:l.debts},chegirmalar:{sum:r.discountsuzs,dollar:r.discounts},kassaqoldiq:{naqt:{sum:Q.result.cashuzs-xt.cash.uzs,dollar:Q.result.cash-xt.cash.usd},plastik:{sum:Q.result.carduzs-xt.card.uzs,dollar:Q.result.card-xt.card.usd},utkazma:{sum:Q.result.transferuzs-xt.transfer.uzs,dollar:Q.result.transfer-xt.transfer.usd}},sotilganmaxsulotlarsoni:n,qolganmaxsulotlarsoni:u,qolganmaxsulotlarumumiysoni:i,qolganmaxsulotlarqiymati:{sum:o,dollar:c}})}catch(t){return ut(!1),console.error(t)}ut(!1)}})}),(0,C.jsx)("div",{className:"flex items-center justify-between",children:Le?(0,C.jsxs)("div",{className:"fixed w-[100%] h-[100vh] top-0 start-0 bg-[white] z-50 ",children:[(0,C.jsx)(S.RQJ,{onClick:()=>Ie(!1),className:"absolute text-3xl end-[25px] top-[25px] cursor-pointer"}),(0,C.jsx)("div",{className:"pl-[0px] flex items-center justify-between mainPadding mt-[30px]",children:(0,C.jsx)(m.A,{filterBy:"debts"===U?["startDate","endDate","id","clientName"]:"income"===U?["id","client","startDate","endDate"]:"expenses"===U?["startDate","endDate"]:["id","clientName","startDate","endDate"],filterById:St,filterByClientName:vt,filterByIdWhenPressEnter:kt,filterByClientNameWhenPressEnter:kt,startDate:rt,endDate:it,setStartDate:Dt,setEndDate:wt})}),(0,C.jsx)("div",{className:"flex justify-center",children:(0,C.jsxs)("button",{onClick:()=>Ie(!1),className:" hover:bg-blue-200  bg-blue-400 focus-visible:outline-none w-[150px] lg:h-[33px] h=[40px] createElement ",children:[(0,C.jsx)(v.OuI,{})," ",(0,g.t)("izlash")]})})]}):null}),(0,C.jsxs)("div",{className:"lg:ps-[20px] lg:tableContainerPadding ",children:[te.length>0&&(t?(0,C.jsx)(x.A,{page:"sale"===U?"saleslist":U,headers:y(U),data:te,currentPage:W,countPage:$,currency:B,type:U,Pay:yt,reports:!0,Print:Nt,Sort:zt,sortItem:Oe,Edit:Ct,totalDebt:st}):(0,C.jsx)(h.A,{page:"sale"===U?"saleslist":U,headers:y(U),data:te,currentPage:W,countPage:$,currency:B,type:U,Pay:yt,reports:!0,Print:Nt,Sort:zt,sortItem:Oe,Edit:Ct,totalDebt:st})),(0,C.jsx)("div",{className:"flex justify-center mt-3",children:"debts"!==U&&(0,C.jsx)(o.A,{countPage:$,currentPage:W,totalDatas:Y,setCurrentPage:_})}),"payments"===U&&(null===Q||void 0===Q||null===(e=Q.payment)||void 0===e?void 0:e.cash)&&(0,C.jsxs)("div",{className:"flex items-center justify-between gap-10 mt-6 bg-white py-6 md:py-0 flex-col md:flex-row",children:[(0,C.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,C.jsx)("div",{className:"text-[18px] font-bold mb-2",children:(0,g.t)("Tushumlar")}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("Naqt"),":"]}),(0,C.jsxs)("div",{children:["USD"===B?(0,n.tE)(Q.payment.cash).toLocaleString("ru-RU"):(0,n.Df)(Q.payment.cashuzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("Plastik"),":"]}),(0,C.jsxs)("div",{children:["USD"===B?(0,n.tE)(Q.payment.card).toLocaleString("ru-RU"):(0,n.Df)(Q.payment.carduzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("O'tkazma"),":"]}),(0,C.jsxs)("div",{children:["USD"===B?(0,n.tE)(Q.payment.transfer).toLocaleString("ru-RU"):(0,n.Df)(Q.payment.transferuzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"text-[18px] font-semibold w-full text-end",children:["USD"===B?(0,n.tE)(Q.payment.cash+Q.payment.card+Q.payment.transfer).toLocaleString("ru-RU"):(0,n.Df)(Q.payment.cashuzs+Q.payment.carduzs+Q.payment.transferuzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,C.jsx)("div",{className:"text-[18px] font-bold mb-2",children:(0,g.t)("Qaytarilganlar")}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("Naqt"),":"]})," ",(0,C.jsxs)("span",{children:["USD"===B?(0,n.tE)(Q.back.cash).toLocaleString("ru-RU"):(0,n.Df)(Q.back.cashuzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("Plastik"),":"]}),(0,C.jsxs)("span",{children:["USD"===B?(0,n.tE)(Q.back.card).toLocaleString("ru-RU"):(0,n.Df)(Q.back.carduzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("O'tkazma"),":"]}),(0,C.jsxs)("span",{children:["USD"===B?(0,n.tE)(Q.back.transfer).toLocaleString("ru-RU"):(0,n.Df)(Q.back.transferuzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"text-[18px] font-semibold w-full text-end",children:["USD"===B?(0,n.tE)(Q.back.cash+Q.back.card+Q.back.transfer).toLocaleString("ru-RU"):(0,n.Df)(Q.back.cashuzs+Q.back.carduzs+Q.back.transferuzs).toLocaleString("ru-RU")," ",B]})]}),L&&(0,C.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,C.jsx)("div",{className:"text-[18px] font-bold mb-2",children:(0,g.t)("Xarajatlar")}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("Naqt"),":"]})," ",(0,C.jsxs)("span",{children:["-","USD"===B?(0,n.tE)(xt.cash.usd).toLocaleString("ru-RU"):(0,n.Df)(xt.cash.uzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("Plastik"),":"]}),(0,C.jsxs)("span",{children:["-","USD"===B?(0,n.tE)(xt.card.usd).toLocaleString("ru-RU"):(0,n.Df)(xt.card.uzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("O'tkazma"),":"]}),(0,C.jsxs)("span",{children:["-","USD"===B?(0,n.tE)(xt.transfer.usd).toLocaleString("ru-RU"):(0,n.Df)(xt.transfer.uzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"text-[18px] font-semibold w-full text-end",children:["-","USD"===B?(0,n.tE)(xt.cash.usd+xt.card.usd+xt.transfer.usd).toLocaleString("ru-RU"):(0,n.Df)(xt.cash.uzs+xt.card.uzs+xt.transfer.uzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,C.jsx)("div",{className:"text-[18px] font-bold mb-2",children:(0,g.t)("Kassadagi qoldiq")}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("Naqt"),":"]}),(0,C.jsxs)("span",{children:["USD"===B?(0,n.tE)(Q.result.cash-xt.cash.usd).toLocaleString("ru-RU"):(0,n.Df)(Q.result.cashuzs-xt.cash.uzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("Plastik"),":"]}),(0,C.jsxs)("span",{children:["USD"===B?(0,n.tE)(Q.result.card-xt.card.usd).toLocaleString("ru-RU"):(0,n.Df)(Q.result.carduzs-xt.card.uzs).toLocaleString("ru-RU")," ",B]})]}),(0,C.jsxs)("div",{className:"font-semibold w-full gap-5 flex justify-between",children:[(0,C.jsxs)("div",{children:[(0,g.t)("O'tkazma"),":"]}),(0,C.jsxs)("span",{children:["USD"===B?(0,n.tE)(Q.result.transfer-xt.transfer.usd).toLocaleString("ru-RU"):(0,n.Df)(Q.result.transferuzs-xt.transfer.uzs).toLocaleString("ru-RU")," ",B]})]})]})]})]}),(0,C.jsx)("div",{children:(0,C.jsx)(d.A,{returned:!0,type:ie,active:re,togglePaymentModal:ft,changePaymentType:e=>{const t=$e-Number(Ne),a=Ye-Number(ve);if(ie!==e)switch(ce(e),e){case"cash":ue(t),me(a),xe(""),pe(""),ge(""),je(""),Xe(t),Ve(a),Fe(0),_e(0);break;case"card":xe(t),pe(a),ue(""),me(""),ge(""),je(""),Xe(t),Ve(a),Fe(0),_e(0);break;case"transfer":ge(t),je(a),ue(""),me(""),xe(""),pe(""),Xe(t),Ve(a),Fe(0),_e(0);break;default:ue(""),me(""),xe(""),pe(""),ge(""),je(""),Xe(0),Ve(0),Fe($e-Number(Ne)),_e(Ye-Number(ve))}},onChange:(e,t)=>{((e,t)=>{const a=$e-Number(Ne),s=Ye-Number(ve);if("USD"===B)if("cash"===t){const t=Number(e)+Number(he)+Number(be),s=Number(de)+Number(fe)+Number(ye);t<=a?(ue(e),me((0,n.IQ)(e,F)),Fe(bt(a-t)),_e((0,n.IQ)(a-t,F)),Xe(t),Ve(s)):(0,f.OC)()}else if("card"===t){const t=Number(e)+Number(oe)+Number(be),s=Number(de)+Number(fe)+Number(ye);t<=a?(xe(e),pe((0,n.IQ)(e,F)),Fe(bt(a-t)),_e((0,n.IQ)(a-t,F)),Xe(t),Ve(s)):(0,f.OC)()}else{const t=Number(e)+Number(oe)+Number(he),s=Number(de)+Number(fe)+Number(ye);t<=a?(ge(e),je((0,n.IQ)(e,F)),Fe(bt(a-t)),_e((0,n.IQ)(a-t,F)),Xe(t),Ve(s)):(0,f.OC)()}else if("cash"===t){const t=Number(e)+Number(fe)+Number(ye),a=Number(oe)+Number(he)+Number(be);t<=s?(me(e),ue((0,n.Ch)(e,F)),Fe((0,n.Ch)(s-t,F)),_e(gt(s-t)),Xe(a),Ve(t)):(0,f.OC)()}else if("card"===t){const t=Number(e)+Number(de)+Number(ye);t<=s?(xe((0,n.Ch)(e,F)),pe(e),Fe((0,n.Ch)(s-t,F)),_e(gt(s-t)),Xe((0,n.Ch)(t,F)),Ve(t)):(0,f.OC)()}else{const t=Number(e)+Number(de)+Number(fe),a=Number(oe)+Number(he)+Number(be);t<=s?(ge((0,n.Ch)(e,F)),je(e),Fe((0,n.Ch)(s-t,F)),_e(gt(s-t)),Xe(a),Ve(t)):(0,f.OC)()}})(e,t)},client:Re,allPayment:"USD"===B?$e:Ye,card:"USD"===B?he:fe,cash:"USD"===B?oe:de,debt:"USD"===B?Be:We,discount:"USD"===B?"USD"===Ae.value?Ne:De:"UZS"===Ae.value?ve:De,handleChangeDiscount:e=>{const t=Math.round(5*$e/100*10)/10,a=Math.round(5*Ye/100*10)/10;if("USD"===Ae.value)e>t?(0,f.nN)(`${t} USD`):(Se(e),ke((0,n.IQ)(e,F)),we(Math.round($e*e/100*10)/10),Fe($e-e),_e((0,n.IQ)($e-e,F)));else if("UZS"===Ae.value)e>a?(0,f.nN)(`${a} UZS`):(ke(e),Se((0,n.Ch)(e,F)),we(Math.round(Ye*e/100*10)/10),Fe((0,n.Ch)(Ye-e,F)),_e(Ye-e));else if(e>5)(0,f.nN)("5%");else{const t=Math.round($e*e/100*10)/10,a=Math.round(Ye*e/100*10)/10;we(e),Se(t),ke(a),Fe(bt($e-t)),_e(gt(Ye-a)),Xe($e-t),Ve(Ye-a)}ue(""),me(""),xe(""),pe(""),ge(""),je(""),Xe(0),Ve(0)},hasDiscount:ze,transfer:"USD"===B?be:ye,handleClickDiscountBtn:()=>{Ce(!ze),"cash"===ie?(ue($e),me(Ye),Xe($e),Ve(Ye)):"card"===ie?(xe($e),pe(Ye),Xe($e),Ve(Ye)):"transfer"===ie?(ge($e),je(Ye),Xe($e),Ve(Ye)):(ue(""),me(""),xe(""),pe(""),ge(""),je(""),Xe(0),Ve(0),Fe($e),_e(Ye)),Se(""),ke(""),we("")},discountSelectOption:Ae,handleChangeDiscountSelectOption:e=>{Ae.value!==e.value&&(qe(e),Se(""),ke(""),we(""),ue(""),me(""),xe(""),pe(""),ge(""),je(""),Fe($e),_e(Ye),Xe(0),Ve(0))},paid:"USD"===B?Ze:Ke,handleClickPay:()=>{et("complete"),le(!0)}})}),(0,C.jsx)(c.A,{body:Ge,toggleModal:"sell"===Ge?()=>{et(""),le(!se),setTimeout((()=>{}),500)}:"complete"===Ge?jt:"allChecks"===Ge?()=>{le(!se),et(""),et(null)}:"debtcomment"===Ge?()=>{E((0,p.ZT)({comment:null,debtid:null})),et(""),le(!se)}:pt,approveFunction:()=>{jt();const e={payment:{totalprice:Number($e),totalpriceuzs:Number(Ye),type:ie,cash:Number(oe),cashuzs:Number(de),card:Number(he),carduzs:Number(fe),transfer:Number(be),transferuzs:Number(ye),discount:Number(Ne),discountuzs:Number(ve)},user:P._id,saleconnectorid:Ue};E((0,p.IH)(e)).then((e=>{let{payload:t}=e;at(t),E((0,p.N7)()),setTimeout((()=>{var e;et("checkPayment"),le(!0),ue(""),me(""),xe(""),pe(""),ge(""),je(""),Fe(0),_e(0),Xe(0),Ve(0),Pe(""),Ee(null),ft(e)}),500)}))},isOpen:se,payment:tt,printedSelling:"dailySaleCheck"===Ge?dt:tt,product:tt,headers:[{title:"\u2116"},{title:"Kodi"},{title:"Nomi"},{title:"Soni"},{title:"Narxi"},{title:"Jami",styles:"w-[10rem]"},{title:""}],headerText:"complete"===Ge&&"To'lovni amalga oshirishni tasdiqlaysizmi?",title:"complete"===Ge&&"To'lovni amalga oshirgach bu ma`lumotlarni o'zgaritirib bo'lmaydi!"})]})}}}]);
//# sourceMappingURL=2653.277417df.chunk.js.map